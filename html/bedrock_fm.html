<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>bedrock_fm API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>




            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#Titan">Titan</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Titan.__init__">Titan</a>
                        </li>
                        <li>
                                <a class="function" href="#Titan.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Titan.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Titan.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Titan.process_response_body">process_response_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Titan.get_text">get_text</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Claude">Claude</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Claude.__init__">Claude</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.get_chat_prompt">get_chat_prompt</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.process_response_body">process_response_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Claude.get_text">get_text</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Jurassic">Jurassic</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Jurassic.__init__">Jurassic</a>
                        </li>
                        <li>
                                <a class="function" href="#Jurassic.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Jurassic.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Jurassic.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Jurassic.process_response_body">process_response_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Jurassic.get_text">get_text</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#StreamDetails">StreamDetails</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#StreamDetails.__init__">StreamDetails</a>
                        </li>
                        <li>
                                <a class="variable" href="#StreamDetails.stream">stream</a>
                        </li>
                        <li>
                                <a class="variable" href="#StreamDetails.prompt">prompt</a>
                        </li>
                        <li>
                                <a class="variable" href="#StreamDetails.body">body</a>
                        </li>
                        <li>
                                <a class="variable" href="#StreamDetails.latency">latency</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#CompletionDetails">CompletionDetails</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#CompletionDetails.__init__">CompletionDetails</a>
                        </li>
                        <li>
                                <a class="variable" href="#CompletionDetails.output">output</a>
                        </li>
                        <li>
                                <a class="variable" href="#CompletionDetails.response">response</a>
                        </li>
                        <li>
                                <a class="variable" href="#CompletionDetails.prompt">prompt</a>
                        </li>
                        <li>
                                <a class="variable" href="#CompletionDetails.body">body</a>
                        </li>
                        <li>
                                <a class="variable" href="#CompletionDetails.latency">latency</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#BedrockFoundationModel">BedrockFoundationModel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#BedrockFoundationModel.__init__">BedrockFoundationModel</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.top_p">top_p</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.temperature">temperature</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.max_token_count">max_token_count</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.stop_sequences">stop_sequences</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.extra_args">extra_args</a>
                        </li>
                        <li>
                                <a class="variable" href="#BedrockFoundationModel.session">session</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.from_id">from_id</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.list_model_ids">list_model_ids</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.generate">generate</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.chat">chat</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.get_chat_prompt">get_chat_prompt</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.process_response_body">process_response_body</a>
                        </li>
                        <li>
                                <a class="function" href="#BedrockFoundationModel.get_text">get_text</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Command">Command</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Command.__init__">Command</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.process_response_body">process_response_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Command.get_text">get_text</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Embed">Embed</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Embed.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Embed.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Embed.parse_response">parse_response</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Llama2Chat">Llama2Chat</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Llama2Chat.__init__">Llama2Chat</a>
                        </li>
                        <li>
                                <a class="function" href="#Llama2Chat.family">family</a>
                        </li>
                        <li>
                                <a class="function" href="#Llama2Chat.validate_extra_args">validate_extra_args</a>
                        </li>
                        <li>
                                <a class="function" href="#Llama2Chat.get_chat_prompt">get_chat_prompt</a>
                        </li>
                        <li>
                                <a class="function" href="#Llama2Chat.get_body">get_body</a>
                        </li>
                        <li>
                                <a class="function" href="#Llama2Chat.process_response_body">process_response_body</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#from_model_id">from_model_id</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
bedrock_fm    </h1>

                        <div class="docstring"><p>Higher level SDK to interact with <a href="">Amazon Bedrock</a>.</p>

<p>The <code><a href="">bedrock_fm</a></code> library exposes a separate class for each of the Bedrock models, with an simpler <code>generate()</code> API which is common across all models. The same method can be used to get a stream instead of a full completion by passing the <code>stream=True</code> as parameter. To obtain a detailed response including the original prompt, the body passed to the <code>invoke_*</code> method and timing information you can pass the parameter <code>details=True</code>. The API is fully typed, including the different return types based on the <code>stream</code> and <code>details</code> parameters values. </p>

<p>The output generation can be tuned with the optional <code>temperature</code>, <code>top_p</code> and <code>stop_words</code> parameters which can be passed at the instance creation time (in the class constructor) and overridden at generation time in the <code>generate</code> method.</p>
</div>

                        <input id="mod-bedrock_fm-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-bedrock_fm-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;Higher level SDK to interact with [Amazon Bedrock]().</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="sd">The `bedrock_fm` library exposes a separate class for each of the Bedrock models, with an simpler `generate()` API which is common across all models. The same method can be used to get a stream instead of a full completion by passing the `stream=True` as parameter. To obtain a detailed response including the original prompt, the body passed to the `invoke_*` method and timing information you can pass the parameter `details=True`. The API is fully typed, including the different return types based on the `stream` and `details` parameters values. </span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">The output generation can be tuned with the optional `temperature`, `top_p` and `stop_words` parameters which can be passed at the instance creation time (in the class constructor) and overridden at generation time in the `generate` method.</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a><span class="kn">from</span> <span class="nn">.amazon</span> <span class="kn">import</span> <span class="n">Titan</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a><span class="kn">from</span> <span class="nn">.anthropic</span> <span class="kn">import</span> <span class="n">Claude</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a><span class="kn">from</span> <span class="nn">.ai21</span> <span class="kn">import</span> <span class="n">Jurassic</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a><span class="kn">from</span> <span class="nn">.cohere</span> <span class="kn">import</span> <span class="n">Command</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a><span class="kn">from</span> <span class="nn">.meta</span> <span class="kn">import</span> <span class="n">Llama2Chat</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a><span class="kn">from</span> <span class="nn">.cohere_embeddings</span> <span class="kn">import</span> <span class="n">Embed</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a><span class="kn">from</span> <span class="nn">.titan_embeddings</span> <span class="kn">import</span> <span class="n">TitanEmbeddings</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a><span class="kn">from</span> <span class="nn">.bedrock</span> <span class="kn">import</span> <span class="p">(</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a>    <span class="n">StreamDetails</span><span class="p">,</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>    <span class="n">CompletionDetails</span><span class="p">,</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a>    <span class="n">BedrockFoundationModel</span><span class="p">,</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a>    <span class="n">BedrockEmbeddingsModel</span><span class="p">,</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a><span class="p">)</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a><span class="kn">from</span> <span class="nn">.exceptions</span> <span class="kn">import</span> <span class="n">BedrockInvalidModelError</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a>    <span class="s2">&quot;Titan&quot;</span><span class="p">,</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">27</span></a>    <span class="s2">&quot;Claude&quot;</span><span class="p">,</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">28</span></a>    <span class="s2">&quot;Jurassic&quot;</span><span class="p">,</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">29</span></a>    <span class="s2">&quot;StreamDetails&quot;</span><span class="p">,</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos">30</span></a>    <span class="s2">&quot;CompletionDetails&quot;</span><span class="p">,</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">31</span></a>    <span class="s2">&quot;BedrockFoundationModel&quot;</span><span class="p">,</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">32</span></a>    <span class="s2">&quot;Command&quot;</span><span class="p">,</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">33</span></a>    <span class="s2">&quot;Embed&quot;</span><span class="p">,</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">34</span></a>    <span class="s2">&quot;Llama2Chat&quot;</span><span class="p">,</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">35</span></a>    <span class="s2">&quot;from_model_id&quot;</span><span class="p">,</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">36</span></a><span class="p">]</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos">38</span></a><span class="n">__family_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">39</span></a>    <span class="n">Titan</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Titan</span><span class="p">,</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">40</span></a>    <span class="n">Command</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Command</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">41</span></a>    <span class="n">Jurassic</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Jurassic</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">42</span></a>    <span class="n">Claude</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Claude</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">43</span></a>    <span class="n">TitanEmbeddings</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">TitanEmbeddings</span><span class="p">,</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">44</span></a>    <span class="n">Embed</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Embed</span><span class="p">,</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">45</span></a>    <span class="n">Llama2Chat</span><span class="o">.</span><span class="n">family</span><span class="p">():</span> <span class="n">Llama2Chat</span><span class="p">,</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">46</span></a><span class="p">}</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos">48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos">49</span></a><span class="k">def</span> <span class="nf">from_model_id</span><span class="p">(</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">50</span></a>    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">51</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BedrockFoundationModel</span> <span class="o">|</span> <span class="n">BedrockEmbeddingsModel</span><span class="p">:</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">52</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiates a Bedrock Foundation Model or Embedding Model based on the `model_id`.</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">53</span></a>
</span><span id="L-54"><a href="#L-54"><span class="linenos">54</span></a><span class="sd">    Usage example:</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos">56</span></a><span class="sd">    ```py</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">57</span></a><span class="sd">    from bedrock_fm import from_model_id</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos">59</span></a><span class="sd">    fm = from_model_id(&quot;amazon.titan-embed-g1-text-02&quot;)</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">60</span></a><span class="sd">    # fm is of type `bedrock_fm.Titan`</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">61</span></a><span class="sd">    ```</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos">63</span></a><span class="sd">    Args:</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">64</span></a><span class="sd">        model_id (str): the Amazon Bedrock [modelId]()</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos">66</span></a><span class="sd">    Raises:</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">67</span></a><span class="sd">        BedrockInvalidModelError:</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos">69</span></a><span class="sd">    Returns:</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">70</span></a><span class="sd">        BedrockFoundationModel | BedrockEmbeddingsModel: A typed instance of the Foundation Model</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">71</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos">72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos">73</span></a>    <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_id</span><span class="p">:</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">74</span></a>        <span class="k">raise</span> <span class="n">BedrockInvalidModelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> is not a supported model&quot;</span><span class="p">)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">75</span></a>    <span class="n">family</span> <span class="o">=</span> <span class="n">model_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">76</span></a>    <span class="k">if</span> <span class="n">model_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;embed&quot;</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos">77</span></a>        <span class="n">family</span> <span class="o">+=</span> <span class="s2">&quot;-embed&quot;</span>  <span class="c1"># Amazon Titan model naming workaround</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos">79</span></a>    <span class="k">if</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">__family_map</span><span class="p">:</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">80</span></a>        <span class="k">return</span> <span class="n">__family_map</span><span class="p">[</span><span class="n">family</span><span class="p">]</span><span class="o">.</span><span class="n">from_id</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">81</span></a>    <span class="k">raise</span> <span class="n">BedrockInvalidModelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> is not a supported model&quot;</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="Titan">
                            <input id="Titan-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define</div>

    <span class="def">class</span>
    <span class="name">Titan</span><wbr>(<span class="base"><a href="#BedrockFoundationModel">bedrock_fm.BedrockFoundationModel</a></span>):

                <label class="view-source-button" for="Titan-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan-8"><a href="#Titan-8"><span class="linenos"> 8</span></a><span class="nd">@define</span>
</span><span id="Titan-9"><a href="#Titan-9"><span class="linenos"> 9</span></a><span class="k">class</span> <span class="nc">Titan</span><span class="p">(</span><span class="n">BedrockFoundationModel</span><span class="p">):</span>
</span><span id="Titan-10"><a href="#Titan-10"><span class="linenos">10</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Amazon Titan Foundation Models are pre-trained on large datasets, making them powerful, general-purpose models.</span>
</span><span id="Titan-11"><a href="#Titan-11"><span class="linenos">11</span></a><span class="sd">    Use them as is, or customize them by fine tuning the models with your own data for a particular task without annotating large volumes of data.</span>
</span><span id="Titan-12"><a href="#Titan-12"><span class="linenos">12</span></a><span class="sd">    </span>
</span><span id="Titan-13"><a href="#Titan-13"><span class="linenos">13</span></a><span class="sd">    Titan Text models are generative LLMs for tasks such as summarization, text generation (for example, creating a blog post), classification, </span>
</span><span id="Titan-14"><a href="#Titan-14"><span class="linenos">14</span></a><span class="sd">    open-ended Q&amp;A, </span>
</span><span id="Titan-15"><a href="#Titan-15"><span class="linenos">15</span></a><span class="sd">    and information extraction. They are also trained on many different programming languages as well as rich text format like tables, </span>
</span><span id="Titan-16"><a href="#Titan-16"><span class="linenos">16</span></a><span class="sd">    JSON and csvs among others.</span>
</span><span id="Titan-17"><a href="#Titan-17"><span class="linenos">17</span></a>
</span><span id="Titan-18"><a href="#Titan-18"><span class="linenos">18</span></a><span class="sd">    To continue supporting best practices in the responsible use of AI, Titan Foundation Models are built to detect and </span>
</span><span id="Titan-19"><a href="#Titan-19"><span class="linenos">19</span></a><span class="sd">    remove harmful content in the data, reject inappropriate content in the user input, and filter the models outputs that contain </span>
</span><span id="Titan-20"><a href="#Titan-20"><span class="linenos">20</span></a><span class="sd">    inappropriate content (such as hate speech, profanity, and violence). </span>
</span><span id="Titan-21"><a href="#Titan-21"><span class="linenos">21</span></a><span class="sd">    Titan models do not support any `extra_args`.</span>
</span><span id="Titan-22"><a href="#Titan-22"><span class="linenos">22</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Titan-23"><a href="#Titan-23"><span class="linenos">23</span></a>
</span><span id="Titan-24"><a href="#Titan-24"><span class="linenos">24</span></a>    <span class="nd">@classmethod</span>
</span><span id="Titan-25"><a href="#Titan-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">_validate_model_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model_id</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Titan-26"><a href="#Titan-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="n">model_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">family</span><span class="p">())</span> <span class="ow">and</span> <span class="s2">&quot;embed&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_id</span>
</span><span id="Titan-27"><a href="#Titan-27"><span class="linenos">27</span></a>
</span><span id="Titan-28"><a href="#Titan-28"><span class="linenos">28</span></a>    <span class="nd">@classmethod</span>
</span><span id="Titan-29"><a href="#Titan-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan-30"><a href="#Titan-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="s2">&quot;amazon.titan&quot;</span>
</span><span id="Titan-31"><a href="#Titan-31"><span class="linenos">31</span></a>
</span><span id="Titan-32"><a href="#Titan-32"><span class="linenos">32</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Titan-33"><a href="#Titan-33"><span class="linenos">33</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Titan-34"><a href="#Titan-34"><span class="linenos">34</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span><span class="s2">&quot;This model does not support any extra_args&quot;</span><span class="p">)</span>
</span><span id="Titan-35"><a href="#Titan-35"><span class="linenos">35</span></a>
</span><span id="Titan-36"><a href="#Titan-36"><span class="linenos">36</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Titan-37"><a href="#Titan-37"><span class="linenos">37</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Titan-38"><a href="#Titan-38"><span class="linenos">38</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Titan-39"><a href="#Titan-39"><span class="linenos">39</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Titan-40"><a href="#Titan-40"><span class="linenos">40</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Titan-41"><a href="#Titan-41"><span class="linenos">41</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Titan-42"><a href="#Titan-42"><span class="linenos">42</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Titan-43"><a href="#Titan-43"><span class="linenos">43</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Titan-44"><a href="#Titan-44"><span class="linenos">44</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Titan-45"><a href="#Titan-45"><span class="linenos">45</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan-46"><a href="#Titan-46"><span class="linenos">46</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
</span><span id="Titan-47"><a href="#Titan-47"><span class="linenos">47</span></a>            <span class="p">{</span>
</span><span id="Titan-48"><a href="#Titan-48"><span class="linenos">48</span></a>                <span class="s2">&quot;inputText&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Titan-49"><a href="#Titan-49"><span class="linenos">49</span></a>                <span class="s2">&quot;textGenerationConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="Titan-50"><a href="#Titan-50"><span class="linenos">50</span></a>                    <span class="s2">&quot;maxTokenCount&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Titan-51"><a href="#Titan-51"><span class="linenos">51</span></a>                    <span class="s2">&quot;stopSequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Titan-52"><a href="#Titan-52"><span class="linenos">52</span></a>                    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Titan-53"><a href="#Titan-53"><span class="linenos">53</span></a>                    <span class="s2">&quot;topP&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Titan-54"><a href="#Titan-54"><span class="linenos">54</span></a>                <span class="p">},</span>
</span><span id="Titan-55"><a href="#Titan-55"><span class="linenos">55</span></a>            <span class="p">}</span>
</span><span id="Titan-56"><a href="#Titan-56"><span class="linenos">56</span></a>        <span class="p">)</span>
</span><span id="Titan-57"><a href="#Titan-57"><span class="linenos">57</span></a>
</span><span id="Titan-58"><a href="#Titan-58"><span class="linenos">58</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Titan-59"><a href="#Titan-59"><span class="linenos">59</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">out</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]]</span>
</span><span id="Titan-60"><a href="#Titan-60"><span class="linenos">60</span></a>
</span><span id="Titan-61"><a href="#Titan-61"><span class="linenos">61</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan-62"><a href="#Titan-62"><span class="linenos">62</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;outputText&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Amazon Titan Foundation Models are pre-trained on large datasets, making them powerful, general-purpose models.
Use them as is, or customize them by fine tuning the models with your own data for a particular task without annotating large volumes of data.</p>

<p>Titan Text models are generative LLMs for tasks such as summarization, text generation (for example, creating a blog post), classification, 
open-ended Q&amp;A, 
and information extraction. They are also trained on many different programming languages as well as rich text format like tables, 
JSON and csvs among others.</p>

<p>To continue supporting best practices in the responsible use of AI, Titan Foundation Models are built to detect and 
remove harmful content in the data, reject inappropriate content in the user input, and filter the models outputs that contain 
inappropriate content (such as hate speech, profanity, and violence). 
Titan models do not support any <code><a href="#Titan.extra_args">extra_args</a></code>.</p>
</div>


                            <div id="Titan.__init__" class="classattr">
                                        <input id="Titan.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Titan</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Titan.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.__init__-2"><a href="#Titan.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="Titan.__init__-3"><a href="#Titan.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="Titan.__init__-4"><a href="#Titan.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="Titan.__init__-5"><a href="#Titan.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="Titan.__init__-6"><a href="#Titan.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Titan.__init__-7"><a href="#Titan.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="Titan.__init__-8"><a href="#Titan.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Titan.__init__-9"><a href="#Titan.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="Titan.__init__-10"><a href="#Titan.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Titan.__init__-11"><a href="#Titan.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="Titan.__init__-12"><a href="#Titan.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Titan.__init__-13"><a href="#Titan.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="Titan.__init__-14"><a href="#Titan.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Titan.__init__-15"><a href="#Titan.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="Titan.__init__-16"><a href="#Titan.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Titan.__init__-17"><a href="#Titan.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="Titan.__init__-18"><a href="#Titan.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Titan.__init__-19"><a href="#Titan.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="Titan.__init__-20"><a href="#Titan.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Titan.__init__-21"><a href="#Titan.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Titan.__init__-22"><a href="#Titan.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Titan.__init__-23"><a href="#Titan.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="Titan.__init__-24"><a href="#Titan.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Titan.__init__-25"><a href="#Titan.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Titan.__init__-26"><a href="#Titan.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class Titan.</p>
</div>


                            </div>
                            <div id="Titan.family" class="classattr">
                                        <input id="Titan.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Titan.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.family-28"><a href="#Titan.family-28"><span class="linenos">28</span></a>    <span class="nd">@classmethod</span>
</span><span id="Titan.family-29"><a href="#Titan.family-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan.family-30"><a href="#Titan.family-30"><span class="linenos">30</span></a>        <span class="k">return</span> <span class="s2">&quot;amazon.titan&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Titan.validate_extra_args" class="classattr">
                                        <input id="Titan.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Titan.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.validate_extra_args-32"><a href="#Titan.validate_extra_args-32"><span class="linenos">32</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span><span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Titan.validate_extra_args-33"><a href="#Titan.validate_extra_args-33"><span class="linenos">33</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Titan.validate_extra_args-34"><a href="#Titan.validate_extra_args-34"><span class="linenos">34</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span><span class="s2">&quot;This model does not support any extra_args&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="Titan.get_body" class="classattr">
                                        <input id="Titan.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	stop_sequences: [&lt;class &#x27;str&#x27;&gt;],</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Titan.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.get_body-36"><a href="#Titan.get_body-36"><span class="linenos">36</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Titan.get_body-37"><a href="#Titan.get_body-37"><span class="linenos">37</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Titan.get_body-38"><a href="#Titan.get_body-38"><span class="linenos">38</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Titan.get_body-39"><a href="#Titan.get_body-39"><span class="linenos">39</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Titan.get_body-40"><a href="#Titan.get_body-40"><span class="linenos">40</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Titan.get_body-41"><a href="#Titan.get_body-41"><span class="linenos">41</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Titan.get_body-42"><a href="#Titan.get_body-42"><span class="linenos">42</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Titan.get_body-43"><a href="#Titan.get_body-43"><span class="linenos">43</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Titan.get_body-44"><a href="#Titan.get_body-44"><span class="linenos">44</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Titan.get_body-45"><a href="#Titan.get_body-45"><span class="linenos">45</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan.get_body-46"><a href="#Titan.get_body-46"><span class="linenos">46</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
</span><span id="Titan.get_body-47"><a href="#Titan.get_body-47"><span class="linenos">47</span></a>            <span class="p">{</span>
</span><span id="Titan.get_body-48"><a href="#Titan.get_body-48"><span class="linenos">48</span></a>                <span class="s2">&quot;inputText&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Titan.get_body-49"><a href="#Titan.get_body-49"><span class="linenos">49</span></a>                <span class="s2">&quot;textGenerationConfig&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="Titan.get_body-50"><a href="#Titan.get_body-50"><span class="linenos">50</span></a>                    <span class="s2">&quot;maxTokenCount&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Titan.get_body-51"><a href="#Titan.get_body-51"><span class="linenos">51</span></a>                    <span class="s2">&quot;stopSequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Titan.get_body-52"><a href="#Titan.get_body-52"><span class="linenos">52</span></a>                    <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Titan.get_body-53"><a href="#Titan.get_body-53"><span class="linenos">53</span></a>                    <span class="s2">&quot;topP&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Titan.get_body-54"><a href="#Titan.get_body-54"><span class="linenos">54</span></a>                <span class="p">},</span>
</span><span id="Titan.get_body-55"><a href="#Titan.get_body-55"><span class="linenos">55</span></a>            <span class="p">}</span>
</span><span id="Titan.get_body-56"><a href="#Titan.get_body-56"><span class="linenos">56</span></a>        <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="Titan.process_response_body" class="classattr">
                                        <input id="Titan.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">out</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Titan.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.process_response_body-58"><a href="#Titan.process_response_body-58"><span class="linenos">58</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Titan.process_response_body-59"><a href="#Titan.process_response_body-59"><span class="linenos">59</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">out</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div id="Titan.get_text" class="classattr">
                                        <input id="Titan.get_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Titan.get_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Titan.get_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Titan.get_text-61"><a href="#Titan.get_text-61"><span class="linenos">61</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Titan.get_text-62"><a href="#Titan.get_text-62"><span class="linenos">62</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;outputText&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the concrete class to extract the text from the answer</p>

<p>Args:
    body (Dict[str, Any]): the body as a dictionary</p>

<p>Returns:
    str: the generated text</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#BedrockFoundationModel">BedrockFoundationModel</a></dt>
                                <dd id="Titan.top_p" class="variable"><a href="#BedrockFoundationModel.top_p">top_p</a></dd>
                <dd id="Titan.temperature" class="variable"><a href="#BedrockFoundationModel.temperature">temperature</a></dd>
                <dd id="Titan.max_token_count" class="variable"><a href="#BedrockFoundationModel.max_token_count">max_token_count</a></dd>
                <dd id="Titan.stop_sequences" class="variable"><a href="#BedrockFoundationModel.stop_sequences">stop_sequences</a></dd>
                <dd id="Titan.extra_args" class="variable"><a href="#BedrockFoundationModel.extra_args">extra_args</a></dd>
                <dd id="Titan.session" class="variable"><a href="#BedrockFoundationModel.session">session</a></dd>
                <dd id="Titan.from_id" class="function"><a href="#BedrockFoundationModel.from_id">from_id</a></dd>
                <dd id="Titan.list_model_ids" class="function"><a href="#BedrockFoundationModel.list_model_ids">list_model_ids</a></dd>
                <dd id="Titan.generate" class="function"><a href="#BedrockFoundationModel.generate">generate</a></dd>
                <dd id="Titan.chat" class="function"><a href="#BedrockFoundationModel.chat">chat</a></dd>
                <dd id="Titan.get_chat_prompt" class="function"><a href="#BedrockFoundationModel.get_chat_prompt">get_chat_prompt</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Claude">
                            <input id="Claude-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define</div>

    <span class="def">class</span>
    <span class="name">Claude</span><wbr>(<span class="base"><a href="#BedrockFoundationModel">bedrock_fm.BedrockFoundationModel</a></span>):

                <label class="view-source-button" for="Claude-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude-9"><a href="#Claude-9"><span class="linenos">  9</span></a><span class="nd">@define</span>
</span><span id="Claude-10"><a href="#Claude-10"><span class="linenos"> 10</span></a><span class="k">class</span> <span class="nc">Claude</span><span class="p">(</span><span class="n">BedrockFoundationModel</span><span class="p">):</span>
</span><span id="Claude-11"><a href="#Claude-11"><span class="linenos"> 11</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Anthropic offers the Claude family of large language models purpose built for conversations, summarization,</span>
</span><span id="Claude-12"><a href="#Claude-12"><span class="linenos"> 12</span></a><span class="sd">    Q&amp;A, workflow automation, coding and more. Early customers report that Claude is much less likely to produce harmful</span>
</span><span id="Claude-13"><a href="#Claude-13"><span class="linenos"> 13</span></a><span class="sd">    outputs, easier to converse with, and more steerable - so you can get your desired output with less effort.</span>
</span><span id="Claude-14"><a href="#Claude-14"><span class="linenos"> 14</span></a><span class="sd">    Claude can also take direction on personality, tone, and behavior.</span>
</span><span id="Claude-15"><a href="#Claude-15"><span class="linenos"> 15</span></a>
</span><span id="Claude-16"><a href="#Claude-16"><span class="linenos"> 16</span></a><span class="sd">    [Anthropic Claude](https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-claude)</span>
</span><span id="Claude-17"><a href="#Claude-17"><span class="linenos"> 17</span></a><span class="sd">    models support the following `extra_args`</span>
</span><span id="Claude-18"><a href="#Claude-18"><span class="linenos"> 18</span></a>
</span><span id="Claude-19"><a href="#Claude-19"><span class="linenos"> 19</span></a><span class="sd">        {</span>
</span><span id="Claude-20"><a href="#Claude-20"><span class="linenos"> 20</span></a><span class="sd">            &quot;top_k&quot;: int</span>
</span><span id="Claude-21"><a href="#Claude-21"><span class="linenos"> 21</span></a><span class="sd">        }</span>
</span><span id="Claude-22"><a href="#Claude-22"><span class="linenos"> 22</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Claude-23"><a href="#Claude-23"><span class="linenos"> 23</span></a>
</span><span id="Claude-24"><a href="#Claude-24"><span class="linenos"> 24</span></a>    <span class="nd">@classmethod</span>
</span><span id="Claude-25"><a href="#Claude-25"><span class="linenos"> 25</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude-26"><a href="#Claude-26"><span class="linenos"> 26</span></a>        <span class="k">return</span> <span class="s2">&quot;anthropic.claude&quot;</span>
</span><span id="Claude-27"><a href="#Claude-27"><span class="linenos"> 27</span></a>
</span><span id="Claude-28"><a href="#Claude-28"><span class="linenos"> 28</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Claude-29"><a href="#Claude-29"><span class="linenos"> 29</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Claude-30"><a href="#Claude-30"><span class="linenos"> 30</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Claude-31"><a href="#Claude-31"><span class="linenos"> 31</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;top_k&quot;</span><span class="p">]:</span>
</span><span id="Claude-32"><a href="#Claude-32"><span class="linenos"> 32</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Claude-33"><a href="#Claude-33"><span class="linenos"> 33</span></a>
</span><span id="Claude-34"><a href="#Claude-34"><span class="linenos"> 34</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Claude-35"><a href="#Claude-35"><span class="linenos"> 35</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Claude-36"><a href="#Claude-36"><span class="linenos"> 36</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Claude-37"><a href="#Claude-37"><span class="linenos"> 37</span></a>            <span class="p">)</span>
</span><span id="Claude-38"><a href="#Claude-38"><span class="linenos"> 38</span></a>
</span><span id="Claude-39"><a href="#Claude-39"><span class="linenos"> 39</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Claude-40"><a href="#Claude-40"><span class="linenos"> 40</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Claude-41"><a href="#Claude-41"><span class="linenos"> 41</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Claude-42"><a href="#Claude-42"><span class="linenos"> 42</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Claude-43"><a href="#Claude-43"><span class="linenos"> 43</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Claude-44"><a href="#Claude-44"><span class="linenos"> 44</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Claude-45"><a href="#Claude-45"><span class="linenos"> 45</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Claude-46"><a href="#Claude-46"><span class="linenos"> 46</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Claude-47"><a href="#Claude-47"><span class="linenos"> 47</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Claude-48"><a href="#Claude-48"><span class="linenos"> 48</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude-49"><a href="#Claude-49"><span class="linenos"> 49</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Claude-50"><a href="#Claude-50"><span class="linenos"> 50</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stop_sequences</span><span class="p">)</span>
</span><span id="Claude-51"><a href="#Claude-51"><span class="linenos"> 51</span></a>        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
</span><span id="Claude-52"><a href="#Claude-52"><span class="linenos"> 52</span></a>            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span><span class="p">)</span>
</span><span id="Claude-53"><a href="#Claude-53"><span class="linenos"> 53</span></a>
</span><span id="Claude-54"><a href="#Claude-54"><span class="linenos"> 54</span></a>        <span class="n">claude_prompt</span> <span class="o">=</span> <span class="n">prompt</span>
</span><span id="Claude-55"><a href="#Claude-55"><span class="linenos"> 55</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">claude_prompt</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span><span class="p">):</span>
</span><span id="Claude-56"><a href="#Claude-56"><span class="linenos"> 56</span></a>            <span class="n">claude_prompt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="o">+</span> <span class="n">claude_prompt</span>
</span><span id="Claude-57"><a href="#Claude-57"><span class="linenos"> 57</span></a>
</span><span id="Claude-58"><a href="#Claude-58"><span class="linenos"> 58</span></a>        <span class="n">a_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Claude-59"><a href="#Claude-59"><span class="linenos"> 59</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Claude-60"><a href="#Claude-60"><span class="linenos"> 60</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Claude-61"><a href="#Claude-61"><span class="linenos"> 61</span></a>                <span class="n">a_i</span> <span class="o">=</span> <span class="n">claude_prompt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span><span class="p">,</span> <span class="n">a_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Claude-62"><a href="#Claude-62"><span class="linenos"> 62</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="Claude-63"><a href="#Claude-63"><span class="linenos"> 63</span></a>                <span class="k">break</span>
</span><span id="Claude-64"><a href="#Claude-64"><span class="linenos"> 64</span></a>
</span><span id="Claude-65"><a href="#Claude-65"><span class="linenos"> 65</span></a>        <span class="k">if</span> <span class="n">a_i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="n">a_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">&quot;Human:&quot;</span> <span class="ow">in</span> <span class="n">claude_prompt</span><span class="p">[</span><span class="n">a_i</span><span class="p">:]):</span>
</span><span id="Claude-66"><a href="#Claude-66"><span class="linenos"> 66</span></a>            <span class="n">claude_prompt</span> <span class="o">=</span> <span class="n">claude_prompt</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span>
</span><span id="Claude-67"><a href="#Claude-67"><span class="linenos"> 67</span></a>
</span><span id="Claude-68"><a href="#Claude-68"><span class="linenos"> 68</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Claude-69"><a href="#Claude-69"><span class="linenos"> 69</span></a>            <span class="p">{</span>
</span><span id="Claude-70"><a href="#Claude-70"><span class="linenos"> 70</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">claude_prompt</span><span class="p">,</span>
</span><span id="Claude-71"><a href="#Claude-71"><span class="linenos"> 71</span></a>                <span class="s2">&quot;max_tokens_to_sample&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Claude-72"><a href="#Claude-72"><span class="linenos"> 72</span></a>                <span class="s2">&quot;stop_sequences&quot;</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span>
</span><span id="Claude-73"><a href="#Claude-73"><span class="linenos"> 73</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Claude-74"><a href="#Claude-74"><span class="linenos"> 74</span></a>                <span class="s2">&quot;top_p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Claude-75"><a href="#Claude-75"><span class="linenos"> 75</span></a>                <span class="s2">&quot;anthropic_version&quot;</span><span class="p">:</span> <span class="s2">&quot;bedrock-2023-05-31&quot;</span><span class="p">,</span>
</span><span id="Claude-76"><a href="#Claude-76"><span class="linenos"> 76</span></a>            <span class="p">}</span>
</span><span id="Claude-77"><a href="#Claude-77"><span class="linenos"> 77</span></a>        <span class="p">)</span>
</span><span id="Claude-78"><a href="#Claude-78"><span class="linenos"> 78</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="Claude-79"><a href="#Claude-79"><span class="linenos"> 79</span></a>
</span><span id="Claude-80"><a href="#Claude-80"><span class="linenos"> 80</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude-81"><a href="#Claude-81"><span class="linenos"> 81</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Claude-82"><a href="#Claude-82"><span class="linenos"> 82</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="Claude-83"><a href="#Claude-83"><span class="linenos"> 83</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Claude-84"><a href="#Claude-84"><span class="linenos"> 84</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human: </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Claude-85"><a href="#Claude-85"><span class="linenos"> 85</span></a>            <span class="p">)</span>
</span><span id="Claude-86"><a href="#Claude-86"><span class="linenos"> 86</span></a>            <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
</span><span id="Claude-87"><a href="#Claude-87"><span class="linenos"> 87</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Claude-88"><a href="#Claude-88"><span class="linenos"> 88</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Claude-89"><a href="#Claude-89"><span class="linenos"> 89</span></a>
</span><span id="Claude-90"><a href="#Claude-90"><span class="linenos"> 90</span></a>        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">:</span>
</span><span id="Claude-91"><a href="#Claude-91"><span class="linenos"> 91</span></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span>
</span><span id="Claude-92"><a href="#Claude-92"><span class="linenos"> 92</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">role</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Claude-93"><a href="#Claude-93"><span class="linenos"> 93</span></a>
</span><span id="Claude-94"><a href="#Claude-94"><span class="linenos"> 94</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Claude-95"><a href="#Claude-95"><span class="linenos"> 95</span></a>
</span><span id="Claude-96"><a href="#Claude-96"><span class="linenos"> 96</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Claude-97"><a href="#Claude-97"><span class="linenos"> 97</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">body</span><span class="p">)]</span>
</span><span id="Claude-98"><a href="#Claude-98"><span class="linenos"> 98</span></a>
</span><span id="Claude-99"><a href="#Claude-99"><span class="linenos"> 99</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude-100"><a href="#Claude-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;completion&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Anthropic offers the Claude family of large language models purpose built for conversations, summarization,
Q&amp;A, workflow automation, coding and more. Early customers report that Claude is much less likely to produce harmful
outputs, easier to converse with, and more steerable - so you can get your desired output with less effort.
Claude can also take direction on personality, tone, and behavior.</p>

<p><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-claude">Anthropic Claude</a>
models support the following <code><a href="#Claude.extra_args">extra_args</a></code></p>

<pre><code>{
    "top_k": int
}
</code></pre>
</div>


                            <div id="Claude.__init__" class="classattr">
                                        <input id="Claude.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Claude</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Claude.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.__init__-2"><a href="#Claude.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="Claude.__init__-3"><a href="#Claude.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="Claude.__init__-4"><a href="#Claude.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="Claude.__init__-5"><a href="#Claude.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="Claude.__init__-6"><a href="#Claude.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Claude.__init__-7"><a href="#Claude.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="Claude.__init__-8"><a href="#Claude.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Claude.__init__-9"><a href="#Claude.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="Claude.__init__-10"><a href="#Claude.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Claude.__init__-11"><a href="#Claude.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="Claude.__init__-12"><a href="#Claude.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Claude.__init__-13"><a href="#Claude.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="Claude.__init__-14"><a href="#Claude.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Claude.__init__-15"><a href="#Claude.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="Claude.__init__-16"><a href="#Claude.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Claude.__init__-17"><a href="#Claude.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="Claude.__init__-18"><a href="#Claude.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Claude.__init__-19"><a href="#Claude.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="Claude.__init__-20"><a href="#Claude.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Claude.__init__-21"><a href="#Claude.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Claude.__init__-22"><a href="#Claude.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Claude.__init__-23"><a href="#Claude.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="Claude.__init__-24"><a href="#Claude.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Claude.__init__-25"><a href="#Claude.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Claude.__init__-26"><a href="#Claude.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class Claude.</p>
</div>


                            </div>
                            <div id="Claude.family" class="classattr">
                                        <input id="Claude.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Claude.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.family-24"><a href="#Claude.family-24"><span class="linenos">24</span></a>    <span class="nd">@classmethod</span>
</span><span id="Claude.family-25"><a href="#Claude.family-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude.family-26"><a href="#Claude.family-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="s2">&quot;anthropic.claude&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Claude.validate_extra_args" class="classattr">
                                        <input id="Claude.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="Claude.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.validate_extra_args-28"><a href="#Claude.validate_extra_args-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Claude.validate_extra_args-29"><a href="#Claude.validate_extra_args-29"><span class="linenos">29</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Claude.validate_extra_args-30"><a href="#Claude.validate_extra_args-30"><span class="linenos">30</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Claude.validate_extra_args-31"><a href="#Claude.validate_extra_args-31"><span class="linenos">31</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;top_k&quot;</span><span class="p">]:</span>
</span><span id="Claude.validate_extra_args-32"><a href="#Claude.validate_extra_args-32"><span class="linenos">32</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Claude.validate_extra_args-33"><a href="#Claude.validate_extra_args-33"><span class="linenos">33</span></a>
</span><span id="Claude.validate_extra_args-34"><a href="#Claude.validate_extra_args-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Claude.validate_extra_args-35"><a href="#Claude.validate_extra_args-35"><span class="linenos">35</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Claude.validate_extra_args-36"><a href="#Claude.validate_extra_args-36"><span class="linenos">36</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Claude.validate_extra_args-37"><a href="#Claude.validate_extra_args-37"><span class="linenos">37</span></a>            <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="Claude.get_body" class="classattr">
                                        <input id="Claude.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Claude.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.get_body-39"><a href="#Claude.get_body-39"><span class="linenos">39</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Claude.get_body-40"><a href="#Claude.get_body-40"><span class="linenos">40</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Claude.get_body-41"><a href="#Claude.get_body-41"><span class="linenos">41</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Claude.get_body-42"><a href="#Claude.get_body-42"><span class="linenos">42</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Claude.get_body-43"><a href="#Claude.get_body-43"><span class="linenos">43</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Claude.get_body-44"><a href="#Claude.get_body-44"><span class="linenos">44</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Claude.get_body-45"><a href="#Claude.get_body-45"><span class="linenos">45</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Claude.get_body-46"><a href="#Claude.get_body-46"><span class="linenos">46</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Claude.get_body-47"><a href="#Claude.get_body-47"><span class="linenos">47</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Claude.get_body-48"><a href="#Claude.get_body-48"><span class="linenos">48</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude.get_body-49"><a href="#Claude.get_body-49"><span class="linenos">49</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Claude.get_body-50"><a href="#Claude.get_body-50"><span class="linenos">50</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">stop_sequences</span><span class="p">)</span>
</span><span id="Claude.get_body-51"><a href="#Claude.get_body-51"><span class="linenos">51</span></a>        <span class="k">if</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
</span><span id="Claude.get_body-52"><a href="#Claude.get_body-52"><span class="linenos">52</span></a>            <span class="n">s</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span><span class="p">)</span>
</span><span id="Claude.get_body-53"><a href="#Claude.get_body-53"><span class="linenos">53</span></a>
</span><span id="Claude.get_body-54"><a href="#Claude.get_body-54"><span class="linenos">54</span></a>        <span class="n">claude_prompt</span> <span class="o">=</span> <span class="n">prompt</span>
</span><span id="Claude.get_body-55"><a href="#Claude.get_body-55"><span class="linenos">55</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">claude_prompt</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span><span class="p">):</span>
</span><span id="Claude.get_body-56"><a href="#Claude.get_body-56"><span class="linenos">56</span></a>            <span class="n">claude_prompt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="o">+</span> <span class="n">claude_prompt</span>
</span><span id="Claude.get_body-57"><a href="#Claude.get_body-57"><span class="linenos">57</span></a>
</span><span id="Claude.get_body-58"><a href="#Claude.get_body-58"><span class="linenos">58</span></a>        <span class="n">a_i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span id="Claude.get_body-59"><a href="#Claude.get_body-59"><span class="linenos">59</span></a>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="Claude.get_body-60"><a href="#Claude.get_body-60"><span class="linenos">60</span></a>            <span class="k">try</span><span class="p">:</span>
</span><span id="Claude.get_body-61"><a href="#Claude.get_body-61"><span class="linenos">61</span></a>                <span class="n">a_i</span> <span class="o">=</span> <span class="n">claude_prompt</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span><span class="p">,</span> <span class="n">a_i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="Claude.get_body-62"><a href="#Claude.get_body-62"><span class="linenos">62</span></a>            <span class="k">except</span><span class="p">:</span>
</span><span id="Claude.get_body-63"><a href="#Claude.get_body-63"><span class="linenos">63</span></a>                <span class="k">break</span>
</span><span id="Claude.get_body-64"><a href="#Claude.get_body-64"><span class="linenos">64</span></a>
</span><span id="Claude.get_body-65"><a href="#Claude.get_body-65"><span class="linenos">65</span></a>        <span class="k">if</span> <span class="n">a_i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="p">(</span><span class="n">a_i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="s2">&quot;Human:&quot;</span> <span class="ow">in</span> <span class="n">claude_prompt</span><span class="p">[</span><span class="n">a_i</span><span class="p">:]):</span>
</span><span id="Claude.get_body-66"><a href="#Claude.get_body-66"><span class="linenos">66</span></a>            <span class="n">claude_prompt</span> <span class="o">=</span> <span class="n">claude_prompt</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span>
</span><span id="Claude.get_body-67"><a href="#Claude.get_body-67"><span class="linenos">67</span></a>
</span><span id="Claude.get_body-68"><a href="#Claude.get_body-68"><span class="linenos">68</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Claude.get_body-69"><a href="#Claude.get_body-69"><span class="linenos">69</span></a>            <span class="p">{</span>
</span><span id="Claude.get_body-70"><a href="#Claude.get_body-70"><span class="linenos">70</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">claude_prompt</span><span class="p">,</span>
</span><span id="Claude.get_body-71"><a href="#Claude.get_body-71"><span class="linenos">71</span></a>                <span class="s2">&quot;max_tokens_to_sample&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Claude.get_body-72"><a href="#Claude.get_body-72"><span class="linenos">72</span></a>                <span class="s2">&quot;stop_sequences&quot;</span><span class="p">:</span> <span class="n">s</span><span class="p">,</span>
</span><span id="Claude.get_body-73"><a href="#Claude.get_body-73"><span class="linenos">73</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Claude.get_body-74"><a href="#Claude.get_body-74"><span class="linenos">74</span></a>                <span class="s2">&quot;top_p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Claude.get_body-75"><a href="#Claude.get_body-75"><span class="linenos">75</span></a>                <span class="s2">&quot;anthropic_version&quot;</span><span class="p">:</span> <span class="s2">&quot;bedrock-2023-05-31&quot;</span><span class="p">,</span>
</span><span id="Claude.get_body-76"><a href="#Claude.get_body-76"><span class="linenos">76</span></a>            <span class="p">}</span>
</span><span id="Claude.get_body-77"><a href="#Claude.get_body-77"><span class="linenos">77</span></a>        <span class="p">)</span>
</span><span id="Claude.get_body-78"><a href="#Claude.get_body-78"><span class="linenos">78</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="Claude.get_chat_prompt" class="classattr">
                                        <input id="Claude.get_chat_prompt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_chat_prompt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Human</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Assistant</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">System</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Claude.get_chat_prompt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.get_chat_prompt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.get_chat_prompt-80"><a href="#Claude.get_chat_prompt-80"><span class="linenos">80</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude.get_chat_prompt-81"><a href="#Claude.get_chat_prompt-81"><span class="linenos">81</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Claude.get_chat_prompt-82"><a href="#Claude.get_chat_prompt-82"><span class="linenos">82</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="Claude.get_chat_prompt-83"><a href="#Claude.get_chat_prompt-83"><span class="linenos">83</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
</span><span id="Claude.get_chat_prompt-84"><a href="#Claude.get_chat_prompt-84"><span class="linenos">84</span></a>                <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human: </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="Claude.get_chat_prompt-85"><a href="#Claude.get_chat_prompt-85"><span class="linenos">85</span></a>            <span class="p">)</span>
</span><span id="Claude.get_chat_prompt-86"><a href="#Claude.get_chat_prompt-86"><span class="linenos">86</span></a>            <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">2</span><span class="p">:]</span>
</span><span id="Claude.get_chat_prompt-87"><a href="#Claude.get_chat_prompt-87"><span class="linenos">87</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Claude.get_chat_prompt-88"><a href="#Claude.get_chat_prompt-88"><span class="linenos">88</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Claude.get_chat_prompt-89"><a href="#Claude.get_chat_prompt-89"><span class="linenos">89</span></a>
</span><span id="Claude.get_chat_prompt-90"><a href="#Claude.get_chat_prompt-90"><span class="linenos">90</span></a>        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">:</span>
</span><span id="Claude.get_chat_prompt-91"><a href="#Claude.get_chat_prompt-91"><span class="linenos">91</span></a>            <span class="n">role</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Human:&quot;</span> <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span> <span class="k">else</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Assistant:&quot;</span>
</span><span id="Claude.get_chat_prompt-92"><a href="#Claude.get_chat_prompt-92"><span class="linenos">92</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">role</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">m</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Claude.get_chat_prompt-93"><a href="#Claude.get_chat_prompt-93"><span class="linenos">93</span></a>
</span><span id="Claude.get_chat_prompt-94"><a href="#Claude.get_chat_prompt-94"><span class="linenos">94</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Claude.process_response_body" class="classattr">
                                        <input id="Claude.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Claude.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.process_response_body-96"><a href="#Claude.process_response_body-96"><span class="linenos">96</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Claude.process_response_body-97"><a href="#Claude.process_response_body-97"><span class="linenos">97</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">body</span><span class="p">)]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div id="Claude.get_text" class="classattr">
                                        <input id="Claude.get_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Claude.get_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Claude.get_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Claude.get_text-99"><a href="#Claude.get_text-99"><span class="linenos"> 99</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Claude.get_text-100"><a href="#Claude.get_text-100"><span class="linenos">100</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;completion&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the concrete class to extract the text from the answer</p>

<p>Args:
    body (Dict[str, Any]): the body as a dictionary</p>

<p>Returns:
    str: the generated text</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#BedrockFoundationModel">BedrockFoundationModel</a></dt>
                                <dd id="Claude.top_p" class="variable"><a href="#BedrockFoundationModel.top_p">top_p</a></dd>
                <dd id="Claude.temperature" class="variable"><a href="#BedrockFoundationModel.temperature">temperature</a></dd>
                <dd id="Claude.max_token_count" class="variable"><a href="#BedrockFoundationModel.max_token_count">max_token_count</a></dd>
                <dd id="Claude.stop_sequences" class="variable"><a href="#BedrockFoundationModel.stop_sequences">stop_sequences</a></dd>
                <dd id="Claude.extra_args" class="variable"><a href="#BedrockFoundationModel.extra_args">extra_args</a></dd>
                <dd id="Claude.session" class="variable"><a href="#BedrockFoundationModel.session">session</a></dd>
                <dd id="Claude.from_id" class="function"><a href="#BedrockFoundationModel.from_id">from_id</a></dd>
                <dd id="Claude.list_model_ids" class="function"><a href="#BedrockFoundationModel.list_model_ids">list_model_ids</a></dd>
                <dd id="Claude.generate" class="function"><a href="#BedrockFoundationModel.generate">generate</a></dd>
                <dd id="Claude.chat" class="function"><a href="#BedrockFoundationModel.chat">chat</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Jurassic">
                            <input id="Jurassic-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define</div>

    <span class="def">class</span>
    <span class="name">Jurassic</span><wbr>(<span class="base"><a href="#BedrockFoundationModel">bedrock_fm.BedrockFoundationModel</a></span>):

                <label class="view-source-button" for="Jurassic-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic-9"><a href="#Jurassic-9"><span class="linenos"> 9</span></a><span class="nd">@define</span>
</span><span id="Jurassic-10"><a href="#Jurassic-10"><span class="linenos">10</span></a><span class="k">class</span> <span class="nc">Jurassic</span><span class="p">(</span><span class="n">BedrockFoundationModel</span><span class="p">):</span>
</span><span id="Jurassic-11"><a href="#Jurassic-11"><span class="linenos">11</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;AI21 offers Jurassic-2, state-of-the-art LLMs that enable developers and businesses to build their</span>
</span><span id="Jurassic-12"><a href="#Jurassic-12"><span class="linenos">12</span></a><span class="sd">    own generative AI-driven applications and services. Jurassic-2 models power language generation and comprehension features </span>
</span><span id="Jurassic-13"><a href="#Jurassic-13"><span class="linenos">13</span></a><span class="sd">    in thousands of live applications, including long and short-form text generation, contextual question answering, creative writing, </span>
</span><span id="Jurassic-14"><a href="#Jurassic-14"><span class="linenos">14</span></a><span class="sd">    summarization, and classification. The models are designed to follow natural language instructions and context without </span>
</span><span id="Jurassic-15"><a href="#Jurassic-15"><span class="linenos">15</span></a><span class="sd">    requiring examples (zero-shot) and are trained on a massive corpus of web text with recent data updated to mid-2022. </span>
</span><span id="Jurassic-16"><a href="#Jurassic-16"><span class="linenos">16</span></a><span class="sd">    In addition to English, Jurassic-2 supports six other languages: Spanish, French, German, Italian, Portuguese, and Dutch.</span>
</span><span id="Jurassic-17"><a href="#Jurassic-17"><span class="linenos">17</span></a>
</span><span id="Jurassic-18"><a href="#Jurassic-18"><span class="linenos">18</span></a><span class="sd">    [Jurassic-2](https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-jurassic2) models support the following `extra_args`: </span>
</span><span id="Jurassic-19"><a href="#Jurassic-19"><span class="linenos">19</span></a>
</span><span id="Jurassic-20"><a href="#Jurassic-20"><span class="linenos">20</span></a><span class="sd"> </span>
</span><span id="Jurassic-21"><a href="#Jurassic-21"><span class="linenos">21</span></a><span class="sd">        {</span>
</span><span id="Jurassic-22"><a href="#Jurassic-22"><span class="linenos">22</span></a><span class="sd">            &quot;countPenalty&quot;: {</span>
</span><span id="Jurassic-23"><a href="#Jurassic-23"><span class="linenos">23</span></a><span class="sd">                &quot;scale&quot;: int [0,5],</span>
</span><span id="Jurassic-24"><a href="#Jurassic-24"><span class="linenos">24</span></a><span class="sd">                &quot;applyToWhitespaces&quot;: boolean,</span>
</span><span id="Jurassic-25"><a href="#Jurassic-25"><span class="linenos">25</span></a><span class="sd">                &quot;applyToPunctuations&quot;: boolean,</span>
</span><span id="Jurassic-26"><a href="#Jurassic-26"><span class="linenos">26</span></a><span class="sd">                &quot;applyToNumbers&quot;: boolean,</span>
</span><span id="Jurassic-27"><a href="#Jurassic-27"><span class="linenos">27</span></a><span class="sd">                &quot;applyToStopwords&quot;: boolean,</span>
</span><span id="Jurassic-28"><a href="#Jurassic-28"><span class="linenos">28</span></a><span class="sd">                &quot;applyToEmojis&quot;: boolean</span>
</span><span id="Jurassic-29"><a href="#Jurassic-29"><span class="linenos">29</span></a><span class="sd">            },</span>
</span><span id="Jurassic-30"><a href="#Jurassic-30"><span class="linenos">30</span></a><span class="sd">            &quot;presencePenalty&quot;: {</span>
</span><span id="Jurassic-31"><a href="#Jurassic-31"><span class="linenos">31</span></a><span class="sd">                &quot;scale&quot;: float [0,1],</span>
</span><span id="Jurassic-32"><a href="#Jurassic-32"><span class="linenos">32</span></a><span class="sd">                &quot;applyToWhitespaces&quot;: boolean,</span>
</span><span id="Jurassic-33"><a href="#Jurassic-33"><span class="linenos">33</span></a><span class="sd">                &quot;applyToPunctuations&quot;: boolean,</span>
</span><span id="Jurassic-34"><a href="#Jurassic-34"><span class="linenos">34</span></a><span class="sd">                &quot;applyToNumbers&quot;: boolean,</span>
</span><span id="Jurassic-35"><a href="#Jurassic-35"><span class="linenos">35</span></a><span class="sd">                &quot;applyToStopwords&quot;: boolean,</span>
</span><span id="Jurassic-36"><a href="#Jurassic-36"><span class="linenos">36</span></a><span class="sd">                &quot;applyToEmojis&quot;: boolean</span>
</span><span id="Jurassic-37"><a href="#Jurassic-37"><span class="linenos">37</span></a>
</span><span id="Jurassic-38"><a href="#Jurassic-38"><span class="linenos">38</span></a><span class="sd">            },</span>
</span><span id="Jurassic-39"><a href="#Jurassic-39"><span class="linenos">39</span></a><span class="sd">            &quot;frequencyPenalty&quot;: {</span>
</span><span id="Jurassic-40"><a href="#Jurassic-40"><span class="linenos">40</span></a><span class="sd">                &quot;scale&quot;: int [0,500],</span>
</span><span id="Jurassic-41"><a href="#Jurassic-41"><span class="linenos">41</span></a><span class="sd">                &quot;applyToWhitespaces&quot;: boolean,</span>
</span><span id="Jurassic-42"><a href="#Jurassic-42"><span class="linenos">42</span></a><span class="sd">                &quot;applyToPunctuations&quot;: boolean,</span>
</span><span id="Jurassic-43"><a href="#Jurassic-43"><span class="linenos">43</span></a><span class="sd">                &quot;applyToNumbers&quot;: boolean,</span>
</span><span id="Jurassic-44"><a href="#Jurassic-44"><span class="linenos">44</span></a><span class="sd">                &quot;applyToStopwords&quot;: boolean,</span>
</span><span id="Jurassic-45"><a href="#Jurassic-45"><span class="linenos">45</span></a><span class="sd">                &quot;applyToEmojis&quot;: boolean</span>
</span><span id="Jurassic-46"><a href="#Jurassic-46"><span class="linenos">46</span></a>
</span><span id="Jurassic-47"><a href="#Jurassic-47"><span class="linenos">47</span></a><span class="sd">            }</span>
</span><span id="Jurassic-48"><a href="#Jurassic-48"><span class="linenos">48</span></a><span class="sd">        }</span>
</span><span id="Jurassic-49"><a href="#Jurassic-49"><span class="linenos">49</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Jurassic-50"><a href="#Jurassic-50"><span class="linenos">50</span></a>    
</span><span id="Jurassic-51"><a href="#Jurassic-51"><span class="linenos">51</span></a>    <span class="nd">@classmethod</span>
</span><span id="Jurassic-52"><a href="#Jurassic-52"><span class="linenos">52</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic-53"><a href="#Jurassic-53"><span class="linenos">53</span></a>        <span class="k">return</span> <span class="s2">&quot;ai21.j2&quot;</span>
</span><span id="Jurassic-54"><a href="#Jurassic-54"><span class="linenos">54</span></a>
</span><span id="Jurassic-55"><a href="#Jurassic-55"><span class="linenos">55</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
</span><span id="Jurassic-56"><a href="#Jurassic-56"><span class="linenos">56</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Jurassic-57"><a href="#Jurassic-57"><span class="linenos">57</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Jurassic-58"><a href="#Jurassic-58"><span class="linenos">58</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;countPenalty&quot;</span><span class="p">,</span> <span class="s2">&quot;presencePenalty&quot;</span><span class="p">,</span> <span class="s2">&quot;frequencePenalty&quot;</span><span class="p">]:</span>
</span><span id="Jurassic-59"><a href="#Jurassic-59"><span class="linenos">59</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Jurassic-60"><a href="#Jurassic-60"><span class="linenos">60</span></a>
</span><span id="Jurassic-61"><a href="#Jurassic-61"><span class="linenos">61</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Jurassic-62"><a href="#Jurassic-62"><span class="linenos">62</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Jurassic-63"><a href="#Jurassic-63"><span class="linenos">63</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Jurassic-64"><a href="#Jurassic-64"><span class="linenos">64</span></a>            <span class="p">)</span>
</span><span id="Jurassic-65"><a href="#Jurassic-65"><span class="linenos">65</span></a>
</span><span id="Jurassic-66"><a href="#Jurassic-66"><span class="linenos">66</span></a>        <span class="c1"># TODO: validate the content of the Penalty fields</span>
</span><span id="Jurassic-67"><a href="#Jurassic-67"><span class="linenos">67</span></a>
</span><span id="Jurassic-68"><a href="#Jurassic-68"><span class="linenos">68</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Jurassic-69"><a href="#Jurassic-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Jurassic-70"><a href="#Jurassic-70"><span class="linenos">70</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Jurassic-71"><a href="#Jurassic-71"><span class="linenos">71</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Jurassic-72"><a href="#Jurassic-72"><span class="linenos">72</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Jurassic-73"><a href="#Jurassic-73"><span class="linenos">73</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Jurassic-74"><a href="#Jurassic-74"><span class="linenos">74</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Jurassic-75"><a href="#Jurassic-75"><span class="linenos">75</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Jurassic-76"><a href="#Jurassic-76"><span class="linenos">76</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Jurassic-77"><a href="#Jurassic-77"><span class="linenos">77</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic-78"><a href="#Jurassic-78"><span class="linenos">78</span></a>
</span><span id="Jurassic-79"><a href="#Jurassic-79"><span class="linenos">79</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Jurassic-80"><a href="#Jurassic-80"><span class="linenos">80</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Jurassic-81"><a href="#Jurassic-81"><span class="linenos">81</span></a>            <span class="p">{</span>
</span><span id="Jurassic-82"><a href="#Jurassic-82"><span class="linenos">82</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Jurassic-83"><a href="#Jurassic-83"><span class="linenos">83</span></a>                <span class="s2">&quot;maxTokens&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Jurassic-84"><a href="#Jurassic-84"><span class="linenos">84</span></a>                <span class="s2">&quot;stopSequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Jurassic-85"><a href="#Jurassic-85"><span class="linenos">85</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Jurassic-86"><a href="#Jurassic-86"><span class="linenos">86</span></a>                <span class="s2">&quot;topP&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Jurassic-87"><a href="#Jurassic-87"><span class="linenos">87</span></a>            <span class="p">}</span>
</span><span id="Jurassic-88"><a href="#Jurassic-88"><span class="linenos">88</span></a>        <span class="p">)</span>
</span><span id="Jurassic-89"><a href="#Jurassic-89"><span class="linenos">89</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="Jurassic-90"><a href="#Jurassic-90"><span class="linenos">90</span></a>
</span><span id="Jurassic-91"><a href="#Jurassic-91"><span class="linenos">91</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Jurassic-92"><a href="#Jurassic-92"><span class="linenos">92</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;completions&quot;</span><span class="p">]]</span>
</span><span id="Jurassic-93"><a href="#Jurassic-93"><span class="linenos">93</span></a>
</span><span id="Jurassic-94"><a href="#Jurassic-94"><span class="linenos">94</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic-95"><a href="#Jurassic-95"><span class="linenos">95</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>AI21 offers Jurassic-2, state-of-the-art LLMs that enable developers and businesses to build their
own generative AI-driven applications and services. Jurassic-2 models power language generation and comprehension features 
in thousands of live applications, including long and short-form text generation, contextual question answering, creative writing, 
summarization, and classification. The models are designed to follow natural language instructions and context without 
requiring examples (zero-shot) and are trained on a massive corpus of web text with recent data updated to mid-2022. 
In addition to English, Jurassic-2 supports six other languages: Spanish, French, German, Italian, Portuguese, and Dutch.</p>

<p><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-jurassic2">Jurassic-2</a> models support the following <code><a href="#Jurassic.extra_args">extra_args</a></code>: </p>

<pre><code>{
    "countPenalty": {
        "scale": int [0,5],
        "applyToWhitespaces": boolean,
        "applyToPunctuations": boolean,
        "applyToNumbers": boolean,
        "applyToStopwords": boolean,
        "applyToEmojis": boolean
    },
    "presencePenalty": {
        "scale": float [0,1],
        "applyToWhitespaces": boolean,
        "applyToPunctuations": boolean,
        "applyToNumbers": boolean,
        "applyToStopwords": boolean,
        "applyToEmojis": boolean

    },
    "frequencyPenalty": {
        "scale": int [0,500],
        "applyToWhitespaces": boolean,
        "applyToPunctuations": boolean,
        "applyToNumbers": boolean,
        "applyToStopwords": boolean,
        "applyToEmojis": boolean

    }
}
</code></pre>
</div>


                            <div id="Jurassic.__init__" class="classattr">
                                        <input id="Jurassic.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Jurassic</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Jurassic.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.__init__-2"><a href="#Jurassic.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="Jurassic.__init__-3"><a href="#Jurassic.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="Jurassic.__init__-4"><a href="#Jurassic.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="Jurassic.__init__-5"><a href="#Jurassic.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="Jurassic.__init__-6"><a href="#Jurassic.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Jurassic.__init__-7"><a href="#Jurassic.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="Jurassic.__init__-8"><a href="#Jurassic.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Jurassic.__init__-9"><a href="#Jurassic.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="Jurassic.__init__-10"><a href="#Jurassic.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Jurassic.__init__-11"><a href="#Jurassic.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="Jurassic.__init__-12"><a href="#Jurassic.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Jurassic.__init__-13"><a href="#Jurassic.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="Jurassic.__init__-14"><a href="#Jurassic.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Jurassic.__init__-15"><a href="#Jurassic.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="Jurassic.__init__-16"><a href="#Jurassic.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Jurassic.__init__-17"><a href="#Jurassic.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="Jurassic.__init__-18"><a href="#Jurassic.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Jurassic.__init__-19"><a href="#Jurassic.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="Jurassic.__init__-20"><a href="#Jurassic.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Jurassic.__init__-21"><a href="#Jurassic.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Jurassic.__init__-22"><a href="#Jurassic.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Jurassic.__init__-23"><a href="#Jurassic.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="Jurassic.__init__-24"><a href="#Jurassic.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Jurassic.__init__-25"><a href="#Jurassic.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Jurassic.__init__-26"><a href="#Jurassic.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class Jurassic.</p>
</div>


                            </div>
                            <div id="Jurassic.family" class="classattr">
                                        <input id="Jurassic.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Jurassic.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.family-51"><a href="#Jurassic.family-51"><span class="linenos">51</span></a>    <span class="nd">@classmethod</span>
</span><span id="Jurassic.family-52"><a href="#Jurassic.family-52"><span class="linenos">52</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic.family-53"><a href="#Jurassic.family-53"><span class="linenos">53</span></a>        <span class="k">return</span> <span class="s2">&quot;ai21.j2&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Jurassic.validate_extra_args" class="classattr">
                                        <input id="Jurassic.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Jurassic.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.validate_extra_args-55"><a href="#Jurassic.validate_extra_args-55"><span class="linenos">55</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
</span><span id="Jurassic.validate_extra_args-56"><a href="#Jurassic.validate_extra_args-56"><span class="linenos">56</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Jurassic.validate_extra_args-57"><a href="#Jurassic.validate_extra_args-57"><span class="linenos">57</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Jurassic.validate_extra_args-58"><a href="#Jurassic.validate_extra_args-58"><span class="linenos">58</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;countPenalty&quot;</span><span class="p">,</span> <span class="s2">&quot;presencePenalty&quot;</span><span class="p">,</span> <span class="s2">&quot;frequencePenalty&quot;</span><span class="p">]:</span>
</span><span id="Jurassic.validate_extra_args-59"><a href="#Jurassic.validate_extra_args-59"><span class="linenos">59</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Jurassic.validate_extra_args-60"><a href="#Jurassic.validate_extra_args-60"><span class="linenos">60</span></a>
</span><span id="Jurassic.validate_extra_args-61"><a href="#Jurassic.validate_extra_args-61"><span class="linenos">61</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Jurassic.validate_extra_args-62"><a href="#Jurassic.validate_extra_args-62"><span class="linenos">62</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Jurassic.validate_extra_args-63"><a href="#Jurassic.validate_extra_args-63"><span class="linenos">63</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Jurassic.validate_extra_args-64"><a href="#Jurassic.validate_extra_args-64"><span class="linenos">64</span></a>            <span class="p">)</span>
</span><span id="Jurassic.validate_extra_args-65"><a href="#Jurassic.validate_extra_args-65"><span class="linenos">65</span></a>
</span><span id="Jurassic.validate_extra_args-66"><a href="#Jurassic.validate_extra_args-66"><span class="linenos">66</span></a>        <span class="c1"># TODO: validate the content of the Penalty fields</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="Jurassic.get_body" class="classattr">
                                        <input id="Jurassic.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Jurassic.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.get_body-68"><a href="#Jurassic.get_body-68"><span class="linenos">68</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Jurassic.get_body-69"><a href="#Jurassic.get_body-69"><span class="linenos">69</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Jurassic.get_body-70"><a href="#Jurassic.get_body-70"><span class="linenos">70</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Jurassic.get_body-71"><a href="#Jurassic.get_body-71"><span class="linenos">71</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Jurassic.get_body-72"><a href="#Jurassic.get_body-72"><span class="linenos">72</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Jurassic.get_body-73"><a href="#Jurassic.get_body-73"><span class="linenos">73</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Jurassic.get_body-74"><a href="#Jurassic.get_body-74"><span class="linenos">74</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Jurassic.get_body-75"><a href="#Jurassic.get_body-75"><span class="linenos">75</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Jurassic.get_body-76"><a href="#Jurassic.get_body-76"><span class="linenos">76</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Jurassic.get_body-77"><a href="#Jurassic.get_body-77"><span class="linenos">77</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic.get_body-78"><a href="#Jurassic.get_body-78"><span class="linenos">78</span></a>
</span><span id="Jurassic.get_body-79"><a href="#Jurassic.get_body-79"><span class="linenos">79</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Jurassic.get_body-80"><a href="#Jurassic.get_body-80"><span class="linenos">80</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Jurassic.get_body-81"><a href="#Jurassic.get_body-81"><span class="linenos">81</span></a>            <span class="p">{</span>
</span><span id="Jurassic.get_body-82"><a href="#Jurassic.get_body-82"><span class="linenos">82</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Jurassic.get_body-83"><a href="#Jurassic.get_body-83"><span class="linenos">83</span></a>                <span class="s2">&quot;maxTokens&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Jurassic.get_body-84"><a href="#Jurassic.get_body-84"><span class="linenos">84</span></a>                <span class="s2">&quot;stopSequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Jurassic.get_body-85"><a href="#Jurassic.get_body-85"><span class="linenos">85</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Jurassic.get_body-86"><a href="#Jurassic.get_body-86"><span class="linenos">86</span></a>                <span class="s2">&quot;topP&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Jurassic.get_body-87"><a href="#Jurassic.get_body-87"><span class="linenos">87</span></a>            <span class="p">}</span>
</span><span id="Jurassic.get_body-88"><a href="#Jurassic.get_body-88"><span class="linenos">88</span></a>        <span class="p">)</span>
</span><span id="Jurassic.get_body-89"><a href="#Jurassic.get_body-89"><span class="linenos">89</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="Jurassic.process_response_body" class="classattr">
                                        <input id="Jurassic.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Jurassic.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.process_response_body-91"><a href="#Jurassic.process_response_body-91"><span class="linenos">91</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Jurassic.process_response_body-92"><a href="#Jurassic.process_response_body-92"><span class="linenos">92</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;completions&quot;</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div id="Jurassic.get_text" class="classattr">
                                        <input id="Jurassic.get_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Jurassic.get_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Jurassic.get_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Jurassic.get_text-94"><a href="#Jurassic.get_text-94"><span class="linenos">94</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Jurassic.get_text-95"><a href="#Jurassic.get_text-95"><span class="linenos">95</span></a>        <span class="k">return</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the concrete class to extract the text from the answer</p>

<p>Args:
    body (Dict[str, Any]): the body as a dictionary</p>

<p>Returns:
    str: the generated text</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#BedrockFoundationModel">BedrockFoundationModel</a></dt>
                                <dd id="Jurassic.top_p" class="variable"><a href="#BedrockFoundationModel.top_p">top_p</a></dd>
                <dd id="Jurassic.temperature" class="variable"><a href="#BedrockFoundationModel.temperature">temperature</a></dd>
                <dd id="Jurassic.max_token_count" class="variable"><a href="#BedrockFoundationModel.max_token_count">max_token_count</a></dd>
                <dd id="Jurassic.stop_sequences" class="variable"><a href="#BedrockFoundationModel.stop_sequences">stop_sequences</a></dd>
                <dd id="Jurassic.extra_args" class="variable"><a href="#BedrockFoundationModel.extra_args">extra_args</a></dd>
                <dd id="Jurassic.session" class="variable"><a href="#BedrockFoundationModel.session">session</a></dd>
                <dd id="Jurassic.from_id" class="function"><a href="#BedrockFoundationModel.from_id">from_id</a></dd>
                <dd id="Jurassic.list_model_ids" class="function"><a href="#BedrockFoundationModel.list_model_ids">list_model_ids</a></dd>
                <dd id="Jurassic.generate" class="function"><a href="#BedrockFoundationModel.generate">generate</a></dd>
                <dd id="Jurassic.chat" class="function"><a href="#BedrockFoundationModel.chat">chat</a></dd>
                <dd id="Jurassic.get_chat_prompt" class="function"><a href="#BedrockFoundationModel.get_chat_prompt">get_chat_prompt</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="StreamDetails">
                            <input id="StreamDetails-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define(kw_only=True)</div>

    <span class="def">class</span>
    <span class="name">StreamDetails</span>:

                <label class="view-source-button" for="StreamDetails-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StreamDetails"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StreamDetails-19"><a href="#StreamDetails-19"><span class="linenos">19</span></a><span class="nd">@define</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="StreamDetails-20"><a href="#StreamDetails-20"><span class="linenos">20</span></a><span class="k">class</span> <span class="nc">StreamDetails</span><span class="p">:</span>
</span><span id="StreamDetails-21"><a href="#StreamDetails-21"><span class="linenos">21</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Details for the stream responses&quot;&quot;&quot;</span>
</span><span id="StreamDetails-22"><a href="#StreamDetails-22"><span class="linenos">22</span></a>
</span><span id="StreamDetails-23"><a href="#StreamDetails-23"><span class="linenos">23</span></a>    <span class="n">stream</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="StreamDetails-24"><a href="#StreamDetails-24"><span class="linenos">24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;An iterable providing the tokens as they get generated&quot;&quot;&quot;</span>
</span><span id="StreamDetails-25"><a href="#StreamDetails-25"><span class="linenos">25</span></a>    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="StreamDetails-26"><a href="#StreamDetails-26"><span class="linenos">26</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The prompt that is being sent to the model&quot;&quot;&quot;</span>
</span><span id="StreamDetails-27"><a href="#StreamDetails-27"><span class="linenos">27</span></a>    <span class="n">body</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="StreamDetails-28"><a href="#StreamDetails-28"><span class="linenos">28</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The prompt that is being sent to the model&quot;&quot;&quot;</span>
</span><span id="StreamDetails-29"><a href="#StreamDetails-29"><span class="linenos">29</span></a>    <span class="n">latency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</span><span id="StreamDetails-30"><a href="#StreamDetails-30"><span class="linenos">30</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The latency for the invocation&quot;&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Details for the stream responses</p>
</div>


                            <div id="StreamDetails.__init__" class="classattr">
                                        <input id="StreamDetails.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">StreamDetails</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="n">Iterable</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">body</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">latency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span></span>)</span>

                <label class="view-source-button" for="StreamDetails.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#StreamDetails.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="StreamDetails.__init__-2"><a href="#StreamDetails.__init__-2"><span class="linenos">2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">stream</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;stream&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;prompt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">latency</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;latency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="StreamDetails.__init__-3"><a href="#StreamDetails.__init__-3"><span class="linenos">3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="o">=</span> <span class="n">stream</span>
</span><span id="StreamDetails.__init__-4"><a href="#StreamDetails.__init__-4"><span class="linenos">4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt</span>
</span><span id="StreamDetails.__init__-5"><a href="#StreamDetails.__init__-5"><span class="linenos">5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
</span><span id="StreamDetails.__init__-6"><a href="#StreamDetails.__init__-6"><span class="linenos">6</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">latency</span> <span class="o">=</span> <span class="n">latency</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class StreamDetails.</p>
</div>


                            </div>
                            <div id="StreamDetails.stream" class="classattr">
                                <div class="attr variable">
            <span class="name">stream</span><span class="annotation">: Iterable</span>

        
    </div>
    <a class="headerlink" href="#StreamDetails.stream"></a>
    
            <div class="docstring"><p>An iterable providing the tokens as they get generated</p>
</div>


                            </div>
                            <div id="StreamDetails.prompt" class="classattr">
                                <div class="attr variable">
            <span class="name">prompt</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StreamDetails.prompt"></a>
    
            <div class="docstring"><p>The prompt that is being sent to the model</p>
</div>


                            </div>
                            <div id="StreamDetails.body" class="classattr">
                                <div class="attr variable">
            <span class="name">body</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#StreamDetails.body"></a>
    
            <div class="docstring"><p>The prompt that is being sent to the model</p>
</div>


                            </div>
                            <div id="StreamDetails.latency" class="classattr">
                                <div class="attr variable">
            <span class="name">latency</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#StreamDetails.latency"></a>
    
            <div class="docstring"><p>The latency for the invocation</p>
</div>


                            </div>
                </section>
                <section id="CompletionDetails">
                            <input id="CompletionDetails-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define(kw_only=True)</div>

    <span class="def">class</span>
    <span class="name">CompletionDetails</span>:

                <label class="view-source-button" for="CompletionDetails-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CompletionDetails"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CompletionDetails-33"><a href="#CompletionDetails-33"><span class="linenos">33</span></a><span class="nd">@define</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="CompletionDetails-34"><a href="#CompletionDetails-34"><span class="linenos">34</span></a><span class="k">class</span> <span class="nc">CompletionDetails</span><span class="p">:</span>
</span><span id="CompletionDetails-35"><a href="#CompletionDetails-35"><span class="linenos">35</span></a>    <span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="CompletionDetails-36"><a href="#CompletionDetails-36"><span class="linenos">36</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The text being generated by the model&quot;&quot;&quot;</span>
</span><span id="CompletionDetails-37"><a href="#CompletionDetails-37"><span class="linenos">37</span></a>    <span class="n">response</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</span><span id="CompletionDetails-38"><a href="#CompletionDetails-38"><span class="linenos">38</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The response as a dictionary&quot;&quot;&quot;</span>
</span><span id="CompletionDetails-39"><a href="#CompletionDetails-39"><span class="linenos">39</span></a>    <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="CompletionDetails-40"><a href="#CompletionDetails-40"><span class="linenos">40</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The prompt that is being sent to the model&quot;&quot;&quot;</span>
</span><span id="CompletionDetails-41"><a href="#CompletionDetails-41"><span class="linenos">41</span></a>    <span class="n">body</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="CompletionDetails-42"><a href="#CompletionDetails-42"><span class="linenos">42</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The prompt that is being sent to the model&quot;&quot;&quot;</span>
</span><span id="CompletionDetails-43"><a href="#CompletionDetails-43"><span class="linenos">43</span></a>    <span class="n">latency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
</span><span id="CompletionDetails-44"><a href="#CompletionDetails-44"><span class="linenos">44</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;The latency for the invocation&quot;&quot;&quot;</span>
</span></pre></div>


    

                            <div id="CompletionDetails.__init__" class="classattr">
                                        <input id="CompletionDetails.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">CompletionDetails</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">response</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">built</span><span class="o">-</span><span class="ow">in</span> <span class="n">function</span> <span class="nb">any</span><span class="o">&gt;</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">body</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>,</span><span class="param">	<span class="n">latency</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.0</span></span>)</span>

                <label class="view-source-button" for="CompletionDetails.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#CompletionDetails.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="CompletionDetails.__init__-2"><a href="#CompletionDetails.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">response</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;prompt&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">latency</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;latency&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="CompletionDetails.__init__-3"><a href="#CompletionDetails.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">output</span>
</span><span id="CompletionDetails.__init__-4"><a href="#CompletionDetails.__init__-4"><span class="linenos"> 4</span></a>    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="CompletionDetails.__init__-5"><a href="#CompletionDetails.__init__-5"><span class="linenos"> 5</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="n">response</span>
</span><span id="CompletionDetails.__init__-6"><a href="#CompletionDetails.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="CompletionDetails.__init__-7"><a href="#CompletionDetails.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">response</span> <span class="o">=</span> <span class="n">__attr_factory_response</span><span class="p">()</span>
</span><span id="CompletionDetails.__init__-8"><a href="#CompletionDetails.__init__-8"><span class="linenos"> 8</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">prompt</span> <span class="o">=</span> <span class="n">prompt</span>
</span><span id="CompletionDetails.__init__-9"><a href="#CompletionDetails.__init__-9"><span class="linenos"> 9</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">body</span> <span class="o">=</span> <span class="n">body</span>
</span><span id="CompletionDetails.__init__-10"><a href="#CompletionDetails.__init__-10"><span class="linenos">10</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">latency</span> <span class="o">=</span> <span class="n">latency</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class CompletionDetails.</p>
</div>


                            </div>
                            <div id="CompletionDetails.output" class="classattr">
                                <div class="attr variable">
            <span class="name">output</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#CompletionDetails.output"></a>
    
            <div class="docstring"><p>The text being generated by the model</p>
</div>


                            </div>
                            <div id="CompletionDetails.response" class="classattr">
                                <div class="attr variable">
            <span class="name">response</span><span class="annotation">: Dict[str, &lt;built-in function any&gt;]</span>

        
    </div>
    <a class="headerlink" href="#CompletionDetails.response"></a>
    
            <div class="docstring"><p>The response as a dictionary</p>
</div>


                            </div>
                            <div id="CompletionDetails.prompt" class="classattr">
                                <div class="attr variable">
            <span class="name">prompt</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#CompletionDetails.prompt"></a>
    
            <div class="docstring"><p>The prompt that is being sent to the model</p>
</div>


                            </div>
                            <div id="CompletionDetails.body" class="classattr">
                                <div class="attr variable">
            <span class="name">body</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#CompletionDetails.body"></a>
    
            <div class="docstring"><p>The prompt that is being sent to the model</p>
</div>


                            </div>
                            <div id="CompletionDetails.latency" class="classattr">
                                <div class="attr variable">
            <span class="name">latency</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#CompletionDetails.latency"></a>
    
            <div class="docstring"><p>The latency for the invocation</p>
</div>


                            </div>
                </section>
                <section id="BedrockFoundationModel">
                            <input id="BedrockFoundationModel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define(kw_only=True)</div>

    <span class="def">class</span>
    <span class="name">BedrockFoundationModel</span>:

                <label class="view-source-button" for="BedrockFoundationModel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel-75"><a href="#BedrockFoundationModel-75"><span class="linenos"> 75</span></a><span class="nd">@define</span><span class="p">(</span><span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-76"><a href="#BedrockFoundationModel-76"><span class="linenos"> 76</span></a><span class="k">class</span> <span class="nc">BedrockFoundationModel</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-77"><a href="#BedrockFoundationModel-77"><span class="linenos"> 77</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for all foundation models exposed via Bedrock.</span>
</span><span id="BedrockFoundationModel-78"><a href="#BedrockFoundationModel-78"><span class="linenos"> 78</span></a>
</span><span id="BedrockFoundationModel-79"><a href="#BedrockFoundationModel-79"><span class="linenos"> 79</span></a><span class="sd">    To add a new FM, inherit from this class and implement the abstract methods:</span>
</span><span id="BedrockFoundationModel-80"><a href="#BedrockFoundationModel-80"><span class="linenos"> 80</span></a>
</span><span id="BedrockFoundationModel-81"><a href="#BedrockFoundationModel-81"><span class="linenos"> 81</span></a><span class="sd">    `get_body`, `get_text`, `process_response`, `validate_extra_args`, `model_id`</span>
</span><span id="BedrockFoundationModel-82"><a href="#BedrockFoundationModel-82"><span class="linenos"> 82</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-83"><a href="#BedrockFoundationModel-83"><span class="linenos"> 83</span></a>
</span><span id="BedrockFoundationModel-84"><a href="#BedrockFoundationModel-84"><span class="linenos"> 84</span></a>    <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-85"><a href="#BedrockFoundationModel-85"><span class="linenos"> 85</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;**Top P** - Top P defines a cut off based on the sum of probabilities of the potential choices. </span>
</span><span id="BedrockFoundationModel-86"><a href="#BedrockFoundationModel-86"><span class="linenos"> 86</span></a><span class="sd">    If you set Top P below 1.0, the model considers the most probable options and ignores less probable ones. </span>
</span><span id="BedrockFoundationModel-87"><a href="#BedrockFoundationModel-87"><span class="linenos"> 87</span></a><span class="sd">    Top P is similar to Top K, but instead of capping the number of choices, it caps choices based on the sum </span>
</span><span id="BedrockFoundationModel-88"><a href="#BedrockFoundationModel-88"><span class="linenos"> 88</span></a><span class="sd">    of their probabilities.</span>
</span><span id="BedrockFoundationModel-89"><a href="#BedrockFoundationModel-89"><span class="linenos"> 89</span></a>
</span><span id="BedrockFoundationModel-90"><a href="#BedrockFoundationModel-90"><span class="linenos"> 90</span></a><span class="sd">    For the example prompt &quot;I hear the hoof beats of ,&quot; you might want the model to provide &quot;horses,&quot; &quot;zebras,&quot; </span>
</span><span id="BedrockFoundationModel-91"><a href="#BedrockFoundationModel-91"><span class="linenos"> 91</span></a><span class="sd">    or &quot;unicorns&quot; as the next word. If you set the temperature to its maximum, without capping Top K or Top P, </span>
</span><span id="BedrockFoundationModel-92"><a href="#BedrockFoundationModel-92"><span class="linenos"> 92</span></a><span class="sd">    you increase the probability of getting unusual results such as &quot;unicorns.&quot; If you set the temperature to 0, </span>
</span><span id="BedrockFoundationModel-93"><a href="#BedrockFoundationModel-93"><span class="linenos"> 93</span></a><span class="sd">    you increase the probability of &quot;horses.&quot; If you set a high temperature and reduce the value of Top K or Top P, </span>
</span><span id="BedrockFoundationModel-94"><a href="#BedrockFoundationModel-94"><span class="linenos"> 94</span></a><span class="sd">    you increase the probability of &quot;horses&quot; or &quot;zebras,&quot; and decrease the probability of &quot;unicorns&quot;.</span>
</span><span id="BedrockFoundationModel-95"><a href="#BedrockFoundationModel-95"><span class="linenos"> 95</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-96"><a href="#BedrockFoundationModel-96"><span class="linenos"> 96</span></a>
</span><span id="BedrockFoundationModel-97"><a href="#BedrockFoundationModel-97"><span class="linenos"> 97</span></a>    <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-98"><a href="#BedrockFoundationModel-98"><span class="linenos"> 98</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;**Temperature** - Large language models use probability to construct the words in a sequence. </span>
</span><span id="BedrockFoundationModel-99"><a href="#BedrockFoundationModel-99"><span class="linenos"> 99</span></a><span class="sd">    For any given sequence, there is a probability distribution of options for the next word in the sequence. </span>
</span><span id="BedrockFoundationModel-100"><a href="#BedrockFoundationModel-100"><span class="linenos">100</span></a><span class="sd">    When you set the temperature closer to zero, the model tends to select the higher-probability words. </span>
</span><span id="BedrockFoundationModel-101"><a href="#BedrockFoundationModel-101"><span class="linenos">101</span></a><span class="sd">    When you set the temperature further away from zero, the model may select a lower-probability word.</span>
</span><span id="BedrockFoundationModel-102"><a href="#BedrockFoundationModel-102"><span class="linenos">102</span></a>
</span><span id="BedrockFoundationModel-103"><a href="#BedrockFoundationModel-103"><span class="linenos">103</span></a><span class="sd">    In technical terms, the temperature modulates the probability density function for the next tokens, </span>
</span><span id="BedrockFoundationModel-104"><a href="#BedrockFoundationModel-104"><span class="linenos">104</span></a><span class="sd">    implementing the temperature sampling technique. This parameter can deepen or flatten the density function curve. </span>
</span><span id="BedrockFoundationModel-105"><a href="#BedrockFoundationModel-105"><span class="linenos">105</span></a><span class="sd">    A lower value results in a steeper curve with more deterministic responses, and a higher value results in a flatter </span>
</span><span id="BedrockFoundationModel-106"><a href="#BedrockFoundationModel-106"><span class="linenos">106</span></a><span class="sd">    curve with more random responses.&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-107"><a href="#BedrockFoundationModel-107"><span class="linenos">107</span></a>
</span><span id="BedrockFoundationModel-108"><a href="#BedrockFoundationModel-108"><span class="linenos">108</span></a>    <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-109"><a href="#BedrockFoundationModel-109"><span class="linenos">109</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Configures the maximum number of tokens generated by an invocation&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-110"><a href="#BedrockFoundationModel-110"><span class="linenos">110</span></a>
</span><span id="BedrockFoundationModel-111"><a href="#BedrockFoundationModel-111"><span class="linenos">111</span></a>    <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-112"><a href="#BedrockFoundationModel-112"><span class="linenos">112</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;**Stop sequence** - A stop sequence is a sequence of characters. If the model encounters a stop sequence, </span>
</span><span id="BedrockFoundationModel-113"><a href="#BedrockFoundationModel-113"><span class="linenos">113</span></a><span class="sd">    it stops generating further tokens. Different models support different types of characters in a stop sequence, </span>
</span><span id="BedrockFoundationModel-114"><a href="#BedrockFoundationModel-114"><span class="linenos">114</span></a><span class="sd">    different maximum sequence lengths, and may support the definition of multiple stop sequences.&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-115"><a href="#BedrockFoundationModel-115"><span class="linenos">115</span></a>
</span><span id="BedrockFoundationModel-116"><a href="#BedrockFoundationModel-116"><span class="linenos">116</span></a>    <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-117"><a href="#BedrockFoundationModel-117"><span class="linenos">117</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A dictionary containing the extra arguments to pass to the model that are not supported via the common</span>
</span><span id="BedrockFoundationModel-118"><a href="#BedrockFoundationModel-118"><span class="linenos">118</span></a><span class="sd">    paramters.&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-119"><a href="#BedrockFoundationModel-119"><span class="linenos">119</span></a>
</span><span id="BedrockFoundationModel-120"><a href="#BedrockFoundationModel-120"><span class="linenos">120</span></a>    <span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-121"><a href="#BedrockFoundationModel-121"><span class="linenos">121</span></a>        <span class="n">default</span><span class="o">=</span><span class="n">Factory</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">Session</span><span class="p">()),</span> <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span>
</span><span id="BedrockFoundationModel-122"><a href="#BedrockFoundationModel-122"><span class="linenos">122</span></a>    <span class="p">)</span>
</span><span id="BedrockFoundationModel-123"><a href="#BedrockFoundationModel-123"><span class="linenos">123</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A `boto3.Session` object to use to create an instance of the Bedrock client&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-124"><a href="#BedrockFoundationModel-124"><span class="linenos">124</span></a>
</span><span id="BedrockFoundationModel-125"><a href="#BedrockFoundationModel-125"><span class="linenos">125</span></a>    <span class="n">_client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-126"><a href="#BedrockFoundationModel-126"><span class="linenos">126</span></a>        <span class="n">default</span><span class="o">=</span><span class="n">Factory</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-127"><a href="#BedrockFoundationModel-127"><span class="linenos">127</span></a>            <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;bedrock-runtime&quot;</span><span class="p">),</span>
</span><span id="BedrockFoundationModel-128"><a href="#BedrockFoundationModel-128"><span class="linenos">128</span></a>            <span class="n">takes_self</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-129"><a href="#BedrockFoundationModel-129"><span class="linenos">129</span></a>        <span class="p">),</span>
</span><span id="BedrockFoundationModel-130"><a href="#BedrockFoundationModel-130"><span class="linenos">130</span></a>        <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-131"><a href="#BedrockFoundationModel-131"><span class="linenos">131</span></a>    <span class="p">)</span>
</span><span id="BedrockFoundationModel-132"><a href="#BedrockFoundationModel-132"><span class="linenos">132</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Instance of the Bedrock data plane client to use. By default it created one using the session&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-133"><a href="#BedrockFoundationModel-133"><span class="linenos">133</span></a>
</span><span id="BedrockFoundationModel-134"><a href="#BedrockFoundationModel-134"><span class="linenos">134</span></a>    <span class="n">_client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-135"><a href="#BedrockFoundationModel-135"><span class="linenos">135</span></a>        <span class="n">default</span><span class="o">=</span><span class="n">Factory</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-136"><a href="#BedrockFoundationModel-136"><span class="linenos">136</span></a>            <span class="k">lambda</span> <span class="bp">self</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">client</span><span class="p">(</span><span class="s2">&quot;bedrock&quot;</span><span class="p">),</span>
</span><span id="BedrockFoundationModel-137"><a href="#BedrockFoundationModel-137"><span class="linenos">137</span></a>            <span class="n">takes_self</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-138"><a href="#BedrockFoundationModel-138"><span class="linenos">138</span></a>        <span class="p">),</span>
</span><span id="BedrockFoundationModel-139"><a href="#BedrockFoundationModel-139"><span class="linenos">139</span></a>        <span class="n">kw_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-140"><a href="#BedrockFoundationModel-140"><span class="linenos">140</span></a>    <span class="p">)</span>
</span><span id="BedrockFoundationModel-141"><a href="#BedrockFoundationModel-141"><span class="linenos">141</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Instance of the Bedrock control plane client to use. By default it created one using the session&quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-142"><a href="#BedrockFoundationModel-142"><span class="linenos">142</span></a>
</span><span id="BedrockFoundationModel-143"><a href="#BedrockFoundationModel-143"><span class="linenos">143</span></a>    <span class="n">_model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-144"><a href="#BedrockFoundationModel-144"><span class="linenos">144</span></a>
</span><span id="BedrockFoundationModel-145"><a href="#BedrockFoundationModel-145"><span class="linenos">145</span></a>    <span class="nd">@classmethod</span>
</span><span id="BedrockFoundationModel-146"><a href="#BedrockFoundationModel-146"><span class="linenos">146</span></a>    <span class="k">def</span> <span class="nf">_validate_model_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-147"><a href="#BedrockFoundationModel-147"><span class="linenos">147</span></a>        <span class="k">return</span> <span class="n">model_id</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">family</span><span class="p">())</span>
</span><span id="BedrockFoundationModel-148"><a href="#BedrockFoundationModel-148"><span class="linenos">148</span></a>
</span><span id="BedrockFoundationModel-149"><a href="#BedrockFoundationModel-149"><span class="linenos">149</span></a>    <span class="nd">@classmethod</span>
</span><span id="BedrockFoundationModel-150"><a href="#BedrockFoundationModel-150"><span class="linenos">150</span></a>    <span class="k">def</span> <span class="nf">from_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
</span><span id="BedrockFoundationModel-151"><a href="#BedrockFoundationModel-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_model_id</span><span class="p">(</span><span class="n">model_id</span><span class="p">):</span>
</span><span id="BedrockFoundationModel-152"><a href="#BedrockFoundationModel-152"><span class="linenos">152</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-153"><a href="#BedrockFoundationModel-153"><span class="linenos">153</span></a>                <span class="sa">f</span><span class="s2">&quot;model_id </span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> not compatible with by </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">family</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BedrockFoundationModel-154"><a href="#BedrockFoundationModel-154"><span class="linenos">154</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel-155"><a href="#BedrockFoundationModel-155"><span class="linenos">155</span></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-156"><a href="#BedrockFoundationModel-156"><span class="linenos">156</span></a>        <span class="n">model</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span><span id="BedrockFoundationModel-157"><a href="#BedrockFoundationModel-157"><span class="linenos">157</span></a>        <span class="k">return</span> <span class="n">model</span>
</span><span id="BedrockFoundationModel-158"><a href="#BedrockFoundationModel-158"><span class="linenos">158</span></a>
</span><span id="BedrockFoundationModel-159"><a href="#BedrockFoundationModel-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="nf">list_model_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel-160"><a href="#BedrockFoundationModel-160"><span class="linenos">160</span></a>        <span class="n">models</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span><span class="o">.</span><span class="n">list_foundation_models</span><span class="p">()[</span><span class="s2">&quot;modelSummaries&quot;</span><span class="p">]</span>
</span><span id="BedrockFoundationModel-161"><a href="#BedrockFoundationModel-161"><span class="linenos">161</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">m</span><span class="p">[</span><span class="s2">&quot;modelId&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;modelId&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">())]</span>
</span><span id="BedrockFoundationModel-162"><a href="#BedrockFoundationModel-162"><span class="linenos">162</span></a>
</span><span id="BedrockFoundationModel-163"><a href="#BedrockFoundationModel-163"><span class="linenos">163</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel-164"><a href="#BedrockFoundationModel-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-165"><a href="#BedrockFoundationModel-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in subclasses to return the model family.</span>
</span><span id="BedrockFoundationModel-166"><a href="#BedrockFoundationModel-166"><span class="linenos">166</span></a>
</span><span id="BedrockFoundationModel-167"><a href="#BedrockFoundationModel-167"><span class="linenos">167</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-168"><a href="#BedrockFoundationModel-168"><span class="linenos">168</span></a><span class="sd">            str: the model family</span>
</span><span id="BedrockFoundationModel-169"><a href="#BedrockFoundationModel-169"><span class="linenos">169</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-170"><a href="#BedrockFoundationModel-170"><span class="linenos">170</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-171"><a href="#BedrockFoundationModel-171"><span class="linenos">171</span></a>
</span><span id="BedrockFoundationModel-172"><a href="#BedrockFoundationModel-172"><span class="linenos">172</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel-173"><a href="#BedrockFoundationModel-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
</span><span id="BedrockFoundationModel-174"><a href="#BedrockFoundationModel-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the subclasses to provide a custom validator for the</span>
</span><span id="BedrockFoundationModel-175"><a href="#BedrockFoundationModel-175"><span class="linenos">175</span></a><span class="sd">        extra arguments to be passed to the model.</span>
</span><span id="BedrockFoundationModel-176"><a href="#BedrockFoundationModel-176"><span class="linenos">176</span></a>
</span><span id="BedrockFoundationModel-177"><a href="#BedrockFoundationModel-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-178"><a href="#BedrockFoundationModel-178"><span class="linenos">178</span></a><span class="sd">            extra_args (Dict[str, Any]): A dictionary containing the extra arguments</span>
</span><span id="BedrockFoundationModel-179"><a href="#BedrockFoundationModel-179"><span class="linenos">179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-180"><a href="#BedrockFoundationModel-180"><span class="linenos">180</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-181"><a href="#BedrockFoundationModel-181"><span class="linenos">181</span></a>
</span><span id="BedrockFoundationModel-182"><a href="#BedrockFoundationModel-182"><span class="linenos">182</span></a>    <span class="nd">@overload</span>
</span><span id="BedrockFoundationModel-183"><a href="#BedrockFoundationModel-183"><span class="linenos">183</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-184"><a href="#BedrockFoundationModel-184"><span class="linenos">184</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-185"><a href="#BedrockFoundationModel-185"><span class="linenos">185</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-186"><a href="#BedrockFoundationModel-186"><span class="linenos">186</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-187"><a href="#BedrockFoundationModel-187"><span class="linenos">187</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-188"><a href="#BedrockFoundationModel-188"><span class="linenos">188</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-189"><a href="#BedrockFoundationModel-189"><span class="linenos">189</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-190"><a href="#BedrockFoundationModel-190"><span class="linenos">190</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-191"><a href="#BedrockFoundationModel-191"><span class="linenos">191</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-192"><a href="#BedrockFoundationModel-192"><span class="linenos">192</span></a>        <span class="n">details</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-193"><a href="#BedrockFoundationModel-193"><span class="linenos">193</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-194"><a href="#BedrockFoundationModel-194"><span class="linenos">194</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamDetails</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-195"><a href="#BedrockFoundationModel-195"><span class="linenos">195</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-196"><a href="#BedrockFoundationModel-196"><span class="linenos">196</span></a>
</span><span id="BedrockFoundationModel-197"><a href="#BedrockFoundationModel-197"><span class="linenos">197</span></a>    <span class="nd">@overload</span>
</span><span id="BedrockFoundationModel-198"><a href="#BedrockFoundationModel-198"><span class="linenos">198</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-199"><a href="#BedrockFoundationModel-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-200"><a href="#BedrockFoundationModel-200"><span class="linenos">200</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-201"><a href="#BedrockFoundationModel-201"><span class="linenos">201</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-202"><a href="#BedrockFoundationModel-202"><span class="linenos">202</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-203"><a href="#BedrockFoundationModel-203"><span class="linenos">203</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-204"><a href="#BedrockFoundationModel-204"><span class="linenos">204</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-205"><a href="#BedrockFoundationModel-205"><span class="linenos">205</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-206"><a href="#BedrockFoundationModel-206"><span class="linenos">206</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-207"><a href="#BedrockFoundationModel-207"><span class="linenos">207</span></a>        <span class="n">details</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-208"><a href="#BedrockFoundationModel-208"><span class="linenos">208</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-209"><a href="#BedrockFoundationModel-209"><span class="linenos">209</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CompletionDetails</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-210"><a href="#BedrockFoundationModel-210"><span class="linenos">210</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-211"><a href="#BedrockFoundationModel-211"><span class="linenos">211</span></a>
</span><span id="BedrockFoundationModel-212"><a href="#BedrockFoundationModel-212"><span class="linenos">212</span></a>    <span class="nd">@overload</span>
</span><span id="BedrockFoundationModel-213"><a href="#BedrockFoundationModel-213"><span class="linenos">213</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-214"><a href="#BedrockFoundationModel-214"><span class="linenos">214</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-215"><a href="#BedrockFoundationModel-215"><span class="linenos">215</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-216"><a href="#BedrockFoundationModel-216"><span class="linenos">216</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-217"><a href="#BedrockFoundationModel-217"><span class="linenos">217</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-218"><a href="#BedrockFoundationModel-218"><span class="linenos">218</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-219"><a href="#BedrockFoundationModel-219"><span class="linenos">219</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-220"><a href="#BedrockFoundationModel-220"><span class="linenos">220</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-221"><a href="#BedrockFoundationModel-221"><span class="linenos">221</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-222"><a href="#BedrockFoundationModel-222"><span class="linenos">222</span></a>        <span class="n">details</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-223"><a href="#BedrockFoundationModel-223"><span class="linenos">223</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-224"><a href="#BedrockFoundationModel-224"><span class="linenos">224</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel-225"><a href="#BedrockFoundationModel-225"><span class="linenos">225</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-226"><a href="#BedrockFoundationModel-226"><span class="linenos">226</span></a>
</span><span id="BedrockFoundationModel-227"><a href="#BedrockFoundationModel-227"><span class="linenos">227</span></a>    <span class="nd">@overload</span>
</span><span id="BedrockFoundationModel-228"><a href="#BedrockFoundationModel-228"><span class="linenos">228</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-229"><a href="#BedrockFoundationModel-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-230"><a href="#BedrockFoundationModel-230"><span class="linenos">230</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-231"><a href="#BedrockFoundationModel-231"><span class="linenos">231</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-232"><a href="#BedrockFoundationModel-232"><span class="linenos">232</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-233"><a href="#BedrockFoundationModel-233"><span class="linenos">233</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-234"><a href="#BedrockFoundationModel-234"><span class="linenos">234</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-235"><a href="#BedrockFoundationModel-235"><span class="linenos">235</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-236"><a href="#BedrockFoundationModel-236"><span class="linenos">236</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-237"><a href="#BedrockFoundationModel-237"><span class="linenos">237</span></a>        <span class="n">details</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">False</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-238"><a href="#BedrockFoundationModel-238"><span class="linenos">238</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-239"><a href="#BedrockFoundationModel-239"><span class="linenos">239</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-240"><a href="#BedrockFoundationModel-240"><span class="linenos">240</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-241"><a href="#BedrockFoundationModel-241"><span class="linenos">241</span></a>
</span><span id="BedrockFoundationModel-242"><a href="#BedrockFoundationModel-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-243"><a href="#BedrockFoundationModel-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-244"><a href="#BedrockFoundationModel-244"><span class="linenos">244</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-245"><a href="#BedrockFoundationModel-245"><span class="linenos">245</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-246"><a href="#BedrockFoundationModel-246"><span class="linenos">246</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-247"><a href="#BedrockFoundationModel-247"><span class="linenos">247</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-248"><a href="#BedrockFoundationModel-248"><span class="linenos">248</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-249"><a href="#BedrockFoundationModel-249"><span class="linenos">249</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-250"><a href="#BedrockFoundationModel-250"><span class="linenos">250</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-251"><a href="#BedrockFoundationModel-251"><span class="linenos">251</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-252"><a href="#BedrockFoundationModel-252"><span class="linenos">252</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-253"><a href="#BedrockFoundationModel-253"><span class="linenos">253</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamDetails</span> <span class="o">|</span> <span class="n">CompletionDetails</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-254"><a href="#BedrockFoundationModel-254"><span class="linenos">254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a response from the model based on the prompt and the additional optional arguments</span>
</span><span id="BedrockFoundationModel-255"><a href="#BedrockFoundationModel-255"><span class="linenos">255</span></a>
</span><span id="BedrockFoundationModel-256"><a href="#BedrockFoundationModel-256"><span class="linenos">256</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-257"><a href="#BedrockFoundationModel-257"><span class="linenos">257</span></a><span class="sd">            prompt (str): the user prompt</span>
</span><span id="BedrockFoundationModel-258"><a href="#BedrockFoundationModel-258"><span class="linenos">258</span></a><span class="sd">            top_p (float, optional): The Top P value. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel-259"><a href="#BedrockFoundationModel-259"><span class="linenos">259</span></a><span class="sd">            temperature (float, optional): The temperature for the generation. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel-260"><a href="#BedrockFoundationModel-260"><span class="linenos">260</span></a><span class="sd">            max_token_count (int, optional): Max number of tokens to return. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel-261"><a href="#BedrockFoundationModel-261"><span class="linenos">261</span></a><span class="sd">            stop_sequences (List[str], optional): The list of stop words. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel-262"><a href="#BedrockFoundationModel-262"><span class="linenos">262</span></a><span class="sd">            extra_args (Dict[str, Any], optional): Model specific extra arguments. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel-263"><a href="#BedrockFoundationModel-263"><span class="linenos">263</span></a>
</span><span id="BedrockFoundationModel-264"><a href="#BedrockFoundationModel-264"><span class="linenos">264</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-265"><a href="#BedrockFoundationModel-265"><span class="linenos">265</span></a><span class="sd">            Dict[str, Any]: A dictionary containing the output from the model as Dictionary, the prompt, the body passed to the model an the inference time.</span>
</span><span id="BedrockFoundationModel-266"><a href="#BedrockFoundationModel-266"><span class="linenos">266</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-267"><a href="#BedrockFoundationModel-267"><span class="linenos">267</span></a>        <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-268"><a href="#BedrockFoundationModel-268"><span class="linenos">268</span></a>            <span class="n">extra_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-269"><a href="#BedrockFoundationModel-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">validate_extra_args</span><span class="p">(</span><span class="n">extra_args</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-270"><a href="#BedrockFoundationModel-270"><span class="linenos">270</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;extra_args = </span><span class="si">{</span><span class="n">extra_args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-271"><a href="#BedrockFoundationModel-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-272"><a href="#BedrockFoundationModel-272"><span class="linenos">272</span></a>            <span class="n">stop_sequences</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-273"><a href="#BedrockFoundationModel-273"><span class="linenos">273</span></a>
</span><span id="BedrockFoundationModel-274"><a href="#BedrockFoundationModel-274"><span class="linenos">274</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;stop_word = </span><span class="si">{</span><span class="n">stop_sequences</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-275"><a href="#BedrockFoundationModel-275"><span class="linenos">275</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-276"><a href="#BedrockFoundationModel-276"><span class="linenos">276</span></a>            <span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-277"><a href="#BedrockFoundationModel-277"><span class="linenos">277</span></a>            <span class="n">top_p</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-278"><a href="#BedrockFoundationModel-278"><span class="linenos">278</span></a>            <span class="n">temperature</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-279"><a href="#BedrockFoundationModel-279"><span class="linenos">279</span></a>            <span class="n">max_token_count</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-280"><a href="#BedrockFoundationModel-280"><span class="linenos">280</span></a>            <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-281"><a href="#BedrockFoundationModel-281"><span class="linenos">281</span></a>            <span class="n">extra_args</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-282"><a href="#BedrockFoundationModel-282"><span class="linenos">282</span></a>            <span class="n">stream</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-283"><a href="#BedrockFoundationModel-283"><span class="linenos">283</span></a>        <span class="p">)</span>
</span><span id="BedrockFoundationModel-284"><a href="#BedrockFoundationModel-284"><span class="linenos">284</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Body= </span><span class="si">{</span><span class="n">body</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-285"><a href="#BedrockFoundationModel-285"><span class="linenos">285</span></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="BedrockFoundationModel-286"><a href="#BedrockFoundationModel-286"><span class="linenos">286</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-287"><a href="#BedrockFoundationModel-287"><span class="linenos">287</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-288"><a href="#BedrockFoundationModel-288"><span class="linenos">288</span></a>                <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">invoke_model_with_response_stream</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-289"><a href="#BedrockFoundationModel-289"><span class="linenos">289</span></a>                    <span class="n">modelId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-290"><a href="#BedrockFoundationModel-290"><span class="linenos">290</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-291"><a href="#BedrockFoundationModel-291"><span class="linenos">291</span></a>                    <span class="n">contentType</span><span class="o">=</span><span class="n">CONTENT_TYPE_APPLICATION_JSON</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-292"><a href="#BedrockFoundationModel-292"><span class="linenos">292</span></a>                    <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-293"><a href="#BedrockFoundationModel-293"><span class="linenos">293</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel-294"><a href="#BedrockFoundationModel-294"><span class="linenos">294</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-295"><a href="#BedrockFoundationModel-295"><span class="linenos">295</span></a>                <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">invoke_model</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-296"><a href="#BedrockFoundationModel-296"><span class="linenos">296</span></a>                    <span class="n">modelId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-297"><a href="#BedrockFoundationModel-297"><span class="linenos">297</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-298"><a href="#BedrockFoundationModel-298"><span class="linenos">298</span></a>                    <span class="n">contentType</span><span class="o">=</span><span class="n">CONTENT_TYPE_APPLICATION_JSON</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-299"><a href="#BedrockFoundationModel-299"><span class="linenos">299</span></a>                    <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-300"><a href="#BedrockFoundationModel-300"><span class="linenos">300</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel-301"><a href="#BedrockFoundationModel-301"><span class="linenos">301</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-302"><a href="#BedrockFoundationModel-302"><span class="linenos">302</span></a>            <span class="k">raise</span> <span class="n">ex</span>
</span><span id="BedrockFoundationModel-303"><a href="#BedrockFoundationModel-303"><span class="linenos">303</span></a>
</span><span id="BedrockFoundationModel-304"><a href="#BedrockFoundationModel-304"><span class="linenos">304</span></a>        <span class="k">if</span> <span class="n">details</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-305"><a href="#BedrockFoundationModel-305"><span class="linenos">305</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-306"><a href="#BedrockFoundationModel-306"><span class="linenos">306</span></a>                <span class="k">return</span> <span class="n">StreamDetails</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-307"><a href="#BedrockFoundationModel-307"><span class="linenos">307</span></a>                    <span class="n">stream</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_text_stream</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]),</span>
</span><span id="BedrockFoundationModel-308"><a href="#BedrockFoundationModel-308"><span class="linenos">308</span></a>                    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-309"><a href="#BedrockFoundationModel-309"><span class="linenos">309</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-310"><a href="#BedrockFoundationModel-310"><span class="linenos">310</span></a>                    <span class="n">latency</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-311"><a href="#BedrockFoundationModel-311"><span class="linenos">311</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel-312"><a href="#BedrockFoundationModel-312"><span class="linenos">312</span></a>
</span><span id="BedrockFoundationModel-313"><a href="#BedrockFoundationModel-313"><span class="linenos">313</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-314"><a href="#BedrockFoundationModel-314"><span class="linenos">314</span></a>                <span class="n">out_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="BedrockFoundationModel-315"><a href="#BedrockFoundationModel-315"><span class="linenos">315</span></a>                <span class="k">return</span> <span class="n">CompletionDetails</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-316"><a href="#BedrockFoundationModel-316"><span class="linenos">316</span></a>                    <span class="n">output</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">process_response_body</span><span class="p">(</span><span class="n">out_body</span><span class="p">),</span>
</span><span id="BedrockFoundationModel-317"><a href="#BedrockFoundationModel-317"><span class="linenos">317</span></a>                    <span class="n">response</span><span class="o">=</span><span class="n">out_body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-318"><a href="#BedrockFoundationModel-318"><span class="linenos">318</span></a>                    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-319"><a href="#BedrockFoundationModel-319"><span class="linenos">319</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-320"><a href="#BedrockFoundationModel-320"><span class="linenos">320</span></a>                    <span class="n">latency</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-321"><a href="#BedrockFoundationModel-321"><span class="linenos">321</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel-322"><a href="#BedrockFoundationModel-322"><span class="linenos">322</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-323"><a href="#BedrockFoundationModel-323"><span class="linenos">323</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-324"><a href="#BedrockFoundationModel-324"><span class="linenos">324</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_stream</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">])</span>
</span><span id="BedrockFoundationModel-325"><a href="#BedrockFoundationModel-325"><span class="linenos">325</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-326"><a href="#BedrockFoundationModel-326"><span class="linenos">326</span></a>                <span class="n">out_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="BedrockFoundationModel-327"><a href="#BedrockFoundationModel-327"><span class="linenos">327</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response_body</span><span class="p">(</span><span class="n">out_body</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-328"><a href="#BedrockFoundationModel-328"><span class="linenos">328</span></a>
</span><span id="BedrockFoundationModel-329"><a href="#BedrockFoundationModel-329"><span class="linenos">329</span></a>    <span class="k">def</span> <span class="nf">chat</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-330"><a href="#BedrockFoundationModel-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-331"><a href="#BedrockFoundationModel-331"><span class="linenos">331</span></a>        <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-332"><a href="#BedrockFoundationModel-332"><span class="linenos">332</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-333"><a href="#BedrockFoundationModel-333"><span class="linenos">333</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-334"><a href="#BedrockFoundationModel-334"><span class="linenos">334</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-335"><a href="#BedrockFoundationModel-335"><span class="linenos">335</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-336"><a href="#BedrockFoundationModel-336"><span class="linenos">336</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel-337"><a href="#BedrockFoundationModel-337"><span class="linenos">337</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-338"><a href="#BedrockFoundationModel-338"><span class="linenos">338</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-339"><a href="#BedrockFoundationModel-339"><span class="linenos">339</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-340"><a href="#BedrockFoundationModel-340"><span class="linenos">340</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamDetails</span> <span class="o">|</span> <span class="n">CompletionDetails</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-341"><a href="#BedrockFoundationModel-341"><span class="linenos">341</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-342"><a href="#BedrockFoundationModel-342"><span class="linenos">342</span></a>            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</span><span id="BedrockFoundationModel-343"><a href="#BedrockFoundationModel-343"><span class="linenos">343</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="BedrockFoundationModel-344"><a href="#BedrockFoundationModel-344"><span class="linenos">344</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-345"><a href="#BedrockFoundationModel-345"><span class="linenos">345</span></a>            <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="BedrockFoundationModel-346"><a href="#BedrockFoundationModel-346"><span class="linenos">346</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">[</span><span class="n">s</span> <span class="o">+</span> <span class="mi">0</span> <span class="p">::</span> <span class="mi">2</span><span class="p">]]):</span>
</span><span id="BedrockFoundationModel-347"><a href="#BedrockFoundationModel-347"><span class="linenos">347</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-348"><a href="#BedrockFoundationModel-348"><span class="linenos">348</span></a>                <span class="s2">&quot;Human messages are not alternating correctly in the conversation&quot;</span>
</span><span id="BedrockFoundationModel-349"><a href="#BedrockFoundationModel-349"><span class="linenos">349</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel-350"><a href="#BedrockFoundationModel-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">[</span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">::</span> <span class="mi">2</span><span class="p">]]):</span>
</span><span id="BedrockFoundationModel-351"><a href="#BedrockFoundationModel-351"><span class="linenos">351</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-352"><a href="#BedrockFoundationModel-352"><span class="linenos">352</span></a>                <span class="s2">&quot;Assistant messages are not alternating correctly in the conversation&quot;</span>
</span><span id="BedrockFoundationModel-353"><a href="#BedrockFoundationModel-353"><span class="linenos">353</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel-354"><a href="#BedrockFoundationModel-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-355"><a href="#BedrockFoundationModel-355"><span class="linenos">355</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span><span class="s2">&quot;Last messages in the conversation should be Human&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-356"><a href="#BedrockFoundationModel-356"><span class="linenos">356</span></a>
</span><span id="BedrockFoundationModel-357"><a href="#BedrockFoundationModel-357"><span class="linenos">357</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_chat_prompt</span><span class="p">(</span><span class="n">conversation</span><span class="o">=</span><span class="n">conversation</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-358"><a href="#BedrockFoundationModel-358"><span class="linenos">358</span></a>
</span><span id="BedrockFoundationModel-359"><a href="#BedrockFoundationModel-359"><span class="linenos">359</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-360"><a href="#BedrockFoundationModel-360"><span class="linenos">360</span></a>            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-361"><a href="#BedrockFoundationModel-361"><span class="linenos">361</span></a>            <span class="n">top_p</span><span class="o">=</span><span class="n">top_p</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-362"><a href="#BedrockFoundationModel-362"><span class="linenos">362</span></a>            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-363"><a href="#BedrockFoundationModel-363"><span class="linenos">363</span></a>            <span class="n">max_token_count</span><span class="o">=</span><span class="n">max_token_count</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-364"><a href="#BedrockFoundationModel-364"><span class="linenos">364</span></a>            <span class="n">stop_sequences</span><span class="o">=</span><span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-365"><a href="#BedrockFoundationModel-365"><span class="linenos">365</span></a>            <span class="n">extra_args</span><span class="o">=</span><span class="n">extra_args</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-366"><a href="#BedrockFoundationModel-366"><span class="linenos">366</span></a>            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-367"><a href="#BedrockFoundationModel-367"><span class="linenos">367</span></a>            <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-368"><a href="#BedrockFoundationModel-368"><span class="linenos">368</span></a>        <span class="p">)</span>
</span><span id="BedrockFoundationModel-369"><a href="#BedrockFoundationModel-369"><span class="linenos">369</span></a>
</span><span id="BedrockFoundationModel-370"><a href="#BedrockFoundationModel-370"><span class="linenos">370</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-371"><a href="#BedrockFoundationModel-371"><span class="linenos">371</span></a>        <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span><span class="s2">&quot;This model does not support chat mode&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel-372"><a href="#BedrockFoundationModel-372"><span class="linenos">372</span></a>
</span><span id="BedrockFoundationModel-373"><a href="#BedrockFoundationModel-373"><span class="linenos">373</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel-374"><a href="#BedrockFoundationModel-374"><span class="linenos">374</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="BedrockFoundationModel-375"><a href="#BedrockFoundationModel-375"><span class="linenos">375</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-376"><a href="#BedrockFoundationModel-376"><span class="linenos">376</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-377"><a href="#BedrockFoundationModel-377"><span class="linenos">377</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-378"><a href="#BedrockFoundationModel-378"><span class="linenos">378</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-379"><a href="#BedrockFoundationModel-379"><span class="linenos">379</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-380"><a href="#BedrockFoundationModel-380"><span class="linenos">380</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-381"><a href="#BedrockFoundationModel-381"><span class="linenos">381</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="BedrockFoundationModel-382"><a href="#BedrockFoundationModel-382"><span class="linenos">382</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="BedrockFoundationModel-383"><a href="#BedrockFoundationModel-383"><span class="linenos">383</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-384"><a href="#BedrockFoundationModel-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the model class to generate the stringified body to be passed to</span>
</span><span id="BedrockFoundationModel-385"><a href="#BedrockFoundationModel-385"><span class="linenos">385</span></a><span class="sd">        [InvokeModel](https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html).</span>
</span><span id="BedrockFoundationModel-386"><a href="#BedrockFoundationModel-386"><span class="linenos">386</span></a>
</span><span id="BedrockFoundationModel-387"><a href="#BedrockFoundationModel-387"><span class="linenos">387</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-388"><a href="#BedrockFoundationModel-388"><span class="linenos">388</span></a><span class="sd">            prompt (str): the user prompt</span>
</span><span id="BedrockFoundationModel-389"><a href="#BedrockFoundationModel-389"><span class="linenos">389</span></a><span class="sd">            top_p (float): the top P value</span>
</span><span id="BedrockFoundationModel-390"><a href="#BedrockFoundationModel-390"><span class="linenos">390</span></a><span class="sd">            temperature (float): the temperature value</span>
</span><span id="BedrockFoundationModel-391"><a href="#BedrockFoundationModel-391"><span class="linenos">391</span></a><span class="sd">            max_token_count (int): the max token count</span>
</span><span id="BedrockFoundationModel-392"><a href="#BedrockFoundationModel-392"><span class="linenos">392</span></a><span class="sd">            stop_sequences (List[str]): the list of stop words</span>
</span><span id="BedrockFoundationModel-393"><a href="#BedrockFoundationModel-393"><span class="linenos">393</span></a><span class="sd">            extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model</span>
</span><span id="BedrockFoundationModel-394"><a href="#BedrockFoundationModel-394"><span class="linenos">394</span></a><span class="sd">            stream (bool): a boolean indicating if a streaming response is required</span>
</span><span id="BedrockFoundationModel-395"><a href="#BedrockFoundationModel-395"><span class="linenos">395</span></a>
</span><span id="BedrockFoundationModel-396"><a href="#BedrockFoundationModel-396"><span class="linenos">396</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-397"><a href="#BedrockFoundationModel-397"><span class="linenos">397</span></a><span class="sd">            str: the stringified body to be passed to `InvokeModel`</span>
</span><span id="BedrockFoundationModel-398"><a href="#BedrockFoundationModel-398"><span class="linenos">398</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-399"><a href="#BedrockFoundationModel-399"><span class="linenos">399</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-400"><a href="#BedrockFoundationModel-400"><span class="linenos">400</span></a>
</span><span id="BedrockFoundationModel-401"><a href="#BedrockFoundationModel-401"><span class="linenos">401</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel-402"><a href="#BedrockFoundationModel-402"><span class="linenos">402</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel-403"><a href="#BedrockFoundationModel-403"><span class="linenos">403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the model class to processes the response from the `InvokeModel` and extract the generated text.</span>
</span><span id="BedrockFoundationModel-404"><a href="#BedrockFoundationModel-404"><span class="linenos">404</span></a>
</span><span id="BedrockFoundationModel-405"><a href="#BedrockFoundationModel-405"><span class="linenos">405</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-406"><a href="#BedrockFoundationModel-406"><span class="linenos">406</span></a><span class="sd">            resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</span>
</span><span id="BedrockFoundationModel-407"><a href="#BedrockFoundationModel-407"><span class="linenos">407</span></a>
</span><span id="BedrockFoundationModel-408"><a href="#BedrockFoundationModel-408"><span class="linenos">408</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-409"><a href="#BedrockFoundationModel-409"><span class="linenos">409</span></a><span class="sd">            List[str]: The list of text generations</span>
</span><span id="BedrockFoundationModel-410"><a href="#BedrockFoundationModel-410"><span class="linenos">410</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-411"><a href="#BedrockFoundationModel-411"><span class="linenos">411</span></a>        <span class="o">...</span>
</span><span id="BedrockFoundationModel-412"><a href="#BedrockFoundationModel-412"><span class="linenos">412</span></a>
</span><span id="BedrockFoundationModel-413"><a href="#BedrockFoundationModel-413"><span class="linenos">413</span></a>    <span class="k">def</span> <span class="nf">_get_text_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">:</span> <span class="n">EventStream</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel-414"><a href="#BedrockFoundationModel-414"><span class="linenos">414</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Internal method to return the stream of tokens</span>
</span><span id="BedrockFoundationModel-415"><a href="#BedrockFoundationModel-415"><span class="linenos">415</span></a>
</span><span id="BedrockFoundationModel-416"><a href="#BedrockFoundationModel-416"><span class="linenos">416</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-417"><a href="#BedrockFoundationModel-417"><span class="linenos">417</span></a><span class="sd">            stream (EventStream): _description_</span>
</span><span id="BedrockFoundationModel-418"><a href="#BedrockFoundationModel-418"><span class="linenos">418</span></a>
</span><span id="BedrockFoundationModel-419"><a href="#BedrockFoundationModel-419"><span class="linenos">419</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-420"><a href="#BedrockFoundationModel-420"><span class="linenos">420</span></a><span class="sd">            Iterable[str]: _description_</span>
</span><span id="BedrockFoundationModel-421"><a href="#BedrockFoundationModel-421"><span class="linenos">421</span></a>
</span><span id="BedrockFoundationModel-422"><a href="#BedrockFoundationModel-422"><span class="linenos">422</span></a><span class="sd">        Yields:</span>
</span><span id="BedrockFoundationModel-423"><a href="#BedrockFoundationModel-423"><span class="linenos">423</span></a><span class="sd">            Iterator[Iterable[str]]: _description_</span>
</span><span id="BedrockFoundationModel-424"><a href="#BedrockFoundationModel-424"><span class="linenos">424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-425"><a href="#BedrockFoundationModel-425"><span class="linenos">425</span></a>
</span><span id="BedrockFoundationModel-426"><a href="#BedrockFoundationModel-426"><span class="linenos">426</span></a>        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-427"><a href="#BedrockFoundationModel-427"><span class="linenos">427</span></a>            <span class="k">yield</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;chunk&quot;</span><span class="p">][</span><span class="s2">&quot;bytes&quot;</span><span class="p">]))</span>
</span><span id="BedrockFoundationModel-428"><a href="#BedrockFoundationModel-428"><span class="linenos">428</span></a>
</span><span id="BedrockFoundationModel-429"><a href="#BedrockFoundationModel-429"><span class="linenos">429</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel-430"><a href="#BedrockFoundationModel-430"><span class="linenos">430</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel-431"><a href="#BedrockFoundationModel-431"><span class="linenos">431</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the concrete class to extract the text from the answer</span>
</span><span id="BedrockFoundationModel-432"><a href="#BedrockFoundationModel-432"><span class="linenos">432</span></a>
</span><span id="BedrockFoundationModel-433"><a href="#BedrockFoundationModel-433"><span class="linenos">433</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel-434"><a href="#BedrockFoundationModel-434"><span class="linenos">434</span></a><span class="sd">            body (Dict[str, Any]): the body as a dictionary</span>
</span><span id="BedrockFoundationModel-435"><a href="#BedrockFoundationModel-435"><span class="linenos">435</span></a>
</span><span id="BedrockFoundationModel-436"><a href="#BedrockFoundationModel-436"><span class="linenos">436</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel-437"><a href="#BedrockFoundationModel-437"><span class="linenos">437</span></a><span class="sd">            str: the generated text</span>
</span><span id="BedrockFoundationModel-438"><a href="#BedrockFoundationModel-438"><span class="linenos">438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel-439"><a href="#BedrockFoundationModel-439"><span class="linenos">439</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Abstract class for all foundation models exposed via Bedrock.</p>

<p>To add a new FM, inherit from this class and implement the abstract methods:</p>

<p><code><a href="#BedrockFoundationModel.get_body">get_body</a></code>, <code><a href="#BedrockFoundationModel.get_text">get_text</a></code>, <code>process_response</code>, <code><a href="#BedrockFoundationModel.validate_extra_args">validate_extra_args</a></code>, <code>model_id</code></p>
</div>


                            <div id="BedrockFoundationModel.__init__" class="classattr">
                                        <input id="BedrockFoundationModel.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">BedrockFoundationModel</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="BedrockFoundationModel.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.__init__-2"><a href="#BedrockFoundationModel.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="BedrockFoundationModel.__init__-3"><a href="#BedrockFoundationModel.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="BedrockFoundationModel.__init__-4"><a href="#BedrockFoundationModel.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="BedrockFoundationModel.__init__-5"><a href="#BedrockFoundationModel.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="BedrockFoundationModel.__init__-6"><a href="#BedrockFoundationModel.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-7"><a href="#BedrockFoundationModel.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="BedrockFoundationModel.__init__-8"><a href="#BedrockFoundationModel.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-9"><a href="#BedrockFoundationModel.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="BedrockFoundationModel.__init__-10"><a href="#BedrockFoundationModel.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-11"><a href="#BedrockFoundationModel.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="BedrockFoundationModel.__init__-12"><a href="#BedrockFoundationModel.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-13"><a href="#BedrockFoundationModel.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="BedrockFoundationModel.__init__-14"><a href="#BedrockFoundationModel.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-15"><a href="#BedrockFoundationModel.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="BedrockFoundationModel.__init__-16"><a href="#BedrockFoundationModel.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-17"><a href="#BedrockFoundationModel.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="BedrockFoundationModel.__init__-18"><a href="#BedrockFoundationModel.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-19"><a href="#BedrockFoundationModel.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="BedrockFoundationModel.__init__-20"><a href="#BedrockFoundationModel.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-21"><a href="#BedrockFoundationModel.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.__init__-22"><a href="#BedrockFoundationModel.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-23"><a href="#BedrockFoundationModel.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="BedrockFoundationModel.__init__-24"><a href="#BedrockFoundationModel.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.__init__-25"><a href="#BedrockFoundationModel.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.__init__-26"><a href="#BedrockFoundationModel.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class BedrockFoundationModel.</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.top_p" class="classattr">
                                <div class="attr variable">
            <span class="name">top_p</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.top_p"></a>
    
            <div class="docstring"><p><strong>Top P</strong> - Top P defines a cut off based on the sum of probabilities of the potential choices. 
If you set Top P below 1.0, the model considers the most probable options and ignores less probable ones. 
Top P is similar to Top K, but instead of capping the number of choices, it caps choices based on the sum 
of their probabilities.</p>

<p>For the example prompt "I hear the hoof beats of ," you might want the model to provide "horses," "zebras," 
or "unicorns" as the next word. If you set the temperature to its maximum, without capping Top K or Top P, 
you increase the probability of getting unusual results such as "unicorns." If you set the temperature to 0, 
you increase the probability of "horses." If you set a high temperature and reduce the value of Top K or Top P, 
you increase the probability of "horses" or "zebras," and decrease the probability of "unicorns".</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.temperature" class="classattr">
                                <div class="attr variable">
            <span class="name">temperature</span><span class="annotation">: float</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.temperature"></a>
    
            <div class="docstring"><p><strong>Temperature</strong> - Large language models use probability to construct the words in a sequence. 
For any given sequence, there is a probability distribution of options for the next word in the sequence. 
When you set the temperature closer to zero, the model tends to select the higher-probability words. 
When you set the temperature further away from zero, the model may select a lower-probability word.</p>

<p>In technical terms, the temperature modulates the probability density function for the next tokens, 
implementing the temperature sampling technique. This parameter can deepen or flatten the density function curve. 
A lower value results in a steeper curve with more deterministic responses, and a higher value results in a flatter 
curve with more random responses.</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.max_token_count" class="classattr">
                                <div class="attr variable">
            <span class="name">max_token_count</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.max_token_count"></a>
    
            <div class="docstring"><p>Configures the maximum number of tokens generated by an invocation</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.stop_sequences" class="classattr">
                                <div class="attr variable">
            <span class="name">stop_sequences</span><span class="annotation">: List[str]</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.stop_sequences"></a>
    
            <div class="docstring"><p><strong>Stop sequence</strong> - A stop sequence is a sequence of characters. If the model encounters a stop sequence, 
it stops generating further tokens. Different models support different types of characters in a stop sequence, 
different maximum sequence lengths, and may support the definition of multiple stop sequences.</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.extra_args" class="classattr">
                                <div class="attr variable">
            <span class="name">extra_args</span><span class="annotation">: Dict[str, Any]</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.extra_args"></a>
    
            <div class="docstring"><p>A dictionary containing the extra arguments to pass to the model that are not supported via the common
paramters.</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.session" class="classattr">
                                <div class="attr variable">
            <span class="name">session</span><span class="annotation">: boto3.session.Session</span>

        
    </div>
    <a class="headerlink" href="#BedrockFoundationModel.session"></a>
    
            <div class="docstring"><p>A <code>boto3.Session</code> object to use to create an instance of the Bedrock client</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.from_id" class="classattr">
                                        <input id="BedrockFoundationModel.from_id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">from_id</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span>, </span><span class="param"><span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="o">**</span><span class="n">kw</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.from_id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.from_id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.from_id-149"><a href="#BedrockFoundationModel.from_id-149"><span class="linenos">149</span></a>    <span class="nd">@classmethod</span>
</span><span id="BedrockFoundationModel.from_id-150"><a href="#BedrockFoundationModel.from_id-150"><span class="linenos">150</span></a>    <span class="k">def</span> <span class="nf">from_id</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
</span><span id="BedrockFoundationModel.from_id-151"><a href="#BedrockFoundationModel.from_id-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_validate_model_id</span><span class="p">(</span><span class="n">model_id</span><span class="p">):</span>
</span><span id="BedrockFoundationModel.from_id-152"><a href="#BedrockFoundationModel.from_id-152"><span class="linenos">152</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.from_id-153"><a href="#BedrockFoundationModel.from_id-153"><span class="linenos">153</span></a>                <span class="sa">f</span><span class="s2">&quot;model_id </span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> not compatible with by </span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="n">family</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="BedrockFoundationModel.from_id-154"><a href="#BedrockFoundationModel.from_id-154"><span class="linenos">154</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel.from_id-155"><a href="#BedrockFoundationModel.from_id-155"><span class="linenos">155</span></a>        <span class="n">model</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.from_id-156"><a href="#BedrockFoundationModel.from_id-156"><span class="linenos">156</span></a>        <span class="n">model</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span><span id="BedrockFoundationModel.from_id-157"><a href="#BedrockFoundationModel.from_id-157"><span class="linenos">157</span></a>        <span class="k">return</span> <span class="n">model</span>
</span></pre></div>


    

                            </div>
                            <div id="BedrockFoundationModel.list_model_ids" class="classattr">
                                        <input id="BedrockFoundationModel.list_model_ids-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">list_model_ids</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.list_model_ids-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.list_model_ids"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.list_model_ids-159"><a href="#BedrockFoundationModel.list_model_ids-159"><span class="linenos">159</span></a>    <span class="k">def</span> <span class="nf">list_model_ids</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel.list_model_ids-160"><a href="#BedrockFoundationModel.list_model_ids-160"><span class="linenos">160</span></a>        <span class="n">models</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span><span class="o">.</span><span class="n">list_foundation_models</span><span class="p">()[</span><span class="s2">&quot;modelSummaries&quot;</span><span class="p">]</span>
</span><span id="BedrockFoundationModel.list_model_ids-161"><a href="#BedrockFoundationModel.list_model_ids-161"><span class="linenos">161</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">m</span><span class="p">[</span><span class="s2">&quot;modelId&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">models</span> <span class="k">if</span> <span class="n">m</span><span class="p">[</span><span class="s2">&quot;modelId&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">())]</span>
</span></pre></div>


    

                            </div>
                            <div id="BedrockFoundationModel.family" class="classattr">
                                        <input id="BedrockFoundationModel.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.family-163"><a href="#BedrockFoundationModel.family-163"><span class="linenos">163</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel.family-164"><a href="#BedrockFoundationModel.family-164"><span class="linenos">164</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.family-165"><a href="#BedrockFoundationModel.family-165"><span class="linenos">165</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in subclasses to return the model family.</span>
</span><span id="BedrockFoundationModel.family-166"><a href="#BedrockFoundationModel.family-166"><span class="linenos">166</span></a>
</span><span id="BedrockFoundationModel.family-167"><a href="#BedrockFoundationModel.family-167"><span class="linenos">167</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel.family-168"><a href="#BedrockFoundationModel.family-168"><span class="linenos">168</span></a><span class="sd">            str: the model family</span>
</span><span id="BedrockFoundationModel.family-169"><a href="#BedrockFoundationModel.family-169"><span class="linenos">169</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.family-170"><a href="#BedrockFoundationModel.family-170"><span class="linenos">170</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.validate_extra_args" class="classattr">
                                        <input id="BedrockFoundationModel.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.validate_extra_args-172"><a href="#BedrockFoundationModel.validate_extra_args-172"><span class="linenos">172</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel.validate_extra_args-173"><a href="#BedrockFoundationModel.validate_extra_args-173"><span class="linenos">173</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
</span><span id="BedrockFoundationModel.validate_extra_args-174"><a href="#BedrockFoundationModel.validate_extra_args-174"><span class="linenos">174</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the subclasses to provide a custom validator for the</span>
</span><span id="BedrockFoundationModel.validate_extra_args-175"><a href="#BedrockFoundationModel.validate_extra_args-175"><span class="linenos">175</span></a><span class="sd">        extra arguments to be passed to the model.</span>
</span><span id="BedrockFoundationModel.validate_extra_args-176"><a href="#BedrockFoundationModel.validate_extra_args-176"><span class="linenos">176</span></a>
</span><span id="BedrockFoundationModel.validate_extra_args-177"><a href="#BedrockFoundationModel.validate_extra_args-177"><span class="linenos">177</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel.validate_extra_args-178"><a href="#BedrockFoundationModel.validate_extra_args-178"><span class="linenos">178</span></a><span class="sd">            extra_args (Dict[str, Any]): A dictionary containing the extra arguments</span>
</span><span id="BedrockFoundationModel.validate_extra_args-179"><a href="#BedrockFoundationModel.validate_extra_args-179"><span class="linenos">179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.validate_extra_args-180"><a href="#BedrockFoundationModel.validate_extra_args-180"><span class="linenos">180</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.generate" class="classattr">
                                        <input id="BedrockFoundationModel.generate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">generate</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="#StreamDetails">StreamDetails</a></span><span class="p">,</span> <span class="n"><a href="#CompletionDetails">CompletionDetails</a></span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.generate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.generate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.generate-242"><a href="#BedrockFoundationModel.generate-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-243"><a href="#BedrockFoundationModel.generate-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-244"><a href="#BedrockFoundationModel.generate-244"><span class="linenos">244</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-245"><a href="#BedrockFoundationModel.generate-245"><span class="linenos">245</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-246"><a href="#BedrockFoundationModel.generate-246"><span class="linenos">246</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-247"><a href="#BedrockFoundationModel.generate-247"><span class="linenos">247</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-248"><a href="#BedrockFoundationModel.generate-248"><span class="linenos">248</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-249"><a href="#BedrockFoundationModel.generate-249"><span class="linenos">249</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel.generate-250"><a href="#BedrockFoundationModel.generate-250"><span class="linenos">250</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-251"><a href="#BedrockFoundationModel.generate-251"><span class="linenos">251</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-252"><a href="#BedrockFoundationModel.generate-252"><span class="linenos">252</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-253"><a href="#BedrockFoundationModel.generate-253"><span class="linenos">253</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamDetails</span> <span class="o">|</span> <span class="n">CompletionDetails</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-254"><a href="#BedrockFoundationModel.generate-254"><span class="linenos">254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a response from the model based on the prompt and the additional optional arguments</span>
</span><span id="BedrockFoundationModel.generate-255"><a href="#BedrockFoundationModel.generate-255"><span class="linenos">255</span></a>
</span><span id="BedrockFoundationModel.generate-256"><a href="#BedrockFoundationModel.generate-256"><span class="linenos">256</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel.generate-257"><a href="#BedrockFoundationModel.generate-257"><span class="linenos">257</span></a><span class="sd">            prompt (str): the user prompt</span>
</span><span id="BedrockFoundationModel.generate-258"><a href="#BedrockFoundationModel.generate-258"><span class="linenos">258</span></a><span class="sd">            top_p (float, optional): The Top P value. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel.generate-259"><a href="#BedrockFoundationModel.generate-259"><span class="linenos">259</span></a><span class="sd">            temperature (float, optional): The temperature for the generation. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel.generate-260"><a href="#BedrockFoundationModel.generate-260"><span class="linenos">260</span></a><span class="sd">            max_token_count (int, optional): Max number of tokens to return. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel.generate-261"><a href="#BedrockFoundationModel.generate-261"><span class="linenos">261</span></a><span class="sd">            stop_sequences (List[str], optional): The list of stop words. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel.generate-262"><a href="#BedrockFoundationModel.generate-262"><span class="linenos">262</span></a><span class="sd">            extra_args (Dict[str, Any], optional): Model specific extra arguments. Defaults to the value set on the model instance.</span>
</span><span id="BedrockFoundationModel.generate-263"><a href="#BedrockFoundationModel.generate-263"><span class="linenos">263</span></a>
</span><span id="BedrockFoundationModel.generate-264"><a href="#BedrockFoundationModel.generate-264"><span class="linenos">264</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel.generate-265"><a href="#BedrockFoundationModel.generate-265"><span class="linenos">265</span></a><span class="sd">            Dict[str, Any]: A dictionary containing the output from the model as Dictionary, the prompt, the body passed to the model an the inference time.</span>
</span><span id="BedrockFoundationModel.generate-266"><a href="#BedrockFoundationModel.generate-266"><span class="linenos">266</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.generate-267"><a href="#BedrockFoundationModel.generate-267"><span class="linenos">267</span></a>        <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-268"><a href="#BedrockFoundationModel.generate-268"><span class="linenos">268</span></a>            <span class="n">extra_args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-269"><a href="#BedrockFoundationModel.generate-269"><span class="linenos">269</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">validate_extra_args</span><span class="p">(</span><span class="n">extra_args</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-270"><a href="#BedrockFoundationModel.generate-270"><span class="linenos">270</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;extra_args = </span><span class="si">{</span><span class="n">extra_args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-271"><a href="#BedrockFoundationModel.generate-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-272"><a href="#BedrockFoundationModel.generate-272"><span class="linenos">272</span></a>            <span class="n">stop_sequences</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-273"><a href="#BedrockFoundationModel.generate-273"><span class="linenos">273</span></a>
</span><span id="BedrockFoundationModel.generate-274"><a href="#BedrockFoundationModel.generate-274"><span class="linenos">274</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;stop_word = </span><span class="si">{</span><span class="n">stop_sequences</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-275"><a href="#BedrockFoundationModel.generate-275"><span class="linenos">275</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_body</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-276"><a href="#BedrockFoundationModel.generate-276"><span class="linenos">276</span></a>            <span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-277"><a href="#BedrockFoundationModel.generate-277"><span class="linenos">277</span></a>            <span class="n">top_p</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-278"><a href="#BedrockFoundationModel.generate-278"><span class="linenos">278</span></a>            <span class="n">temperature</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-279"><a href="#BedrockFoundationModel.generate-279"><span class="linenos">279</span></a>            <span class="n">max_token_count</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-280"><a href="#BedrockFoundationModel.generate-280"><span class="linenos">280</span></a>            <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-281"><a href="#BedrockFoundationModel.generate-281"><span class="linenos">281</span></a>            <span class="n">extra_args</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-282"><a href="#BedrockFoundationModel.generate-282"><span class="linenos">282</span></a>            <span class="n">stream</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-283"><a href="#BedrockFoundationModel.generate-283"><span class="linenos">283</span></a>        <span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-284"><a href="#BedrockFoundationModel.generate-284"><span class="linenos">284</span></a>        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Body= </span><span class="si">{</span><span class="n">body</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-285"><a href="#BedrockFoundationModel.generate-285"><span class="linenos">285</span></a>        <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
</span><span id="BedrockFoundationModel.generate-286"><a href="#BedrockFoundationModel.generate-286"><span class="linenos">286</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-287"><a href="#BedrockFoundationModel.generate-287"><span class="linenos">287</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-288"><a href="#BedrockFoundationModel.generate-288"><span class="linenos">288</span></a>                <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">invoke_model_with_response_stream</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-289"><a href="#BedrockFoundationModel.generate-289"><span class="linenos">289</span></a>                    <span class="n">modelId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-290"><a href="#BedrockFoundationModel.generate-290"><span class="linenos">290</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-291"><a href="#BedrockFoundationModel.generate-291"><span class="linenos">291</span></a>                    <span class="n">contentType</span><span class="o">=</span><span class="n">CONTENT_TYPE_APPLICATION_JSON</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-292"><a href="#BedrockFoundationModel.generate-292"><span class="linenos">292</span></a>                    <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-293"><a href="#BedrockFoundationModel.generate-293"><span class="linenos">293</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-294"><a href="#BedrockFoundationModel.generate-294"><span class="linenos">294</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-295"><a href="#BedrockFoundationModel.generate-295"><span class="linenos">295</span></a>                <span class="n">resp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_client</span><span class="o">.</span><span class="n">invoke_model</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-296"><a href="#BedrockFoundationModel.generate-296"><span class="linenos">296</span></a>                    <span class="n">modelId</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-297"><a href="#BedrockFoundationModel.generate-297"><span class="linenos">297</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-298"><a href="#BedrockFoundationModel.generate-298"><span class="linenos">298</span></a>                    <span class="n">contentType</span><span class="o">=</span><span class="n">CONTENT_TYPE_APPLICATION_JSON</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-299"><a href="#BedrockFoundationModel.generate-299"><span class="linenos">299</span></a>                    <span class="n">accept</span><span class="o">=</span><span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-300"><a href="#BedrockFoundationModel.generate-300"><span class="linenos">300</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-301"><a href="#BedrockFoundationModel.generate-301"><span class="linenos">301</span></a>        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-302"><a href="#BedrockFoundationModel.generate-302"><span class="linenos">302</span></a>            <span class="k">raise</span> <span class="n">ex</span>
</span><span id="BedrockFoundationModel.generate-303"><a href="#BedrockFoundationModel.generate-303"><span class="linenos">303</span></a>
</span><span id="BedrockFoundationModel.generate-304"><a href="#BedrockFoundationModel.generate-304"><span class="linenos">304</span></a>        <span class="k">if</span> <span class="n">details</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-305"><a href="#BedrockFoundationModel.generate-305"><span class="linenos">305</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-306"><a href="#BedrockFoundationModel.generate-306"><span class="linenos">306</span></a>                <span class="k">return</span> <span class="n">StreamDetails</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-307"><a href="#BedrockFoundationModel.generate-307"><span class="linenos">307</span></a>                    <span class="n">stream</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_text_stream</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]),</span>
</span><span id="BedrockFoundationModel.generate-308"><a href="#BedrockFoundationModel.generate-308"><span class="linenos">308</span></a>                    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-309"><a href="#BedrockFoundationModel.generate-309"><span class="linenos">309</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-310"><a href="#BedrockFoundationModel.generate-310"><span class="linenos">310</span></a>                    <span class="n">latency</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-311"><a href="#BedrockFoundationModel.generate-311"><span class="linenos">311</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-312"><a href="#BedrockFoundationModel.generate-312"><span class="linenos">312</span></a>
</span><span id="BedrockFoundationModel.generate-313"><a href="#BedrockFoundationModel.generate-313"><span class="linenos">313</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-314"><a href="#BedrockFoundationModel.generate-314"><span class="linenos">314</span></a>                <span class="n">out_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="BedrockFoundationModel.generate-315"><a href="#BedrockFoundationModel.generate-315"><span class="linenos">315</span></a>                <span class="k">return</span> <span class="n">CompletionDetails</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.generate-316"><a href="#BedrockFoundationModel.generate-316"><span class="linenos">316</span></a>                    <span class="n">output</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">process_response_body</span><span class="p">(</span><span class="n">out_body</span><span class="p">),</span>
</span><span id="BedrockFoundationModel.generate-317"><a href="#BedrockFoundationModel.generate-317"><span class="linenos">317</span></a>                    <span class="n">response</span><span class="o">=</span><span class="n">out_body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-318"><a href="#BedrockFoundationModel.generate-318"><span class="linenos">318</span></a>                    <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-319"><a href="#BedrockFoundationModel.generate-319"><span class="linenos">319</span></a>                    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-320"><a href="#BedrockFoundationModel.generate-320"><span class="linenos">320</span></a>                    <span class="n">latency</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">t</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.generate-321"><a href="#BedrockFoundationModel.generate-321"><span class="linenos">321</span></a>                <span class="p">)</span>
</span><span id="BedrockFoundationModel.generate-322"><a href="#BedrockFoundationModel.generate-322"><span class="linenos">322</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-323"><a href="#BedrockFoundationModel.generate-323"><span class="linenos">323</span></a>            <span class="k">if</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-324"><a href="#BedrockFoundationModel.generate-324"><span class="linenos">324</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_text_stream</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">])</span>
</span><span id="BedrockFoundationModel.generate-325"><a href="#BedrockFoundationModel.generate-325"><span class="linenos">325</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.generate-326"><a href="#BedrockFoundationModel.generate-326"><span class="linenos">326</span></a>                <span class="n">out_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">resp</span><span class="p">[</span><span class="s2">&quot;body&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="BedrockFoundationModel.generate-327"><a href="#BedrockFoundationModel.generate-327"><span class="linenos">327</span></a>                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_response_body</span><span class="p">(</span><span class="n">out_body</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generates a response from the model based on the prompt and the additional optional arguments</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float, optional): The Top P value. Defaults to the value set on the model instance.
    temperature (float, optional): The temperature for the generation. Defaults to the value set on the model instance.
    max_token_count (int, optional): Max number of tokens to return. Defaults to the value set on the model instance.
    stop_sequences (List[str], optional): The list of stop words. Defaults to the value set on the model instance.
    extra_args (Dict[str, Any], optional): Model specific extra arguments. Defaults to the value set on the model instance.</p>

<p>Returns:
    Dict[str, Any]: A dictionary containing the output from the model as Dictionary, the prompt, the body passed to the model an the inference time.</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.chat" class="classattr">
                                        <input id="BedrockFoundationModel.chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chat</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Human</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Assistant</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">System</span><span class="p">]</span>,</span><span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span></span><span class="return-annotation">) -> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="#StreamDetails">StreamDetails</a></span><span class="p">,</span> <span class="n"><a href="#CompletionDetails">CompletionDetails</a></span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">Iterable</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.chat-329"><a href="#BedrockFoundationModel.chat-329"><span class="linenos">329</span></a>    <span class="k">def</span> <span class="nf">chat</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.chat-330"><a href="#BedrockFoundationModel.chat-330"><span class="linenos">330</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-331"><a href="#BedrockFoundationModel.chat-331"><span class="linenos">331</span></a>        <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">],</span>
</span><span id="BedrockFoundationModel.chat-332"><a href="#BedrockFoundationModel.chat-332"><span class="linenos">332</span></a>        <span class="o">*</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-333"><a href="#BedrockFoundationModel.chat-333"><span class="linenos">333</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-334"><a href="#BedrockFoundationModel.chat-334"><span class="linenos">334</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-335"><a href="#BedrockFoundationModel.chat-335"><span class="linenos">335</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-336"><a href="#BedrockFoundationModel.chat-336"><span class="linenos">336</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
</span><span id="BedrockFoundationModel.chat-337"><a href="#BedrockFoundationModel.chat-337"><span class="linenos">337</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-338"><a href="#BedrockFoundationModel.chat-338"><span class="linenos">338</span></a>        <span class="n">details</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-339"><a href="#BedrockFoundationModel.chat-339"><span class="linenos">339</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-340"><a href="#BedrockFoundationModel.chat-340"><span class="linenos">340</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">StreamDetails</span> <span class="o">|</span> <span class="n">CompletionDetails</span> <span class="o">|</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="n">Iterable</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.chat-341"><a href="#BedrockFoundationModel.chat-341"><span class="linenos">341</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.chat-342"><a href="#BedrockFoundationModel.chat-342"><span class="linenos">342</span></a>            <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
</span><span id="BedrockFoundationModel.chat-343"><a href="#BedrockFoundationModel.chat-343"><span class="linenos">343</span></a>        <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="BedrockFoundationModel.chat-344"><a href="#BedrockFoundationModel.chat-344"><span class="linenos">344</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.chat-345"><a href="#BedrockFoundationModel.chat-345"><span class="linenos">345</span></a>            <span class="n">s</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="BedrockFoundationModel.chat-346"><a href="#BedrockFoundationModel.chat-346"><span class="linenos">346</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">[</span><span class="n">s</span> <span class="o">+</span> <span class="mi">0</span> <span class="p">::</span> <span class="mi">2</span><span class="p">]]):</span>
</span><span id="BedrockFoundationModel.chat-347"><a href="#BedrockFoundationModel.chat-347"><span class="linenos">347</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.chat-348"><a href="#BedrockFoundationModel.chat-348"><span class="linenos">348</span></a>                <span class="s2">&quot;Human messages are not alternating correctly in the conversation&quot;</span>
</span><span id="BedrockFoundationModel.chat-349"><a href="#BedrockFoundationModel.chat-349"><span class="linenos">349</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel.chat-350"><a href="#BedrockFoundationModel.chat-350"><span class="linenos">350</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">([</span><span class="n">m</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">ASSISTANT</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">conversation</span><span class="p">[</span><span class="n">s</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">::</span> <span class="mi">2</span><span class="p">]]):</span>
</span><span id="BedrockFoundationModel.chat-351"><a href="#BedrockFoundationModel.chat-351"><span class="linenos">351</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.chat-352"><a href="#BedrockFoundationModel.chat-352"><span class="linenos">352</span></a>                <span class="s2">&quot;Assistant messages are not alternating correctly in the conversation&quot;</span>
</span><span id="BedrockFoundationModel.chat-353"><a href="#BedrockFoundationModel.chat-353"><span class="linenos">353</span></a>            <span class="p">)</span>
</span><span id="BedrockFoundationModel.chat-354"><a href="#BedrockFoundationModel.chat-354"><span class="linenos">354</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">!=</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">HUMAN</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.chat-355"><a href="#BedrockFoundationModel.chat-355"><span class="linenos">355</span></a>            <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span><span class="s2">&quot;Last messages in the conversation should be Human&quot;</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.chat-356"><a href="#BedrockFoundationModel.chat-356"><span class="linenos">356</span></a>
</span><span id="BedrockFoundationModel.chat-357"><a href="#BedrockFoundationModel.chat-357"><span class="linenos">357</span></a>        <span class="n">prompt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_chat_prompt</span><span class="p">(</span><span class="n">conversation</span><span class="o">=</span><span class="n">conversation</span><span class="p">)</span>
</span><span id="BedrockFoundationModel.chat-358"><a href="#BedrockFoundationModel.chat-358"><span class="linenos">358</span></a>
</span><span id="BedrockFoundationModel.chat-359"><a href="#BedrockFoundationModel.chat-359"><span class="linenos">359</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.chat-360"><a href="#BedrockFoundationModel.chat-360"><span class="linenos">360</span></a>            <span class="n">prompt</span><span class="o">=</span><span class="n">prompt</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-361"><a href="#BedrockFoundationModel.chat-361"><span class="linenos">361</span></a>            <span class="n">top_p</span><span class="o">=</span><span class="n">top_p</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-362"><a href="#BedrockFoundationModel.chat-362"><span class="linenos">362</span></a>            <span class="n">temperature</span><span class="o">=</span><span class="n">temperature</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-363"><a href="#BedrockFoundationModel.chat-363"><span class="linenos">363</span></a>            <span class="n">max_token_count</span><span class="o">=</span><span class="n">max_token_count</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-364"><a href="#BedrockFoundationModel.chat-364"><span class="linenos">364</span></a>            <span class="n">stop_sequences</span><span class="o">=</span><span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-365"><a href="#BedrockFoundationModel.chat-365"><span class="linenos">365</span></a>            <span class="n">extra_args</span><span class="o">=</span><span class="n">extra_args</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-366"><a href="#BedrockFoundationModel.chat-366"><span class="linenos">366</span></a>            <span class="n">details</span><span class="o">=</span><span class="n">details</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-367"><a href="#BedrockFoundationModel.chat-367"><span class="linenos">367</span></a>            <span class="n">stream</span><span class="o">=</span><span class="n">stream</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.chat-368"><a href="#BedrockFoundationModel.chat-368"><span class="linenos">368</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BedrockFoundationModel.get_chat_prompt" class="classattr">
                                        <input id="BedrockFoundationModel.get_chat_prompt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_chat_prompt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Human</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Assistant</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">System</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.get_chat_prompt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.get_chat_prompt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.get_chat_prompt-370"><a href="#BedrockFoundationModel.get_chat_prompt-370"><span class="linenos">370</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.get_chat_prompt-371"><a href="#BedrockFoundationModel.get_chat_prompt-371"><span class="linenos">371</span></a>        <span class="k">raise</span> <span class="n">BedrockArgsError</span><span class="p">(</span><span class="s2">&quot;This model does not support chat mode&quot;</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="BedrockFoundationModel.get_body" class="classattr">
                                        <input id="BedrockFoundationModel.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.get_body-373"><a href="#BedrockFoundationModel.get_body-373"><span class="linenos">373</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel.get_body-374"><a href="#BedrockFoundationModel.get_body-374"><span class="linenos">374</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="BedrockFoundationModel.get_body-375"><a href="#BedrockFoundationModel.get_body-375"><span class="linenos">375</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-376"><a href="#BedrockFoundationModel.get_body-376"><span class="linenos">376</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-377"><a href="#BedrockFoundationModel.get_body-377"><span class="linenos">377</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-378"><a href="#BedrockFoundationModel.get_body-378"><span class="linenos">378</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-379"><a href="#BedrockFoundationModel.get_body-379"><span class="linenos">379</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-380"><a href="#BedrockFoundationModel.get_body-380"><span class="linenos">380</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="BedrockFoundationModel.get_body-381"><a href="#BedrockFoundationModel.get_body-381"><span class="linenos">381</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="BedrockFoundationModel.get_body-382"><a href="#BedrockFoundationModel.get_body-382"><span class="linenos">382</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="BedrockFoundationModel.get_body-383"><a href="#BedrockFoundationModel.get_body-383"><span class="linenos">383</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.get_body-384"><a href="#BedrockFoundationModel.get_body-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the model class to generate the stringified body to be passed to</span>
</span><span id="BedrockFoundationModel.get_body-385"><a href="#BedrockFoundationModel.get_body-385"><span class="linenos">385</span></a><span class="sd">        [InvokeModel](https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html).</span>
</span><span id="BedrockFoundationModel.get_body-386"><a href="#BedrockFoundationModel.get_body-386"><span class="linenos">386</span></a>
</span><span id="BedrockFoundationModel.get_body-387"><a href="#BedrockFoundationModel.get_body-387"><span class="linenos">387</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel.get_body-388"><a href="#BedrockFoundationModel.get_body-388"><span class="linenos">388</span></a><span class="sd">            prompt (str): the user prompt</span>
</span><span id="BedrockFoundationModel.get_body-389"><a href="#BedrockFoundationModel.get_body-389"><span class="linenos">389</span></a><span class="sd">            top_p (float): the top P value</span>
</span><span id="BedrockFoundationModel.get_body-390"><a href="#BedrockFoundationModel.get_body-390"><span class="linenos">390</span></a><span class="sd">            temperature (float): the temperature value</span>
</span><span id="BedrockFoundationModel.get_body-391"><a href="#BedrockFoundationModel.get_body-391"><span class="linenos">391</span></a><span class="sd">            max_token_count (int): the max token count</span>
</span><span id="BedrockFoundationModel.get_body-392"><a href="#BedrockFoundationModel.get_body-392"><span class="linenos">392</span></a><span class="sd">            stop_sequences (List[str]): the list of stop words</span>
</span><span id="BedrockFoundationModel.get_body-393"><a href="#BedrockFoundationModel.get_body-393"><span class="linenos">393</span></a><span class="sd">            extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model</span>
</span><span id="BedrockFoundationModel.get_body-394"><a href="#BedrockFoundationModel.get_body-394"><span class="linenos">394</span></a><span class="sd">            stream (bool): a boolean indicating if a streaming response is required</span>
</span><span id="BedrockFoundationModel.get_body-395"><a href="#BedrockFoundationModel.get_body-395"><span class="linenos">395</span></a>
</span><span id="BedrockFoundationModel.get_body-396"><a href="#BedrockFoundationModel.get_body-396"><span class="linenos">396</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel.get_body-397"><a href="#BedrockFoundationModel.get_body-397"><span class="linenos">397</span></a><span class="sd">            str: the stringified body to be passed to `InvokeModel`</span>
</span><span id="BedrockFoundationModel.get_body-398"><a href="#BedrockFoundationModel.get_body-398"><span class="linenos">398</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.get_body-399"><a href="#BedrockFoundationModel.get_body-399"><span class="linenos">399</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.process_response_body" class="classattr">
                                        <input id="BedrockFoundationModel.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.process_response_body-401"><a href="#BedrockFoundationModel.process_response_body-401"><span class="linenos">401</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel.process_response_body-402"><a href="#BedrockFoundationModel.process_response_body-402"><span class="linenos">402</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="BedrockFoundationModel.process_response_body-403"><a href="#BedrockFoundationModel.process_response_body-403"><span class="linenos">403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the model class to processes the response from the `InvokeModel` and extract the generated text.</span>
</span><span id="BedrockFoundationModel.process_response_body-404"><a href="#BedrockFoundationModel.process_response_body-404"><span class="linenos">404</span></a>
</span><span id="BedrockFoundationModel.process_response_body-405"><a href="#BedrockFoundationModel.process_response_body-405"><span class="linenos">405</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel.process_response_body-406"><a href="#BedrockFoundationModel.process_response_body-406"><span class="linenos">406</span></a><span class="sd">            resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</span>
</span><span id="BedrockFoundationModel.process_response_body-407"><a href="#BedrockFoundationModel.process_response_body-407"><span class="linenos">407</span></a>
</span><span id="BedrockFoundationModel.process_response_body-408"><a href="#BedrockFoundationModel.process_response_body-408"><span class="linenos">408</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel.process_response_body-409"><a href="#BedrockFoundationModel.process_response_body-409"><span class="linenos">409</span></a><span class="sd">            List[str]: The list of text generations</span>
</span><span id="BedrockFoundationModel.process_response_body-410"><a href="#BedrockFoundationModel.process_response_body-410"><span class="linenos">410</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.process_response_body-411"><a href="#BedrockFoundationModel.process_response_body-411"><span class="linenos">411</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div id="BedrockFoundationModel.get_text" class="classattr">
                                        <input id="BedrockFoundationModel.get_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@abstractmethod</div>

        <span class="def">def</span>
        <span class="name">get_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="BedrockFoundationModel.get_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#BedrockFoundationModel.get_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="BedrockFoundationModel.get_text-429"><a href="#BedrockFoundationModel.get_text-429"><span class="linenos">429</span></a>    <span class="nd">@abstractmethod</span>
</span><span id="BedrockFoundationModel.get_text-430"><a href="#BedrockFoundationModel.get_text-430"><span class="linenos">430</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="BedrockFoundationModel.get_text-431"><a href="#BedrockFoundationModel.get_text-431"><span class="linenos">431</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Override this method in the concrete class to extract the text from the answer</span>
</span><span id="BedrockFoundationModel.get_text-432"><a href="#BedrockFoundationModel.get_text-432"><span class="linenos">432</span></a>
</span><span id="BedrockFoundationModel.get_text-433"><a href="#BedrockFoundationModel.get_text-433"><span class="linenos">433</span></a><span class="sd">        Args:</span>
</span><span id="BedrockFoundationModel.get_text-434"><a href="#BedrockFoundationModel.get_text-434"><span class="linenos">434</span></a><span class="sd">            body (Dict[str, Any]): the body as a dictionary</span>
</span><span id="BedrockFoundationModel.get_text-435"><a href="#BedrockFoundationModel.get_text-435"><span class="linenos">435</span></a>
</span><span id="BedrockFoundationModel.get_text-436"><a href="#BedrockFoundationModel.get_text-436"><span class="linenos">436</span></a><span class="sd">        Returns:</span>
</span><span id="BedrockFoundationModel.get_text-437"><a href="#BedrockFoundationModel.get_text-437"><span class="linenos">437</span></a><span class="sd">            str: the generated text</span>
</span><span id="BedrockFoundationModel.get_text-438"><a href="#BedrockFoundationModel.get_text-438"><span class="linenos">438</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="BedrockFoundationModel.get_text-439"><a href="#BedrockFoundationModel.get_text-439"><span class="linenos">439</span></a>        <span class="o">...</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the concrete class to extract the text from the answer</p>

<p>Args:
    body (Dict[str, Any]): the body as a dictionary</p>

<p>Returns:
    str: the generated text</p>
</div>


                            </div>
                </section>
                <section id="Command">
                            <input id="Command-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define</div>

    <span class="def">class</span>
    <span class="name">Command</span><wbr>(<span class="base"><a href="#BedrockFoundationModel">bedrock_fm.BedrockFoundationModel</a></span>):

                <label class="view-source-button" for="Command-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command-9"><a href="#Command-9"><span class="linenos"> 9</span></a><span class="nd">@define</span>
</span><span id="Command-10"><a href="#Command-10"><span class="linenos">10</span></a><span class="k">class</span> <span class="nc">Command</span><span class="p">(</span><span class="n">BedrockFoundationModel</span><span class="p">):</span>
</span><span id="Command-11"><a href="#Command-11"><span class="linenos">11</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Command is a text generation model for business use cases. Command is trained on data that supports reliable business applications, </span>
</span><span id="Command-12"><a href="#Command-12"><span class="linenos">12</span></a><span class="sd">    like text generation, summarization, copywriting, dialogue, extraction, and question answering.</span>
</span><span id="Command-13"><a href="#Command-13"><span class="linenos">13</span></a><span class="sd">    </span>
</span><span id="Command-14"><a href="#Command-14"><span class="linenos">14</span></a><span class="sd">    [Cohere Command](https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-cohere) </span>
</span><span id="Command-15"><a href="#Command-15"><span class="linenos">15</span></a><span class="sd">    models support the following `extra_args`:</span>
</span><span id="Command-16"><a href="#Command-16"><span class="linenos">16</span></a>
</span><span id="Command-17"><a href="#Command-17"><span class="linenos">17</span></a><span class="sd">        {</span>
</span><span id="Command-18"><a href="#Command-18"><span class="linenos">18</span></a><span class="sd">            &quot;k&quot;: float,</span>
</span><span id="Command-19"><a href="#Command-19"><span class="linenos">19</span></a><span class="sd">            &quot;return_likelihoods&quot;: &quot;GENERATION|ALL|NONE&quot;,</span>
</span><span id="Command-20"><a href="#Command-20"><span class="linenos">20</span></a><span class="sd">            &quot;num_generations&quot;: int</span>
</span><span id="Command-21"><a href="#Command-21"><span class="linenos">21</span></a><span class="sd">        }</span>
</span><span id="Command-22"><a href="#Command-22"><span class="linenos">22</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Command-23"><a href="#Command-23"><span class="linenos">23</span></a>
</span><span id="Command-24"><a href="#Command-24"><span class="linenos">24</span></a>    <span class="nd">@classmethod</span>
</span><span id="Command-25"><a href="#Command-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command-26"><a href="#Command-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="s2">&quot;cohere.command&quot;</span>
</span><span id="Command-27"><a href="#Command-27"><span class="linenos">27</span></a>
</span><span id="Command-28"><a href="#Command-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Command-29"><a href="#Command-29"><span class="linenos">29</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Command-30"><a href="#Command-30"><span class="linenos">30</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Command-31"><a href="#Command-31"><span class="linenos">31</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;return_likelihoods&quot;</span><span class="p">,</span> <span class="s2">&quot;num_generations&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">]:</span>
</span><span id="Command-32"><a href="#Command-32"><span class="linenos">32</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Command-33"><a href="#Command-33"><span class="linenos">33</span></a>
</span><span id="Command-34"><a href="#Command-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Command-35"><a href="#Command-35"><span class="linenos">35</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Command-36"><a href="#Command-36"><span class="linenos">36</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Command-37"><a href="#Command-37"><span class="linenos">37</span></a>            <span class="p">)</span>
</span><span id="Command-38"><a href="#Command-38"><span class="linenos">38</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="Command-39"><a href="#Command-39"><span class="linenos">39</span></a>
</span><span id="Command-40"><a href="#Command-40"><span class="linenos">40</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Command-41"><a href="#Command-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Command-42"><a href="#Command-42"><span class="linenos">42</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Command-43"><a href="#Command-43"><span class="linenos">43</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Command-44"><a href="#Command-44"><span class="linenos">44</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Command-45"><a href="#Command-45"><span class="linenos">45</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Command-46"><a href="#Command-46"><span class="linenos">46</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Command-47"><a href="#Command-47"><span class="linenos">47</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Command-48"><a href="#Command-48"><span class="linenos">48</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Command-49"><a href="#Command-49"><span class="linenos">49</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command-50"><a href="#Command-50"><span class="linenos">50</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Command-51"><a href="#Command-51"><span class="linenos">51</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Command-52"><a href="#Command-52"><span class="linenos">52</span></a>            <span class="p">{</span>
</span><span id="Command-53"><a href="#Command-53"><span class="linenos">53</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Command-54"><a href="#Command-54"><span class="linenos">54</span></a>                <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Command-55"><a href="#Command-55"><span class="linenos">55</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Command-56"><a href="#Command-56"><span class="linenos">56</span></a>                <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Command-57"><a href="#Command-57"><span class="linenos">57</span></a>                <span class="s2">&quot;stop_sequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Command-58"><a href="#Command-58"><span class="linenos">58</span></a>                <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="n">stream</span><span class="p">,</span>
</span><span id="Command-59"><a href="#Command-59"><span class="linenos">59</span></a>            <span class="p">}</span>
</span><span id="Command-60"><a href="#Command-60"><span class="linenos">60</span></a>        <span class="p">)</span>
</span><span id="Command-61"><a href="#Command-61"><span class="linenos">61</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="Command-62"><a href="#Command-62"><span class="linenos">62</span></a>
</span><span id="Command-63"><a href="#Command-63"><span class="linenos">63</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Command-64"><a href="#Command-64"><span class="linenos">64</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;generations&quot;</span><span class="p">]]</span>
</span><span id="Command-65"><a href="#Command-65"><span class="linenos">65</span></a>
</span><span id="Command-66"><a href="#Command-66"><span class="linenos">66</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command-67"><a href="#Command-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_finished&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Command-68"><a href="#Command-68"><span class="linenos">68</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
</span><span id="Command-69"><a href="#Command-69"><span class="linenos">69</span></a>            <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;&lt;EOS_TOKEN&gt;&quot;</span><span class="p">:</span>
</span><span id="Command-70"><a href="#Command-70"><span class="linenos">70</span></a>                <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Command-71"><a href="#Command-71"><span class="linenos">71</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Command-72"><a href="#Command-72"><span class="linenos">72</span></a>                <span class="k">return</span> <span class="n">t</span>
</span><span id="Command-73"><a href="#Command-73"><span class="linenos">73</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Command-74"><a href="#Command-74"><span class="linenos">74</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Command is a text generation model for business use cases. Command is trained on data that supports reliable business applications, 
like text generation, summarization, copywriting, dialogue, extraction, and question answering.</p>

<p><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters.html#model-parameters-cohere">Cohere Command</a> 
models support the following <code><a href="#Command.extra_args">extra_args</a></code>:</p>

<pre><code>{
    "k": float,
    "return_likelihoods": "GENERATION|ALL|NONE",
    "num_generations": int
}
</code></pre>
</div>


                            <div id="Command.__init__" class="classattr">
                                        <input id="Command.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Command</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Command.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.__init__-2"><a href="#Command.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="Command.__init__-3"><a href="#Command.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="Command.__init__-4"><a href="#Command.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="Command.__init__-5"><a href="#Command.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="Command.__init__-6"><a href="#Command.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Command.__init__-7"><a href="#Command.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="Command.__init__-8"><a href="#Command.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Command.__init__-9"><a href="#Command.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="Command.__init__-10"><a href="#Command.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Command.__init__-11"><a href="#Command.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="Command.__init__-12"><a href="#Command.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Command.__init__-13"><a href="#Command.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="Command.__init__-14"><a href="#Command.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Command.__init__-15"><a href="#Command.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="Command.__init__-16"><a href="#Command.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Command.__init__-17"><a href="#Command.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="Command.__init__-18"><a href="#Command.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Command.__init__-19"><a href="#Command.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="Command.__init__-20"><a href="#Command.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Command.__init__-21"><a href="#Command.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Command.__init__-22"><a href="#Command.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Command.__init__-23"><a href="#Command.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="Command.__init__-24"><a href="#Command.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Command.__init__-25"><a href="#Command.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Command.__init__-26"><a href="#Command.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class Command.</p>
</div>


                            </div>
                            <div id="Command.family" class="classattr">
                                        <input id="Command.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Command.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.family-24"><a href="#Command.family-24"><span class="linenos">24</span></a>    <span class="nd">@classmethod</span>
</span><span id="Command.family-25"><a href="#Command.family-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command.family-26"><a href="#Command.family-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="s2">&quot;cohere.command&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Command.validate_extra_args" class="classattr">
                                        <input id="Command.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Command.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.validate_extra_args-28"><a href="#Command.validate_extra_args-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Command.validate_extra_args-29"><a href="#Command.validate_extra_args-29"><span class="linenos">29</span></a>        <span class="n">unsupp_args</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Command.validate_extra_args-30"><a href="#Command.validate_extra_args-30"><span class="linenos">30</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Command.validate_extra_args-31"><a href="#Command.validate_extra_args-31"><span class="linenos">31</span></a>            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;return_likelihoods&quot;</span><span class="p">,</span> <span class="s2">&quot;num_generations&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">]:</span>
</span><span id="Command.validate_extra_args-32"><a href="#Command.validate_extra_args-32"><span class="linenos">32</span></a>                <span class="n">unsupp_args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
</span><span id="Command.validate_extra_args-33"><a href="#Command.validate_extra_args-33"><span class="linenos">33</span></a>
</span><span id="Command.validate_extra_args-34"><a href="#Command.validate_extra_args-34"><span class="linenos">34</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Command.validate_extra_args-35"><a href="#Command.validate_extra_args-35"><span class="linenos">35</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span>
</span><span id="Command.validate_extra_args-36"><a href="#Command.validate_extra_args-36"><span class="linenos">36</span></a>                <span class="sa">f</span><span class="s2">&quot;Arguments [</span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">unsupp_args</span><span class="p">)</span><span class="si">}</span><span class="s2">] are not supported by this model&quot;</span>
</span><span id="Command.validate_extra_args-37"><a href="#Command.validate_extra_args-37"><span class="linenos">37</span></a>            <span class="p">)</span>
</span><span id="Command.validate_extra_args-38"><a href="#Command.validate_extra_args-38"><span class="linenos">38</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="Command.get_body" class="classattr">
                                        <input id="Command.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Command.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.get_body-40"><a href="#Command.get_body-40"><span class="linenos">40</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Command.get_body-41"><a href="#Command.get_body-41"><span class="linenos">41</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Command.get_body-42"><a href="#Command.get_body-42"><span class="linenos">42</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Command.get_body-43"><a href="#Command.get_body-43"><span class="linenos">43</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Command.get_body-44"><a href="#Command.get_body-44"><span class="linenos">44</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Command.get_body-45"><a href="#Command.get_body-45"><span class="linenos">45</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Command.get_body-46"><a href="#Command.get_body-46"><span class="linenos">46</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Command.get_body-47"><a href="#Command.get_body-47"><span class="linenos">47</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Command.get_body-48"><a href="#Command.get_body-48"><span class="linenos">48</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Command.get_body-49"><a href="#Command.get_body-49"><span class="linenos">49</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command.get_body-50"><a href="#Command.get_body-50"><span class="linenos">50</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Command.get_body-51"><a href="#Command.get_body-51"><span class="linenos">51</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Command.get_body-52"><a href="#Command.get_body-52"><span class="linenos">52</span></a>            <span class="p">{</span>
</span><span id="Command.get_body-53"><a href="#Command.get_body-53"><span class="linenos">53</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="n">prompt</span><span class="p">,</span>
</span><span id="Command.get_body-54"><a href="#Command.get_body-54"><span class="linenos">54</span></a>                <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Command.get_body-55"><a href="#Command.get_body-55"><span class="linenos">55</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Command.get_body-56"><a href="#Command.get_body-56"><span class="linenos">56</span></a>                <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Command.get_body-57"><a href="#Command.get_body-57"><span class="linenos">57</span></a>                <span class="s2">&quot;stop_sequences&quot;</span><span class="p">:</span> <span class="n">stop_sequences</span><span class="p">,</span>
</span><span id="Command.get_body-58"><a href="#Command.get_body-58"><span class="linenos">58</span></a>                <span class="s2">&quot;stream&quot;</span><span class="p">:</span> <span class="n">stream</span><span class="p">,</span>
</span><span id="Command.get_body-59"><a href="#Command.get_body-59"><span class="linenos">59</span></a>            <span class="p">}</span>
</span><span id="Command.get_body-60"><a href="#Command.get_body-60"><span class="linenos">60</span></a>        <span class="p">)</span>
</span><span id="Command.get_body-61"><a href="#Command.get_body-61"><span class="linenos">61</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="Command.process_response_body" class="classattr">
                                        <input id="Command.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Command.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.process_response_body-63"><a href="#Command.process_response_body-63"><span class="linenos">63</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Command.process_response_body-64"><a href="#Command.process_response_body-64"><span class="linenos">64</span></a>        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">r</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;generations&quot;</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div id="Command.get_text" class="classattr">
                                        <input id="Command.get_text-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_text</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Command.get_text-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Command.get_text"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Command.get_text-66"><a href="#Command.get_text-66"><span class="linenos">66</span></a>    <span class="k">def</span> <span class="nf">get_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Command.get_text-67"><a href="#Command.get_text-67"><span class="linenos">67</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;is_finished&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Command.get_text-68"><a href="#Command.get_text-68"><span class="linenos">68</span></a>            <span class="n">t</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
</span><span id="Command.get_text-69"><a href="#Command.get_text-69"><span class="linenos">69</span></a>            <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="s2">&quot;&lt;EOS_TOKEN&gt;&quot;</span><span class="p">:</span>
</span><span id="Command.get_text-70"><a href="#Command.get_text-70"><span class="linenos">70</span></a>                <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="Command.get_text-71"><a href="#Command.get_text-71"><span class="linenos">71</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Command.get_text-72"><a href="#Command.get_text-72"><span class="linenos">72</span></a>                <span class="k">return</span> <span class="n">t</span>
</span><span id="Command.get_text-73"><a href="#Command.get_text-73"><span class="linenos">73</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Command.get_text-74"><a href="#Command.get_text-74"><span class="linenos">74</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the concrete class to extract the text from the answer</p>

<p>Args:
    body (Dict[str, Any]): the body as a dictionary</p>

<p>Returns:
    str: the generated text</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#BedrockFoundationModel">BedrockFoundationModel</a></dt>
                                <dd id="Command.top_p" class="variable"><a href="#BedrockFoundationModel.top_p">top_p</a></dd>
                <dd id="Command.temperature" class="variable"><a href="#BedrockFoundationModel.temperature">temperature</a></dd>
                <dd id="Command.max_token_count" class="variable"><a href="#BedrockFoundationModel.max_token_count">max_token_count</a></dd>
                <dd id="Command.stop_sequences" class="variable"><a href="#BedrockFoundationModel.stop_sequences">stop_sequences</a></dd>
                <dd id="Command.extra_args" class="variable"><a href="#BedrockFoundationModel.extra_args">extra_args</a></dd>
                <dd id="Command.session" class="variable"><a href="#BedrockFoundationModel.session">session</a></dd>
                <dd id="Command.from_id" class="function"><a href="#BedrockFoundationModel.from_id">from_id</a></dd>
                <dd id="Command.list_model_ids" class="function"><a href="#BedrockFoundationModel.list_model_ids">list_model_ids</a></dd>
                <dd id="Command.generate" class="function"><a href="#BedrockFoundationModel.generate">generate</a></dd>
                <dd id="Command.chat" class="function"><a href="#BedrockFoundationModel.chat">chat</a></dd>
                <dd id="Command.get_chat_prompt" class="function"><a href="#BedrockFoundationModel.get_chat_prompt">get_chat_prompt</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Embed">
                            <input id="Embed-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Embed</span><wbr>(<span class="base">bedrock_fm.bedrock.BedrockEmbeddingsModel</span>):

                <label class="view-source-button" for="Embed-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Embed"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Embed-7"><a href="#Embed-7"><span class="linenos"> 7</span></a><span class="k">class</span> <span class="nc">Embed</span><span class="p">(</span><span class="n">BedrockEmbeddingsModel</span><span class="p">):</span>
</span><span id="Embed-8"><a href="#Embed-8"><span class="linenos"> 8</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Amazon Titan Embedding base class.&quot;&quot;&quot;</span>
</span><span id="Embed-9"><a href="#Embed-9"><span class="linenos"> 9</span></a>
</span><span id="Embed-10"><a href="#Embed-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="Embed-11"><a href="#Embed-11"><span class="linenos">11</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Embed-12"><a href="#Embed-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;cohere.embed&quot;</span>
</span><span id="Embed-13"><a href="#Embed-13"><span class="linenos">13</span></a>
</span><span id="Embed-14"><a href="#Embed-14"><span class="linenos">14</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Embed-15"><a href="#Embed-15"><span class="linenos">15</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
</span><span id="Embed-16"><a href="#Embed-16"><span class="linenos">16</span></a>            <span class="p">{</span>
</span><span id="Embed-17"><a href="#Embed-17"><span class="linenos">17</span></a>                <span class="s2">&quot;texts&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
</span><span id="Embed-18"><a href="#Embed-18"><span class="linenos">18</span></a>                <span class="s2">&quot;input_type&quot;</span><span class="p">:</span> <span class="s2">&quot;search_document&quot;</span><span class="p">,</span>
</span><span id="Embed-19"><a href="#Embed-19"><span class="linenos">19</span></a>            <span class="p">}</span>
</span><span id="Embed-20"><a href="#Embed-20"><span class="linenos">20</span></a>        <span class="p">)</span>
</span><span id="Embed-21"><a href="#Embed-21"><span class="linenos">21</span></a>
</span><span id="Embed-22"><a href="#Embed-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">parse_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
</span><span id="Embed-23"><a href="#Embed-23"><span class="linenos">23</span></a>        <span class="n">response_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="Embed-24"><a href="#Embed-24"><span class="linenos">24</span></a>        <span class="n">embeddings</span> <span class="o">=</span> <span class="n">response_body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">)</span>
</span><span id="Embed-25"><a href="#Embed-25"><span class="linenos">25</span></a>        <span class="k">return</span> <span class="n">embeddings</span>
</span></pre></div>


            <div class="docstring"><p>Amazon Titan Embedding base class.</p>
</div>


                            <div id="Embed.family" class="classattr">
                                        <input id="Embed.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Embed.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Embed.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Embed.family-10"><a href="#Embed.family-10"><span class="linenos">10</span></a>    <span class="nd">@classmethod</span>
</span><span id="Embed.family-11"><a href="#Embed.family-11"><span class="linenos">11</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Embed.family-12"><a href="#Embed.family-12"><span class="linenos">12</span></a>        <span class="k">return</span> <span class="s2">&quot;cohere.embed&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Embed.get_body" class="classattr">
                                        <input id="Embed.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Embed.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Embed.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Embed.get_body-14"><a href="#Embed.get_body-14"><span class="linenos">14</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Embed.get_body-15"><a href="#Embed.get_body-15"><span class="linenos">15</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
</span><span id="Embed.get_body-16"><a href="#Embed.get_body-16"><span class="linenos">16</span></a>            <span class="p">{</span>
</span><span id="Embed.get_body-17"><a href="#Embed.get_body-17"><span class="linenos">17</span></a>                <span class="s2">&quot;texts&quot;</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span>
</span><span id="Embed.get_body-18"><a href="#Embed.get_body-18"><span class="linenos">18</span></a>                <span class="s2">&quot;input_type&quot;</span><span class="p">:</span> <span class="s2">&quot;search_document&quot;</span><span class="p">,</span>
</span><span id="Embed.get_body-19"><a href="#Embed.get_body-19"><span class="linenos">19</span></a>            <span class="p">}</span>
</span><span id="Embed.get_body-20"><a href="#Embed.get_body-20"><span class="linenos">20</span></a>        <span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Embed.parse_response" class="classattr">
                                        <input id="Embed.parse_response-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">parse_response</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">response</span><span class="p">:</span> <span class="nb">bytes</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]</span>:</span></span>

                <label class="view-source-button" for="Embed.parse_response-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Embed.parse_response"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Embed.parse_response-22"><a href="#Embed.parse_response-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">parse_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]]:</span>
</span><span id="Embed.parse_response-23"><a href="#Embed.parse_response-23"><span class="linenos">23</span></a>        <span class="n">response_body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</span><span id="Embed.parse_response-24"><a href="#Embed.parse_response-24"><span class="linenos">24</span></a>        <span class="n">embeddings</span> <span class="o">=</span> <span class="n">response_body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;embeddings&quot;</span><span class="p">)</span>
</span><span id="Embed.parse_response-25"><a href="#Embed.parse_response-25"><span class="linenos">25</span></a>        <span class="k">return</span> <span class="n">embeddings</span>
</span></pre></div>


    

                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>bedrock_fm.bedrock.BedrockEmbeddingsModel</dt>
                                <dd id="Embed.__init__" class="function">BedrockEmbeddingsModel</dd>
                <dd id="Embed.verbose" class="variable">verbose</dd>
                <dd id="Embed.session" class="variable">session</dd>
                <dd id="Embed.from_id" class="function">from_id</dd>
                <dd id="Embed.list_model_ids" class="function">list_model_ids</dd>
                <dd id="Embed.generate" class="function">generate</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="Llama2Chat">
                            <input id="Llama2Chat-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
                    <div class="decorator">@define</div>

    <span class="def">class</span>
    <span class="name">Llama2Chat</span><wbr>(<span class="base"><a href="#BedrockFoundationModel">bedrock_fm.BedrockFoundationModel</a></span>):

                <label class="view-source-button" for="Llama2Chat-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat-11"><a href="#Llama2Chat-11"><span class="linenos">11</span></a><span class="nd">@define</span>
</span><span id="Llama2Chat-12"><a href="#Llama2Chat-12"><span class="linenos">12</span></a><span class="k">class</span> <span class="nc">Llama2Chat</span><span class="p">(</span><span class="n">BedrockFoundationModel</span><span class="p">):</span>
</span><span id="Llama2Chat-13"><a href="#Llama2Chat-13"><span class="linenos">13</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;A dialogue use case optimized variant of Llama 2 models.</span>
</span><span id="Llama2Chat-14"><a href="#Llama2Chat-14"><span class="linenos">14</span></a><span class="sd">    Llama 2 is an auto-regressive language model that uses an optimized transformer architecture.</span>
</span><span id="Llama2Chat-15"><a href="#Llama2Chat-15"><span class="linenos">15</span></a><span class="sd">    Llama 2 is intended for commercial and research use in English.</span>
</span><span id="Llama2Chat-16"><a href="#Llama2Chat-16"><span class="linenos">16</span></a>
</span><span id="Llama2Chat-17"><a href="#Llama2Chat-17"><span class="linenos">17</span></a><span class="sd">    [Llama2 Chat](https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-meta.html) does</span>
</span><span id="Llama2Chat-18"><a href="#Llama2Chat-18"><span class="linenos">18</span></a><span class="sd">    not support any `extra_args`.</span>
</span><span id="Llama2Chat-19"><a href="#Llama2Chat-19"><span class="linenos">19</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Llama2Chat-20"><a href="#Llama2Chat-20"><span class="linenos">20</span></a>
</span><span id="Llama2Chat-21"><a href="#Llama2Chat-21"><span class="linenos">21</span></a>    <span class="nd">@classmethod</span>
</span><span id="Llama2Chat-22"><a href="#Llama2Chat-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat-23"><a href="#Llama2Chat-23"><span class="linenos">23</span></a>        <span class="k">return</span> <span class="s2">&quot;meta.llama2&quot;</span>
</span><span id="Llama2Chat-24"><a href="#Llama2Chat-24"><span class="linenos">24</span></a>
</span><span id="Llama2Chat-25"><a href="#Llama2Chat-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Llama2Chat-26"><a href="#Llama2Chat-26"><span class="linenos">26</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Llama2Chat-27"><a href="#Llama2Chat-27"><span class="linenos">27</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span><span class="s2">&quot;Llama2 Chat does not support any extra args&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-28"><a href="#Llama2Chat-28"><span class="linenos">28</span></a>
</span><span id="Llama2Chat-29"><a href="#Llama2Chat-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat-30"><a href="#Llama2Chat-30"><span class="linenos">30</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Llama2Chat-31"><a href="#Llama2Chat-31"><span class="linenos">31</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="Llama2Chat-32"><a href="#Llama2Chat-32"><span class="linenos">32</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;&lt;SYS&gt;&gt;</span><span class="se">\n</span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">&lt;&lt;/SYS&gt;&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-33"><a href="#Llama2Chat-33"><span class="linenos">33</span></a>            <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat-34"><a href="#Llama2Chat-34"><span class="linenos">34</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-35"><a href="#Llama2Chat-35"><span class="linenos">35</span></a>        <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat-36"><a href="#Llama2Chat-36"><span class="linenos">36</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Llama2Chat-37"><a href="#Llama2Chat-37"><span class="linenos">37</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Llama2Chat-38"><a href="#Llama2Chat-38"><span class="linenos">38</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; [/INST] </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> &lt;/s&gt;&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-39"><a href="#Llama2Chat-39"><span class="linenos">39</span></a>        <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat-40"><a href="#Llama2Chat-40"><span class="linenos">40</span></a>        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">conversation</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
</span><span id="Llama2Chat-41"><a href="#Llama2Chat-41"><span class="linenos">41</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;s&gt; [INST] </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> [/INST] </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> &lt;/s&gt;&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-42"><a href="#Llama2Chat-42"><span class="linenos">42</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;s&gt; [INST] </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat-43"><a href="#Llama2Chat-43"><span class="linenos">43</span></a>
</span><span id="Llama2Chat-44"><a href="#Llama2Chat-44"><span class="linenos">44</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Llama2Chat-45"><a href="#Llama2Chat-45"><span class="linenos">45</span></a>
</span><span id="Llama2Chat-46"><a href="#Llama2Chat-46"><span class="linenos">46</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Llama2Chat-47"><a href="#Llama2Chat-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Llama2Chat-48"><a href="#Llama2Chat-48"><span class="linenos">48</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Llama2Chat-49"><a href="#Llama2Chat-49"><span class="linenos">49</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Llama2Chat-50"><a href="#Llama2Chat-50"><span class="linenos">50</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Llama2Chat-51"><a href="#Llama2Chat-51"><span class="linenos">51</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Llama2Chat-52"><a href="#Llama2Chat-52"><span class="linenos">52</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Llama2Chat-53"><a href="#Llama2Chat-53"><span class="linenos">53</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Llama2Chat-54"><a href="#Llama2Chat-54"><span class="linenos">54</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Llama2Chat-55"><a href="#Llama2Chat-55"><span class="linenos">55</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat-56"><a href="#Llama2Chat-56"><span class="linenos">56</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Llama2Chat-57"><a href="#Llama2Chat-57"><span class="linenos">57</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Llama2Chat-58"><a href="#Llama2Chat-58"><span class="linenos">58</span></a>            <span class="p">{</span>
</span><span id="Llama2Chat-59"><a href="#Llama2Chat-59"><span class="linenos">59</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;[INST] </span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s2"> [/INST] &quot;</span><span class="p">,</span>
</span><span id="Llama2Chat-60"><a href="#Llama2Chat-60"><span class="linenos">60</span></a>                <span class="s2">&quot;max_gen_len&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Llama2Chat-61"><a href="#Llama2Chat-61"><span class="linenos">61</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Llama2Chat-62"><a href="#Llama2Chat-62"><span class="linenos">62</span></a>                <span class="s2">&quot;top_p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Llama2Chat-63"><a href="#Llama2Chat-63"><span class="linenos">63</span></a>            <span class="p">}</span>
</span><span id="Llama2Chat-64"><a href="#Llama2Chat-64"><span class="linenos">64</span></a>        <span class="p">)</span>
</span><span id="Llama2Chat-65"><a href="#Llama2Chat-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span><span id="Llama2Chat-66"><a href="#Llama2Chat-66"><span class="linenos">66</span></a>
</span><span id="Llama2Chat-67"><a href="#Llama2Chat-67"><span class="linenos">67</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Llama2Chat-68"><a href="#Llama2Chat-68"><span class="linenos">68</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;generation&quot;</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>A dialogue use case optimized variant of Llama 2 models.
Llama 2 is an auto-regressive language model that uses an optimized transformer architecture.
Llama 2 is intended for commercial and research use in English.</p>

<p><a href="https://docs.aws.amazon.com/bedrock/latest/userguide/model-parameters-meta.html">Llama2 Chat</a> does
not support any <code><a href="#Llama2Chat.extra_args">extra_args</a></code>.</p>
</div>


                            <div id="Llama2Chat.__init__" class="classattr">
                                        <input id="Llama2Chat.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Llama2Chat</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="o">*</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.7</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">500</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">session</span><span class="p">:</span> <span class="n">boto3</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">Session</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">client_ops</span><span class="p">:</span> <span class="n">Any</span> <span class="o">=</span> <span class="n">NOTHING</span>,</span><span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="Llama2Chat.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.__init__-2"><a href="#Llama2Chat.__init__-2"><span class="linenos"> 2</span></a><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">top_p</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;top_p&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">temperature</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;temperature&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">max_token_count</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;max_token_count&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">,</span> <span class="n">stop_sequences</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">extra_args</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">client_ops</span><span class="o">=</span><span class="n">NOTHING</span><span class="p">,</span> <span class="n">model_id</span><span class="o">=</span><span class="n">attr_dict</span><span class="p">[</span><span class="s1">&#39;_model_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">default</span><span class="p">):</span>
</span><span id="Llama2Chat.__init__-3"><a href="#Llama2Chat.__init__-3"><span class="linenos"> 3</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">top_p</span> <span class="o">=</span> <span class="n">top_p</span>
</span><span id="Llama2Chat.__init__-4"><a href="#Llama2Chat.__init__-4"><span class="linenos"> 4</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="n">temperature</span>
</span><span id="Llama2Chat.__init__-5"><a href="#Llama2Chat.__init__-5"><span class="linenos"> 5</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">max_token_count</span> <span class="o">=</span> <span class="n">max_token_count</span>
</span><span id="Llama2Chat.__init__-6"><a href="#Llama2Chat.__init__-6"><span class="linenos"> 6</span></a>    <span class="k">if</span> <span class="n">stop_sequences</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-7"><a href="#Llama2Chat.__init__-7"><span class="linenos"> 7</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">stop_sequences</span>
</span><span id="Llama2Chat.__init__-8"><a href="#Llama2Chat.__init__-8"><span class="linenos"> 8</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-9"><a href="#Llama2Chat.__init__-9"><span class="linenos"> 9</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_sequences</span> <span class="o">=</span> <span class="n">__attr_factory_stop_sequences</span><span class="p">()</span>
</span><span id="Llama2Chat.__init__-10"><a href="#Llama2Chat.__init__-10"><span class="linenos">10</span></a>    <span class="k">if</span> <span class="n">extra_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-11"><a href="#Llama2Chat.__init__-11"><span class="linenos">11</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">extra_args</span>
</span><span id="Llama2Chat.__init__-12"><a href="#Llama2Chat.__init__-12"><span class="linenos">12</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-13"><a href="#Llama2Chat.__init__-13"><span class="linenos">13</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">extra_args</span> <span class="o">=</span> <span class="n">__attr_factory_extra_args</span><span class="p">()</span>
</span><span id="Llama2Chat.__init__-14"><a href="#Llama2Chat.__init__-14"><span class="linenos">14</span></a>    <span class="k">if</span> <span class="n">session</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-15"><a href="#Llama2Chat.__init__-15"><span class="linenos">15</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">session</span>
</span><span id="Llama2Chat.__init__-16"><a href="#Llama2Chat.__init__-16"><span class="linenos">16</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-17"><a href="#Llama2Chat.__init__-17"><span class="linenos">17</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="n">__attr_factory_session</span><span class="p">()</span>
</span><span id="Llama2Chat.__init__-18"><a href="#Llama2Chat.__init__-18"><span class="linenos">18</span></a>    <span class="k">if</span> <span class="n">client</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-19"><a href="#Llama2Chat.__init__-19"><span class="linenos">19</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">client</span>
</span><span id="Llama2Chat.__init__-20"><a href="#Llama2Chat.__init__-20"><span class="linenos">20</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-21"><a href="#Llama2Chat.__init__-21"><span class="linenos">21</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client</span> <span class="o">=</span> <span class="n">__attr_factory__client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Llama2Chat.__init__-22"><a href="#Llama2Chat.__init__-22"><span class="linenos">22</span></a>    <span class="k">if</span> <span class="n">client_ops</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">NOTHING</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-23"><a href="#Llama2Chat.__init__-23"><span class="linenos">23</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">client_ops</span>
</span><span id="Llama2Chat.__init__-24"><a href="#Llama2Chat.__init__-24"><span class="linenos">24</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="Llama2Chat.__init__-25"><a href="#Llama2Chat.__init__-25"><span class="linenos">25</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_client_ops</span> <span class="o">=</span> <span class="n">__attr_factory__client_ops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Llama2Chat.__init__-26"><a href="#Llama2Chat.__init__-26"><span class="linenos">26</span></a>    <span class="bp">self</span><span class="o">.</span><span class="n">_model_id</span> <span class="o">=</span> <span class="n">model_id</span>
</span></pre></div>


            <div class="docstring"><p>Method generated by attrs for class Llama2Chat.</p>
</div>


                            </div>
                            <div id="Llama2Chat.family" class="classattr">
                                        <input id="Llama2Chat.family-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator">@classmethod</div>

        <span class="def">def</span>
        <span class="name">family</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">cls</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Llama2Chat.family-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.family"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.family-21"><a href="#Llama2Chat.family-21"><span class="linenos">21</span></a>    <span class="nd">@classmethod</span>
</span><span id="Llama2Chat.family-22"><a href="#Llama2Chat.family-22"><span class="linenos">22</span></a>    <span class="k">def</span> <span class="nf">family</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat.family-23"><a href="#Llama2Chat.family-23"><span class="linenos">23</span></a>        <span class="k">return</span> <span class="s2">&quot;meta.llama2&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in subclasses to return the model family.</p>

<p>Returns:
    str: the model family</p>
</div>


                            </div>
                            <div id="Llama2Chat.validate_extra_args" class="classattr">
                                        <input id="Llama2Chat.validate_extra_args-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">validate_extra_args</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="Llama2Chat.validate_extra_args-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.validate_extra_args"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.validate_extra_args-25"><a href="#Llama2Chat.validate_extra_args-25"><span class="linenos">25</span></a>    <span class="k">def</span> <span class="nf">validate_extra_args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Llama2Chat.validate_extra_args-26"><a href="#Llama2Chat.validate_extra_args-26"><span class="linenos">26</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">extra_args</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Llama2Chat.validate_extra_args-27"><a href="#Llama2Chat.validate_extra_args-27"><span class="linenos">27</span></a>            <span class="k">raise</span> <span class="n">BedrockExtraArgsError</span><span class="p">(</span><span class="s2">&quot;Llama2 Chat does not support any extra args&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the subclasses to provide a custom validator for the
extra arguments to be passed to the model.</p>

<p>Args:
    extra_args (Dict[str, Any]): A dictionary containing the extra arguments</p>
</div>


                            </div>
                            <div id="Llama2Chat.get_chat_prompt" class="classattr">
                                        <input id="Llama2Chat.get_chat_prompt-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_chat_prompt</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Human</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">Assistant</span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">System</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Llama2Chat.get_chat_prompt-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.get_chat_prompt"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.get_chat_prompt-29"><a href="#Llama2Chat.get_chat_prompt-29"><span class="linenos">29</span></a>    <span class="k">def</span> <span class="nf">get_chat_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conversation</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Human</span> <span class="o">|</span> <span class="n">Assistant</span> <span class="o">|</span> <span class="n">System</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat.get_chat_prompt-30"><a href="#Llama2Chat.get_chat_prompt-30"><span class="linenos">30</span></a>        <span class="n">prompts</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Llama2Chat.get_chat_prompt-31"><a href="#Llama2Chat.get_chat_prompt-31"><span class="linenos">31</span></a>        <span class="k">if</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="n">MessageRole</span><span class="o">.</span><span class="n">SYSTEM</span><span class="p">:</span>
</span><span id="Llama2Chat.get_chat_prompt-32"><a href="#Llama2Chat.get_chat_prompt-32"><span class="linenos">32</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;&lt;SYS&gt;&gt;</span><span class="se">\n</span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="se">\n</span><span class="s2">&lt;&lt;/SYS&gt;&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-33"><a href="#Llama2Chat.get_chat_prompt-33"><span class="linenos">33</span></a>            <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat.get_chat_prompt-34"><a href="#Llama2Chat.get_chat_prompt-34"><span class="linenos">34</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-35"><a href="#Llama2Chat.get_chat_prompt-35"><span class="linenos">35</span></a>        <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat.get_chat_prompt-36"><a href="#Llama2Chat.get_chat_prompt-36"><span class="linenos">36</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">conversation</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="Llama2Chat.get_chat_prompt-37"><a href="#Llama2Chat.get_chat_prompt-37"><span class="linenos">37</span></a>            <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-38"><a href="#Llama2Chat.get_chat_prompt-38"><span class="linenos">38</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot; [/INST] </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> &lt;/s&gt;&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-39"><a href="#Llama2Chat.get_chat_prompt-39"><span class="linenos">39</span></a>        <span class="n">conversation</span> <span class="o">=</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span><span id="Llama2Chat.get_chat_prompt-40"><a href="#Llama2Chat.get_chat_prompt-40"><span class="linenos">40</span></a>        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">conversation</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span> <span class="n">conversation</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
</span><span id="Llama2Chat.get_chat_prompt-41"><a href="#Llama2Chat.get_chat_prompt-41"><span class="linenos">41</span></a>            <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;s&gt; [INST] </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> [/INST] </span><span class="si">{</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2"> &lt;/s&gt;&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-42"><a href="#Llama2Chat.get_chat_prompt-42"><span class="linenos">42</span></a>        <span class="n">prompts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&lt;s&gt; [INST] </span><span class="si">{</span><span class="n">conversation</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="Llama2Chat.get_chat_prompt-43"><a href="#Llama2Chat.get_chat_prompt-43"><span class="linenos">43</span></a>
</span><span id="Llama2Chat.get_chat_prompt-44"><a href="#Llama2Chat.get_chat_prompt-44"><span class="linenos">44</span></a>        <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prompts</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="Llama2Chat.get_body" class="classattr">
                                        <input id="Llama2Chat.get_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_body</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span>,</span><span class="param">	<span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>,</span><span class="param">	<span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="Llama2Chat.get_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.get_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.get_body-46"><a href="#Llama2Chat.get_body-46"><span class="linenos">46</span></a>    <span class="k">def</span> <span class="nf">get_body</span><span class="p">(</span>
</span><span id="Llama2Chat.get_body-47"><a href="#Llama2Chat.get_body-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-48"><a href="#Llama2Chat.get_body-48"><span class="linenos">48</span></a>        <span class="n">prompt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-49"><a href="#Llama2Chat.get_body-49"><span class="linenos">49</span></a>        <span class="n">top_p</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-50"><a href="#Llama2Chat.get_body-50"><span class="linenos">50</span></a>        <span class="n">temperature</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-51"><a href="#Llama2Chat.get_body-51"><span class="linenos">51</span></a>        <span class="n">max_token_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-52"><a href="#Llama2Chat.get_body-52"><span class="linenos">52</span></a>        <span class="n">stop_sequences</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Llama2Chat.get_body-53"><a href="#Llama2Chat.get_body-53"><span class="linenos">53</span></a>        <span class="n">extra_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
</span><span id="Llama2Chat.get_body-54"><a href="#Llama2Chat.get_body-54"><span class="linenos">54</span></a>        <span class="n">stream</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-55"><a href="#Llama2Chat.get_body-55"><span class="linenos">55</span></a>    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Llama2Chat.get_body-56"><a href="#Llama2Chat.get_body-56"><span class="linenos">56</span></a>        <span class="n">body</span> <span class="o">=</span> <span class="n">extra_args</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="Llama2Chat.get_body-57"><a href="#Llama2Chat.get_body-57"><span class="linenos">57</span></a>        <span class="n">body</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
</span><span id="Llama2Chat.get_body-58"><a href="#Llama2Chat.get_body-58"><span class="linenos">58</span></a>            <span class="p">{</span>
</span><span id="Llama2Chat.get_body-59"><a href="#Llama2Chat.get_body-59"><span class="linenos">59</span></a>                <span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;[INST] </span><span class="si">{</span><span class="n">prompt</span><span class="si">}</span><span class="s2"> [/INST] &quot;</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-60"><a href="#Llama2Chat.get_body-60"><span class="linenos">60</span></a>                <span class="s2">&quot;max_gen_len&quot;</span><span class="p">:</span> <span class="n">max_token_count</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-61"><a href="#Llama2Chat.get_body-61"><span class="linenos">61</span></a>                <span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="n">temperature</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-62"><a href="#Llama2Chat.get_body-62"><span class="linenos">62</span></a>                <span class="s2">&quot;top_p&quot;</span><span class="p">:</span> <span class="n">top_p</span><span class="p">,</span>
</span><span id="Llama2Chat.get_body-63"><a href="#Llama2Chat.get_body-63"><span class="linenos">63</span></a>            <span class="p">}</span>
</span><span id="Llama2Chat.get_body-64"><a href="#Llama2Chat.get_body-64"><span class="linenos">64</span></a>        <span class="p">)</span>
</span><span id="Llama2Chat.get_body-65"><a href="#Llama2Chat.get_body-65"><span class="linenos">65</span></a>        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to generate the stringified body to be passed to
<a href="https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModel.html">InvokeModel</a>.</p>

<p>Args:
    prompt (str): the user prompt
    top_p (float): the top P value
    temperature (float): the temperature value
    max_token_count (int): the max token count
    stop_sequences (List[str]): the list of stop words
    extra_args (Dict[str, Any]): a dictionary containing the extra arguments to pass to the model
    stream (bool): a boolean indicating if a streaming response is required</p>

<p>Returns:
    str: the stringified body to be passed to <code>InvokeModel</code></p>
</div>


                            </div>
                            <div id="Llama2Chat.process_response_body" class="classattr">
                                        <input id="Llama2Chat.process_response_body-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process_response_body</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></span><span class="return-annotation">) -> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>:</span></span>

                <label class="view-source-button" for="Llama2Chat.process_response_body-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Llama2Chat.process_response_body"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Llama2Chat.process_response_body-67"><a href="#Llama2Chat.process_response_body-67"><span class="linenos">67</span></a>    <span class="k">def</span> <span class="nf">process_response_body</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">body</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
</span><span id="Llama2Chat.process_response_body-68"><a href="#Llama2Chat.process_response_body-68"><span class="linenos">68</span></a>        <span class="k">return</span> <span class="p">[</span><span class="n">body</span><span class="p">[</span><span class="s2">&quot;generation&quot;</span><span class="p">]]</span>
</span></pre></div>


            <div class="docstring"><p>Override this method in the model class to processes the response from the <code>InvokeModel</code> and extract the generated text.</p>

<p>Args:
    resp (Dict[str, Any]): the response returned by InvokeModel as a dictionary.</p>

<p>Returns:
    List[str]: The list of text generations</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#BedrockFoundationModel">BedrockFoundationModel</a></dt>
                                <dd id="Llama2Chat.top_p" class="variable"><a href="#BedrockFoundationModel.top_p">top_p</a></dd>
                <dd id="Llama2Chat.temperature" class="variable"><a href="#BedrockFoundationModel.temperature">temperature</a></dd>
                <dd id="Llama2Chat.max_token_count" class="variable"><a href="#BedrockFoundationModel.max_token_count">max_token_count</a></dd>
                <dd id="Llama2Chat.stop_sequences" class="variable"><a href="#BedrockFoundationModel.stop_sequences">stop_sequences</a></dd>
                <dd id="Llama2Chat.extra_args" class="variable"><a href="#BedrockFoundationModel.extra_args">extra_args</a></dd>
                <dd id="Llama2Chat.session" class="variable"><a href="#BedrockFoundationModel.session">session</a></dd>
                <dd id="Llama2Chat.from_id" class="function"><a href="#BedrockFoundationModel.from_id">from_id</a></dd>
                <dd id="Llama2Chat.list_model_ids" class="function"><a href="#BedrockFoundationModel.list_model_ids">list_model_ids</a></dd>
                <dd id="Llama2Chat.generate" class="function"><a href="#BedrockFoundationModel.generate">generate</a></dd>
                <dd id="Llama2Chat.chat" class="function"><a href="#BedrockFoundationModel.chat">chat</a></dd>
                <dd id="Llama2Chat.get_text" class="function"><a href="#BedrockFoundationModel.get_text">get_text</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="from_model_id">
                            <input id="from_model_id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">from_model_id</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">) -> <span class="n"><a href="#BedrockFoundationModel">BedrockFoundationModel</a></span> <span class="o">|</span> <span class="n">bedrock_fm</span><span class="o">.</span><span class="n">bedrock</span><span class="o">.</span><span class="n">BedrockEmbeddingsModel</span>:</span></span>

                <label class="view-source-button" for="from_model_id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#from_model_id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="from_model_id-50"><a href="#from_model_id-50"><span class="linenos">50</span></a><span class="k">def</span> <span class="nf">from_model_id</span><span class="p">(</span>
</span><span id="from_model_id-51"><a href="#from_model_id-51"><span class="linenos">51</span></a>    <span class="n">model_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
</span><span id="from_model_id-52"><a href="#from_model_id-52"><span class="linenos">52</span></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BedrockFoundationModel</span> <span class="o">|</span> <span class="n">BedrockEmbeddingsModel</span><span class="p">:</span>
</span><span id="from_model_id-53"><a href="#from_model_id-53"><span class="linenos">53</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiates a Bedrock Foundation Model or Embedding Model based on the `model_id`.</span>
</span><span id="from_model_id-54"><a href="#from_model_id-54"><span class="linenos">54</span></a>
</span><span id="from_model_id-55"><a href="#from_model_id-55"><span class="linenos">55</span></a><span class="sd">    Usage example:</span>
</span><span id="from_model_id-56"><a href="#from_model_id-56"><span class="linenos">56</span></a>
</span><span id="from_model_id-57"><a href="#from_model_id-57"><span class="linenos">57</span></a><span class="sd">    ```py</span>
</span><span id="from_model_id-58"><a href="#from_model_id-58"><span class="linenos">58</span></a><span class="sd">    from bedrock_fm import from_model_id</span>
</span><span id="from_model_id-59"><a href="#from_model_id-59"><span class="linenos">59</span></a>
</span><span id="from_model_id-60"><a href="#from_model_id-60"><span class="linenos">60</span></a><span class="sd">    fm = from_model_id(&quot;amazon.titan-embed-g1-text-02&quot;)</span>
</span><span id="from_model_id-61"><a href="#from_model_id-61"><span class="linenos">61</span></a><span class="sd">    # fm is of type `bedrock_fm.Titan`</span>
</span><span id="from_model_id-62"><a href="#from_model_id-62"><span class="linenos">62</span></a><span class="sd">    ```</span>
</span><span id="from_model_id-63"><a href="#from_model_id-63"><span class="linenos">63</span></a>
</span><span id="from_model_id-64"><a href="#from_model_id-64"><span class="linenos">64</span></a><span class="sd">    Args:</span>
</span><span id="from_model_id-65"><a href="#from_model_id-65"><span class="linenos">65</span></a><span class="sd">        model_id (str): the Amazon Bedrock [modelId]()</span>
</span><span id="from_model_id-66"><a href="#from_model_id-66"><span class="linenos">66</span></a>
</span><span id="from_model_id-67"><a href="#from_model_id-67"><span class="linenos">67</span></a><span class="sd">    Raises:</span>
</span><span id="from_model_id-68"><a href="#from_model_id-68"><span class="linenos">68</span></a><span class="sd">        BedrockInvalidModelError:</span>
</span><span id="from_model_id-69"><a href="#from_model_id-69"><span class="linenos">69</span></a>
</span><span id="from_model_id-70"><a href="#from_model_id-70"><span class="linenos">70</span></a><span class="sd">    Returns:</span>
</span><span id="from_model_id-71"><a href="#from_model_id-71"><span class="linenos">71</span></a><span class="sd">        BedrockFoundationModel | BedrockEmbeddingsModel: A typed instance of the Foundation Model</span>
</span><span id="from_model_id-72"><a href="#from_model_id-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="from_model_id-73"><a href="#from_model_id-73"><span class="linenos">73</span></a>
</span><span id="from_model_id-74"><a href="#from_model_id-74"><span class="linenos">74</span></a>    <span class="k">if</span> <span class="s2">&quot;-&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">model_id</span><span class="p">:</span>
</span><span id="from_model_id-75"><a href="#from_model_id-75"><span class="linenos">75</span></a>        <span class="k">raise</span> <span class="n">BedrockInvalidModelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> is not a supported model&quot;</span><span class="p">)</span>
</span><span id="from_model_id-76"><a href="#from_model_id-76"><span class="linenos">76</span></a>    <span class="n">family</span> <span class="o">=</span> <span class="n">model_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="from_model_id-77"><a href="#from_model_id-77"><span class="linenos">77</span></a>    <span class="k">if</span> <span class="n">model_id</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;embed&quot;</span><span class="p">:</span>
</span><span id="from_model_id-78"><a href="#from_model_id-78"><span class="linenos">78</span></a>        <span class="n">family</span> <span class="o">+=</span> <span class="s2">&quot;-embed&quot;</span>  <span class="c1"># Amazon Titan model naming workaround</span>
</span><span id="from_model_id-79"><a href="#from_model_id-79"><span class="linenos">79</span></a>
</span><span id="from_model_id-80"><a href="#from_model_id-80"><span class="linenos">80</span></a>    <span class="k">if</span> <span class="n">family</span> <span class="ow">in</span> <span class="n">__family_map</span><span class="p">:</span>
</span><span id="from_model_id-81"><a href="#from_model_id-81"><span class="linenos">81</span></a>        <span class="k">return</span> <span class="n">__family_map</span><span class="p">[</span><span class="n">family</span><span class="p">]</span><span class="o">.</span><span class="n">from_id</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="from_model_id-82"><a href="#from_model_id-82"><span class="linenos">82</span></a>    <span class="k">raise</span> <span class="n">BedrockInvalidModelError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model_id</span><span class="si">}</span><span class="s2"> is not a supported model&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Instantiates a Bedrock Foundation Model or Embedding Model based on the <code>model_id</code>.</p>

<p>Usage example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="kn">from</span> <span class="nn">bedrock_fm</span> <span class="kn">import</span> <span class="n">from_model_id</span>

<span class="n">fm</span> <span class="o">=</span> <span class="n">from_model_id</span><span class="p">(</span><span class="s2">&quot;amazon.titan-embed-g1-text-02&quot;</span><span class="p">)</span>
<span class="c1"># fm is of type `<a href="#Titan">bedrock_fm.Titan</a>`</span>
</code></pre>
</div>

<p>Args:
    model_id (str): the Amazon Bedrock <a href="">modelId</a></p>

<p>Raises:
    BedrockInvalidModelError:</p>

<p>Returns:
    BedrockFoundationModel | BedrockEmbeddingsModel: A typed instance of the Foundation Model</p>
</div>


                </section>
    </main>
</body>
</html>